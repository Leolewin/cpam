<?xml version="1.0"?>
<programs>
  <program name="sendmail" version="8.12.11" revision="1">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <install-name>${SB_PROG_NAME}81211</install-name>

    <sources>
      <source checksum="fafda7f8043f0c34b9aa295618aa598c"
        checksum-type="md5" size="1899112"
        path="src/sendmail.8.12.11.tar.gz"/>
      <patch checksum="3aaec526e05038b05c3f17b3e1a49e7d"
        checksum-type="md5" size="4018"
        path="src/sendmail.8.12.11.patch"/>
    </sources>

    <dependencies>
    <depend group="smmsp"/>

      <depend program="gcc" add-path="prepend">v==3.3.2</depend>
      <depend program="db" var="LIBDB"
        install-name="libdb42">v&gt;=4.2.52</depend>
      <depend program="cyrus-sasl" var="LIBSASL"
        install-name="libsasl21">v&gt;=2.1.15</depend>
      <depend program="groff" install-name="groff11"
        add-path="prepend">v&gt;=1.17.2</depend>
      <depend program="m4" var="M4">v&gt;=1.4</depend>
      <depend program="openldap" var="OPENLDAP">v&gt;=2.1.27</depend>
      <depend program="openssl" var="LIBOPENSSL"
        install-name="libopenssl097">v&gt;=0.9.7b</depend>
    </dependencies>

    <script-header>
<![CDATA[
_sysconfdir="/etc${SB_INSTALL_PREFIX}"
_localstatedir="/var${SB_INSTALL_PREFIX}"
]]>
    </script-header>

    <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC=xlc_r CFLAGS="-O2 -qmaxmem=-1 -qarch=com"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib:/lib"
  CC_LD_RT="-Wl,-blibpath:"

  cat >devtools/Site/site.config.m4 <<_EOT_
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DEGD')
define(\`confLIBS', \`-lpthread')
_EOT_
 ;;
*-hpux*)
  CC=cc CFLAGS="+O2 -Ae -z +ESlit +Onofltacc +DAportable \
+Oentrysched +Odataprefetch"
  CC_LD_RT="-Wl,+s,+b,"

  cat >devtools/Site/site.config.m4 <<_EOT_
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DEGD')
_EOT_
  ;;
*-irix6*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1429 -O2 -OPT:Olimit=0"
  CC_LD_RT="-Wl,-rpath,"

  cat >devtools/Site/site.config.m4 <<_EOT_
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DEGD')
define(\`confLIBS', \`-lpthread')
_EOT_
  ;;
*-linux*)
  CC_LD_RT="-Wl,-rpath,"

  cat >devtools/Site/site.config.m4 <<_EOT_
APPENDDEF(\`conf_sendmail_LIBS', \`-lresolv')
_EOT_
  ;;
*-osf4*)
  CC=cc CFLAGS="-O2 -std -readonly_strings"
  CC_LD_RT="-Wl,-rpath,"

  cat >devtools/Site/site.config.m4 <<_EOT_
APPENDDEF(\`conf_libmilter_ENVDEF', \`-Dsnprintf=sm_snprintf')
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DEGD')
define(\`confLIBS', \`-lpthread')
_EOT_
  ;;
*-osf*)
  CC=cc CFLAGS="-O2 -std -readonly_strings"
  CC_LD_RT="-Wl,-rpath,"

  cat >devtools/Site/site.config.m4 <<_EOT_
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DEGD')
define(\`confLIBS', \`-lpthread')
_EOT_
  ;;
*-solaris2.[89])
  CFLAGS="-O2 -mcpu=v8"
  CC_LD_RT="-R"

  cat >devtools/Site/site.config.m4 <<_EOT_
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DEGD')
APPENDDEF(\`conf_sendmail_LIBS', \`-lresolv')
_EOT_
  ;;
*-solaris2.5.1)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=generic"
  CC_LD_RT="-R"

  cat >devtools/Site/site.config.m4 <<_EOT_
APPENDDEF(\`conf_libmilter_ENVDEF', \`-Dsnprintf=sm_snprintf')
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DEGD')
APPENDDEF(\`conf_sendmail_LIBS', \`-lresolv')
define(\`confCCOPTS_SO', \`-KPIC')
_EOT_
  ;;
*-solaris2*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=generic"
  CC_LD_RT="-R"

  cat >devtools/Site/site.config.m4 <<_EOT_
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DEGD')
APPENDDEF(\`conf_sendmail_LIBS', \`-lresolv')
define(\`confCCOPTS_SO', \`-KPIC')
_EOT_
  ;;
esac

cat >>devtools/Site/site.config.m4 <<_EOT_
PREPENDDEF(\`confMAPDEF', \`-DNEWDB')
PREPENDDEF(\`confENVDEF', \`-D_DIR_SENDMAILCF=\"${_sysconfdir}/\" -D_PATH_SENDMAILCF=\"${_sysconfdir}/sendmail.cf\" -D_PATH_SENDMAILPID=\"${_localstatedir}/run/sendmail.pid\" -DSERVICE_SWITCH_FILE=\"${_sysconfdir}/service.switch\" -DCMDDIR=\"${_localstatedir}/sm.bin\" -D_PATH_MY_SENDMAIL=\"${SB_INSTALL_PREFIX}/sbin/sendmail\"')
PREPENDDEF(\`confLIBS', \`-ldb')
APPENDDEF(\`confMAPDEF', \`-DLDAPMAP')
APPENDDEF(\`confLIBS', \`-lldap')
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DSTARTTLS')
APPENDDEF(\`conf_sendmail_LIBS', \`-lssl -lcrypto')
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DSASL=2')
APPENDDEF(\`conf_sendmail_LIBS', \`-lsasl2')
define(\`confINCDIRS', \`-I${LIBDB_INC} -I${LIBOPENSSL_INC} \
-I${LIBSASL_INC} -I${OPENLDAP_INC}')
define(\`confLIBDIRS', \`-L${LIBDB_LIB} -L${LIBOPENSSL_LIB} \
-L${LIBSASL_LIB} -L${OPENLDAP_LIB} ${CC_LD_RT}${LIBDB_LIB}:\
${LIBOPENSSL_LIB}:${LIBSASL_LIB}:${OPENLDAP_LIB} ${LDFLAGS+${LDFLAGS}}')
define(\`confCC', \`${CC:-gcc} ${CFLAGS:--O2}')
define(\`confOPTIMIZE', \`')
define(\`confEBINDIR', \`${SB_INSTALL_PREFIX}/libexec')
define(\`confINCLUDEDIR', \`${SB_INSTALL_PREFIX}/include')
define(\`confLIBDIR', \`${SB_INSTALL_PREFIX}/lib')
define(\`confMANROOT', \`${SB_INSTALL_PREFIX}/man/cat')
define(\`confMANROOTMAN', \`${SB_INSTALL_PREFIX}/man/man')
define(\`confMBINDIR', \`${SB_INSTALL_PREFIX}/sbin')
define(\`confSBINDIR', \`${SB_INSTALL_PREFIX}/sbin')
define(\`confUBINDIR', \`${SB_INSTALL_PREFIX}/bin')
define(\`confSHAREDLIBDIR', \`${SB_INSTALL_PREFIX}/lib')
define(\`confHFDIR', \`${_sysconfdir}')
define(\`confSTDIR', \`${_localstatedir}')
define(\`confMSP_QUEUE_DIR', \`${_localstatedir}/clientmqueue')
define(\`confINSTALL_RAWMAN', \`')
_EOT_

# libmilter not supported HP-UX 10.20, IRIX (cf. libmilter/README)
case "${SB_SYSTYPE}" in
*-hpux10*|*-irix6*) ;;
*)
  cat >>devtools/Site/site.config.m4 <<_EOT_
APPENDDEF(\`conf_sendmail_ENVDEF', \`-DMILTER')
APPENDDEF(\`conf_libmilter_ENVDEF', \`-D_FFR_MILTER_ROOT_UNSAFE ')
_EOT_
  ;;
esac

# reset MAILDIR
sed "s!MAILDIR=.*!MAILDIR=${_sysconfdir}!" cf/cf/Makefile >/tmp/$$
cp /tmp/$$ cf/cf/Makefile && rm -f /tmp/$$
]]>
    </configure>

    <build>
<![CDATA[
M4=${M4}/bin/gm4 sh Build -S

case "${SB_SYSTYPE}" in
*-hpux10*|*-irix6*) ;;
*)
  (cd libmilter; M4=${M4}/bin/gm4 ./Build -S) ;;
esac

(cd doc/op; gmake ROFF_CMD=groff PIC_CMD=gpic EQN_CMD=geqn op.txt)
]]>
    </build>

    <install>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix5*)
  OSTYPE=aix5 ;;
*-aix4*)
  OSTYPE=aix4 ;;
*-osf*)
  OSTYPE=osf1 ;;
*-hpux11*)
  OSTYPE=hpux11 ;;
*-hpux10*)
  OSTYPE=hpux10 ;;
*-irix6*)
  OSTYPE=irix6 ;;
*-linux*)
  OSTYPE=linux ;;
*-solaris2.[89])
  OSTYPE=solaris8 ;;
*-solaris2*)
  OSTYPE=solaris2 ;;
esac

${SB_PATH_GINSTALL} -o root -g 0 -m 755 -d ${SB_INSTALL_PREFIX}/bin \
${SB_INSTALL_PREFIX}/lib ${SB_INSTALL_PREFIX}/libexec \
${SB_INSTALL_PREFIX}/man/cat1 ${SB_INSTALL_PREFIX}/man/man1 \
${SB_INSTALL_PREFIX}/man/cat5 ${SB_INSTALL_PREFIX}/man/man5 \
${SB_INSTALL_PREFIX}/man/cat8 ${SB_INSTALL_PREFIX}/man/man8 \
${SB_INSTALL_PREFIX}/sbin ${SB_INSTALL_PREFIX}/share ${_sysconfdir}
${SB_PATH_GINSTALL} -o root -g smmsp -m 755 -d ${_sysconfdir}/ssl
${SB_PATH_GINSTALL} -o root -g 0 -m 755 -d ${_sysconfdir}/certs
${SB_PATH_GINSTALL} -o root -g smmsp -m 2751 -d ${_localstatedir}
${SB_PATH_GINSTALL} -o smmsp -g smmsp -m 2770 -d \
${_localstatedir}/clientmqueue
${SB_PATH_GINSTALL} -o root -g 0 -m 700 -d ${_localstatedir}/mqueue
${SB_PATH_GINSTALL} -o root -g 0 -m 755 -d ${_localstatedir}/run
${SB_PATH_GINSTALL} -o root -g smmsp -m 2775 -d ${_localstatedir}/run/msp
${SB_PATH_GINSTALL} -o root -g 0 -m 755 -d ${_localstatedir}/run/mta

sh Build install

# remove preformatted man pages
for mandir in 1 5 8; do
  rm ${SB_INSTALL_PREFIX}/man/cat${mandir}/*
  rmdir ${SB_INSTALL_PREFIX}/man/cat${mandir}
done

# install documentation
${SB_PATH_GINSTALL} -m 755 -o root -g 0 -d ${SB_INSTALL_PREFIX}/doc
${SB_PATH_GINSTALL} -m 644 -o root -g 0 doc/op/op.me doc/op/op.ps \
doc/op/op.txt ${SB_INSTALL_PREFIX}/doc

# install M4 macro files
tar cf - cf | (cd ${SB_INSTALL_PREFIX}/share; tar xf - )
${SB_PATH_GCHOWN} -hR 0:0 ${SB_INSTALL_PREFIX}/share/cf

# install libmilter, libsm, and libsmutil
case "${SB_SYSTYPE}" in
*-hpux10*|*-irix6*) ;;
*)
  (cd libmilter; ./Build install) ;;
esac
${SB_PATH_GINSTALL} -o root -g 0 -m 644 obj*/libsm/libsm.a \
obj*/libsmutil/libsmutil.a ${SB_INSTALL_PREFIX}/lib

# placeholder config file
${SB_PATH_GINSTALL} -m 644 -o root -g 0 /dev/null \
${_sysconfdir}/Makefile
${SB_PATH_GINSTALL} -m 644 -o root -g smmsp /dev/null \
${_sysconfdir}/access
${SB_PATH_GINSTALL} -m 644 -o root -g smmsp /dev/null \
${_sysconfdir}/aliases
${SB_PATH_GINSTALL} -m 644 -o root -g smmsp /dev/null \
${_sysconfdir}/relay-domains
${SB_PATH_GINSTALL} -m 444 -o root -g smmsp /dev/null \
${_sysconfdir}/sendmail.cf
${SB_PATH_GINSTALL} -m 644 -o root -g smmsp /dev/null \
${_sysconfdir}/sendmail.mc
${SB_PATH_GINSTALL} -m 644 -o root -g 0 /dev/null \
${_sysconfdir}/service.switch
${SB_PATH_GINSTALL} -m 444 -o root -g smmsp /dev/null \
${_sysconfdir}/submit.cf
${SB_PATH_GINSTALL} -m 644 -o root -g smmsp /dev/null \
${_sysconfdir}/submit.mc
${SB_PATH_GINSTALL} -m 644 -o root -g smmsp /dev/null \
${_sysconfdir}/msp-authinfo

cat >${_sysconfdir}/Makefile <<_EOT_
SHELL = /bin/sh

MAKEMAP = ${SB_INSTALL_PREFIX}/sbin/makemap
SENDMAIL = ${SB_INSTALL_PREFIX}/sbin/sendmail
M4 = ${M4}/bin/gm4

CF_DIR = ${_sysconfdir}

all: sendmail.cf submit.cf aliases.db access.db

sendmail.cf: sendmail.mc
	@rm -f \$(CF_DIR)/sendmail.cf
	@echo "Updating sendmail.cf ..."
	@\$(M4) \$(CF_DIR)/sendmail.mc >\$(CF_DIR)/sendmail.cf
	@chown root:smmsp \$(CF_DIR)/sendmail.cf
	@chmod 444 \$(CF_DIR)/sendmail.cf

submit.cf: submit.mc
	@rm -f \$(CF_DIR)/submit.cf
	@echo "Updating submit.cf ..."
	@\$(M4) \$(CF_DIR)/submit.mc >\$(CF_DIR)/submit.cf
	@chown root:smmsp \$(CF_DIR)/submit.cf
	@chmod 444 \$(CF_DIR)/submit.cf

aliases.db: aliases sendmail.cf
	@rm -f \$(CF_DIR)/aliases.db
	@echo "Updating aliases.db ..."
	@\$(SENDMAIL) -bi
	@chown root:smmsp \$(CF_DIR)/aliases.db
	@chmod 644 \$(CF_DIR)/aliases.db

access.db: access
	@rm -f \$(CF_DIR)/access.db
	@echo "Updating access.db ..."
	@\$(MAKEMAP) hash \$(CF_DIR)/access <\$(CF_DIR)/access
	@chown root:smmsp \$(CF_DIR)/access.db
	@chmod 644 \$(CF_DIR)/access.db
_EOT_

cat >${_sysconfdir}/aliases <<_EOT_
postmaster:	root
MAILER-DAEMON:	root
_EOT_

cat >${_sysconfdir}/service.switch <<_EOT_
passwd		files
hosts		files dns
aliases		files
_EOT_

cat >${_sysconfdir}/sendmail.mc <<_EOT_
include(\`${SB_INSTALL_PREFIX}/share/cf/m4/cf.m4')dnl
dnl
OSTYPE(\`${OSTYPE}')dnl
dnl
EXPOSED_USER(\`root')
dnl
define(\`ALIAS_FILE', \`${_sysconfdir}/aliases')
define(\`HELP_FILE', \`${_sysconfdir}/helpfile')
define(\`QUEUE_DIR', \`${_localstatedir}/mqueue')
define(\`STATUS_FILE', \`${_localstatedir}/statistics')
_EOT_

if [ "${SB_VAR_PRNGD+set}" = "set" ]; then
  cat >>${_sysconfdir}/sendmail.mc <<_EOT_
define(\`confRAND_FILE',
  \`egd:/var${SB_VAR_PRNGD}/pool')
_EOT_
fi

cat >>${_sysconfdir}/sendmail.mc <<_EOT_
define(\`confCR_FILE',
  \`-o ${_sysconfdir}/relay-domains')
define(\`confPID_FILE',
  \`${_localstatedir}/run/mta/sendmail.pid')
define(\`confCONTROL_SOCKET_NAME',
  \`${_localstatedir}/run/mta/smcontrol')
define(\`confSERVICE_SWITCH_FILE',
  \`${_sysconfdir}/service.switch')
define(\`confDONT_BLAME_SENDMAIL',
  \`GroupReadableSASLDBFile,GroupWritableSASLDBFile,GroupReadableKeyFile')
define(\`confCACERT_PATH',
  \`${_sysconfdir}/certs')
define(\`confCACERT',
  \`${_sysconfdir}/ssl/server.crt')
define(\`confSERVER_CERT',
  \`${_sysconfdir}/ssl/server.crt')
define(\`confSERVER_KEY',
  \`${_sysconfdir}/ssl/server.key')
define(\`confCLIENT_CERT',
  \`${_sysconfdir}/ssl/client.cert')
define(\`confCLIENT_KEY',
  \`${_sysconfdir}/ssl/client.key')
dnl
MAILER(local)dnl
MAILER(smtp)dnl
_EOT_

cat >${_sysconfdir}/submit.mc <<_EOT_
include(\`${SB_INSTALL_PREFIX}/share/cf/m4/cf.m4')dnl
dnl
OSTYPE(\`${OSTYPE}')dnl
dnl
define(\`ALIAS_FILE',
  \`${_sysconfdir}/aliases')
define(\`HELP_FILE',
  \`${_sysconfdir}/helpfile')
define(\`MSP_QUEUE_DIR',
  \`${_localstatedir}/clientmqueue')
_EOT_

if [ "${SB_VAR_PRNGD+set}" = "set" ]; then
  cat >>${_sysconfdir}/submit.mc <<_EOT_
define(\`confRAND_FILE',
  \`egd:/var${SB_VAR_PRNGD}/pool')
_EOT_
fi

cat >>${_sysconfdir}/submit.mc <<_EOT_
define(\`confPID_FILE',
  \`${_localstatedir}/run/msp/sendmail.pid')
define(\`confCONTROL_SOCKET_NAME',
  \`${_localstatedir}/run/msp/smcontrol')
define(\`confSERVICE_SWITCH_FILE',
  \`${_sysconfdir}/service.switch')
define(\`confAUTH_MECHANISMS',
  \`DIGEST-MD5 CRAM-MD5 PLAIN LOGIN')
define(\`confDONT_BLAME_SENDMAIL',
  \`GroupReadableSASLDBFile,GroupWritableSASLDBFile,GroupReadableKeyFile')
define(\`confCACERT_PATH',
  \`${_sysconfdir}/certs')
define(\`confCACERT',
  \`${_sysconfdir}/ssl/server.crt')
define(\`confSERVER_CERT',
  \`${_sysconfdir}/ssl/server.crt')
define(\`confSERVER_KEY',
  \`${_sysconfdir}/ssl/server.key')
define(\`confCLIENT_CERT',
  \`${_sysconfdir}/ssl/client.cert')
define(\`confCLIENT_KEY',
  \`${_sysconfdir}/ssl/client.key')
dnl
MASQUERADE_AS(\`DOMAINNAME')
FEATURE(\`masquerade_envelope')
FEATURE(\`allmasquerade')
dnl
FEATURE(\`msp', \`[127.0.0.1]', \`MSA')
dnl
dnl FEATURE(\`authinfo',
dnl  \`DATABASE_MAP_TYPE ${_sysconfdir}/msp-authinfo')
_EOT_

# fix time stamps
${SB_PATH_GTOUCH} -d '1 minute ago' ${_sysconfdir}/sendmail.cf \
${_sysconfdir}/submit.cf
]]>
    </install>

    <uninstall>
<![CDATA[
rm -rf ${SB_INSTALL_PREFIX} ${_sysconfdir} ${_localstatedir}
]]>
    </uninstall>

    <notes>
      <change from="8.12.10" to="8.12.11">
        <item><para>Use QueueFileMode when opening qf files. This
error was a regression in 8.12.10.</para></item>
        <item><para>Properly count the number of queue runners in a
work group and make sure the total limit of MaxQueueChildren is not
exceeded</para></item>
        <item><para>Take care of systems that can generate time values
where the seconds can exceed the usual range of 0 to 59</para></item>
        <item><para>Avoid regeneration of identical queue identifiers
by processes whose process id is the same as that of the initial
sendmail process that was used to start the daemon</para></item>
        <item><para>When a milter invokes smfi_delrcpt() compare the
supplied recipient address also against the printable addresses of the
current list to deal with rewritten addresses</para></item>
        <item><para>BadRcptThrottle now also works for addresses which
return the error mailer, e.g., virtusertable entries with the right
hand side error:</para></item>
        <item><para>Fix printing of 8 bit characters as octals in log
messages</para></item>
        <item><para>Undo change of algorithm for MIME 7-bit base64
encoding to 8-bit text that has been introduced in 8.12.3. There are
some examples where the new code fails, but the old code works. To get
the 8.12.3-8.12.10 version, compile sendmail with -DMIME7TO8_OLD=0. If
you have an example of improper 7 to 8 bit conversion please send it
to us.</para></item>
        <item><para>Return normal error code for unknown SMTP commands
instead of the one specified by check_relay or a milter for a
connection</para></item>
        <item><para>Some ident responses contain data after the
terminating CRLF which causes sendmail to log "POSSIBLE
ATTACK...newline in string". To avoid this everything after LF is
ignored.</para></item>
        <item><para>If the operating system supports O_EXLOCK and
HASFLOCK is set then a possible race condition for creating qf files
can be avoided. Note: the race condition does not exist within
sendmail, but between sendmail and an external application that
accesses qf files.</para></item>
        <item><para>Log the proper options name for TLS related mising
files for the CACertPath, CACertFile, and DHParameters
options.</para></item>
        <item><para>Do not split an envelope if it will be discarded,
otherwise df files could be left behind</para></item>
        <item><para>The use of the environment variables HOME and
HOSTALIASES has been deprecated and will be removed in version 8.13.
This only effects configuration which preserve those variable via the
'E' command in the cf file as sendmail clears out its entire
environment.</para></item>
        <item><para>Portability: Add support for Darwin 7.0/Mac OS X
10.3 (a.k.a. Panther). Solaris 10 has unsetenv().</para></item>
        <item><para>LIBMILTER: Add extra checks in case a broken MTA
sends bogus data to libmilter</para></item>
        <item><para>SMRSH: Properly assemble commands that contain
'&amp;&amp;' or '||'</para></item>
      </change>

      <note type="build">
        <para>Sendmail has been configured with SSL/TLS, SASL, and
LDAP support. Configuration will be necessary for each to work. The
default directory for the SSL/CERT files is
<command>/etc${SB_INSTALL_PREFIX}/ssl</command> and
<command>/etc${SB_INSTALL_PREFIX}/certs</command>. An alternate path can be set
with the following variables in <command>sendmail.mc</command> and
<command>submit.mc</command>: <command>confCACERT_PATH</command>,
<command>confCACERT</command>, <command>confSERVER_CERT</command>,
<command>confSERVER_KEY</command>, <command>confCLIENT_CERT</command>,
<command>confCLIENT_KEY</command>. The
<command>${SB_INSTALL_PREFIX}/share/cf/README</command> file contains
additional instructions are configuring these options.</para>
      </note>

      <note type="installation">
        <para>Because sendmail is installed by default from the OS
vendor, the
startup script must be disabled in order for this version of sendmail
to work. Nothing is done in the postinstall script to disable the
vendor sendmail startup script. Due to possible upgrades to the
OS-provided sendmail installation by the vendor, patches applied after
installing this version of sendmail could re-enable the
vendor-installed sendmail. Care will need to be taken when patching
systems. By default, the sendmail startup script will not start
sendmail when <command>sendmail.cf</command> is empty.</para>

        <para>A special group is required for sendmail to operate in
submission mode, "<command>smmsp</command>". Unlike previous versions
of sendmail, a separate configuration file is read depending on the
mode in which sendmail is run (daemon mode or submission mode). This
group must exist prior to installation of the sendmail package.
Various files in <command>/etc${SB_INSTALL_PREFIX}</command>,
<command>/var${SB_INSTALL_PREFIX}</command>, and
<command>${SB_INSTALL_PREFIX}/sbin</command> are owned by this group.
Sendmail is very pedantic about permissions on these files. Change
with care. If problems arise when sendmail starts, the log level can
be increased with the <command>confLOG_LEVEL</command> variable in
<command>/etc${SB_INSTALL_PREFIX}/sendmail.mc</command>. The default value is
<command>9</command> and <command>14</command> should provide enough
verbosity to diagnose a problem.</para>
      </note>

      <note type="configuration">
        <para>Configuration files for sendmail are usually found in
the <command>/etc/mail</command> directory. To remain consistent with
the location of configuration files in the TWW hierarchy,
<command>/etc${SB_INSTALL_PREFIX}</command> contains all configuration files. The
<command>/var${SB_INSTALL_PREFIX}</command> directory contains the queue directory
of old messages and the PID of the sendmail process.</para>

        <para>A "<command>Makefile</command>" has been created in
<command>/etc${SB_INSTALL_PREFIX}</command> to aid in building the sendmail
configuration files. The configuration files built include:
<command>sendmail.cf</command>, <command>submit.cf</command>,
<command>aliases.db</command>, <command>access.db</command>. The
<command>sendmail.cf</command> file is built from
<command>sendmail.mc</command>, the <command>submit.cf</command> file
from <command>submit.mc</command>, the <command>aliases.db</command>
file from <command>aliases</command>, and the
<command>access.db</command> file from
<command>access</command>.</para>

        <para>Simple <command>sendmail.mc</command> and
<command>submit.mc</command> files are installed and should be
modified with the aide of
<command>${SB_INSTALL_PREFIX}/share/cf/README</command>. The
"<command>DOMAINNAME</command>" variable in the following line of
<command>submit.mc</command>:</para>
        <screen>
MASQUERADE_AS(`DOMAINNAME')
        </screen>

        <para>should be changed to match your DNS domain name. The
<command>masquerade_envelope</command> and
<command>allmasquerade</command> features are enabled, by default, to
masquerade all mail from the DNS domain name specified. Likewise, a
minimal <command>aliases</command> file is available.</para>

        <para>The default path to the PID file when "sendmail" is
running in daemon mode (MTA) is
<command>/var${SB_INSTALL_PREFIX}/run/mta/sendmail.pid</command>. When sendmail is
running in submission mode (MSP), the PID file is
<command>/var${SB_INSTALL_PREFIX}/run/msp/sendmail.pid</command>. This can be
changed by modifing the "<command>confPID_FILE</command>" variable
in the <command>sendmail.mc</command> and <command>submit.mc</command>
files, respectively. The startup script must also be modified so
sendmail can be properly shut down.</para>

        <para>The default locking method is
<command>fcntl(2)</command>.</para>
      </note>
    </notes>
  </program>
</programs>

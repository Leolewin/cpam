<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="htmldoc" version="1.8.27" revision="7">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <install-name>${SB_PROG_NAME}18</install-name>

    <sources>
      <source checksum="35589e7b8fe9c54e11be87cd5aec4dcc"
        checksum-type="md5" size="3960271"
        path="src/htmldoc-1.8.27-source.tar.bz2"/>
      <patch checksum="4c47eda3ae1a956c7ffab5f244bd2b0b"
        checksum-type="md5" size="32103"
        path="src/htmldoc-1.8.27.tww.patch"/>
      <patch checksum="d73e73eeeb5066c591ce8512fdfcb012"
        checksum-type="md5" size="141166"
        path="src/htmldoc-1.8.27.auto.patch"/>
    </sources>

    <dependencies>
      <depend program="fltk" var="LIBFLTK"
        install-name="libfltk11">v&gt;=1.1.9</depend>
      <depend program="expat" var="LIBEXPAT"
        install-name="libexpat20">v&gt;=2.0.1</depend>
      <depend program="freetype" var="LIBTTF"
        install-name="libttf24">v&gt;=2.4.6</depend>
      <depend program="jpeg" var="JPEG"
        install-name="libjpeg8">v&gt;=8b</depend>
      <depend program="libpng" var="LIBPNG"
        install-name="libpng14">v&gt;=1.4.4</depend>
      <depend program="openssl" var="LIBOPENSSL"
        install-name="libopenssl10">v&gt;=1.0.0e</depend>
      <depend program="xpm" var="XPM">v&gt;=3.4k</depend>
      <depend program="zlib" var="ZLIB"
        install-name="libz12">v&gt;=1.2.5</depend>
    </dependencies>

    <script-header>
<![CDATA[
_datadir="${SB_INSTALL_PREFIX}/share"
_docdir="${SB_INSTALL_PREFIX}/doc"
]]>
    </script-header>

    <configure>
<![CDATA[
case "${SYSTYPE}" in
*-aix*)
  CC=xlc CFLAGS="-O2 -qro -qroconst -qmaxmem=-1 -qarch=ppc"
  CXX=xlC CXXFLAGS="-O2 -qro -qroconst -qmaxmem=-1 -qarch=ppc"
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib" ;;
ia64*-hpux*)
  CC=cc CFLAGS="-z +O2 +Onofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Onofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+b," ;;
*-hpux11.[01]*)
  CC=cc CFLAGS="-z +O2 +Onofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch +Onolimit"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Onofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b," ;;
*-hpux*)
  CC=cc CFLAGS="-z +O2 +Onofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Onofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1009,1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CXX=CC CXXFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-ptused -FE:template_in_elf_section -O2 -OPT:Olimit=0"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CXXFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CC_LD_RT="-Wl,-rpath," ;;
*-linux*)
  CC_LD_RT="-Wl,-rpath," ;;
*-osf*)
  CC=cc CFLAGS="-msym -arch ev5 -O2 -readonly_strings"
  CXX=cxx CXXFLAGS="-O2 -arch ev5 -model ansi -msym -readonly_strings"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=pentium4"
  CXX=CC CXXFLAGS="-xO2 -xtarget=pentium4"
  CC_LD_RT="-R" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-xarch=v8plusa"
  CXX=CC CXXFLAGS="-xO2 -xtarget=ultra2 -xarch=v8plusa"
  CC_LD_RT="-R" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-m32 -xarch=sparcvis"
  CXX=CC CXXFLAGS="-xO2 -xtarget=ultra2 -m32 -xarch=sparcvis"
  CC_LD_RT="-R" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CFLAGS="${CFLAGS:--O2}" \
CXX="${CXX:-g++}" CXXFLAGS="${CXXFLAGS:--O2}" \
CPPFLAGS="${SB_VAR_JPEG+-I${SB_VAR_JPEG_INC}} \
${SB_VAR_LIBPNG+-I${SB_VAR_LIBPNG_INC}} \
${SB_VAR_ZLIB+-I${SB_VAR_ZLIB_INC}} \
${SB_VAR_XPM+-I${SB_VAR_XPM_INC}} \
${SB_VAR_LIBOPENSSL+-I${SB_VAR_LIBOPENSSL_INC}} \
${SB_VAR_LIBFLTK+-I${SB_VAR_LIBFLTK_INC}}" \
LDFLAGS="${SB_VAR_GCC_RT+-L${SB_VAR_GCC_RT_LIB}} \
${SB_VAR_JPEG+-L${SB_VAR_JPEG_LIB}} \
${SB_VAR_LIBPNG+-L${SB_VAR_LIBPNG_LIB}} \
${SB_VAR_ZLIB+-L${SB_VAR_ZLIB_LIB}} \
${SB_VAR_XPM+-L${SB_VAR_XPM_LIB}} \
${SB_VAR_LIBOPENSSL+-L${SB_VAR_LIBOPENSSL_LIB}} \
-L${_libfltk_lib:-${SB_VAR_LIBFLTK_LIB}} \
${SB_VAR_JPEG+${CC_LD_RT}${SB_VAR_JPEG_LIB}} \
${SB_VAR_LIBPNG+${CC_LD_RT}${SB_VAR_LIBPNG_LIB}} \
${SB_VAR_LIBTTF+${CC_LD_RT}${SB_VAR_LIBTTF_LIB}} \
${SB_VAR_ZLIB+${CC_LD_RT}${SB_VAR_ZLIB_LIB}} \
${SB_VAR_XPM+${CC_LD_RT}${SB_VAR_XPM_LIB}} \
${SB_VAR_LIBOPENSSL+${CC_LD_RT}${SB_VAR_LIBOPENSSL_LIB}} \
${CC_LD_RT}${_libfltk_lib:-${SB_VAR_LIBFLTK_LIB}} \
${SB_VAR_LIBEXPAT+${CC_LD_RT}${SB_VAR_LIBEXPAT_LIB}} \
${SB_VAR_GCC_RT+${CC_LD_RT}${SB_VAR_GCC_RT_LIB}} \
${LDFLAGS+${LDFLAGS}}" \
${SB_VAR_LIBOPENSSL+--with-openssl-includes=${SB_VAR_LIBOPENSSL_INC}} \
${SB_VAR_LIBOPENSSL+--with-openssl-libs=${SB_VAR_LIBOPENSSL_LIB}} \
--with-gui --enable-ssl --enable-openssl \
--with-html-data=${_datadir} --with-docdir=${_docdir} \
--prefix=${SB_INSTALL_PREFIX}

# for in-directory run of htmldoc
[ ! -f data/fonts ] && ln -s ../fonts data/fonts
]]>
    </configure>

    <notes>
      <change from="1.8.26" to="1.8.27">
        <item><para>Fixed a crash bug that appeared when more than 10
blank pages were present in a document (PR #6223)</para></item>
        <item><para>Color changes were not reflected in PRE text (STR
#129)</para></item>
        <item><para>Remote URLs did not always work on older operating
systems (PR #6179)</para></item>
        <item><para>Image filenames using % escapes were not decoded
properly</para></item>
        <item><para>Rows using BGCOLOR that spanned across multiple
pages did not render properly (PR #6149)</para></item>
        <item><para>Rows no longer start on a new page due to a cell
with both HEIGHT and ROWSPAN specified (PR #6086)</para></item>
        <item><para>CMYK JPEG images caused HTMLDOC to crash (PR
#6106)</para></item>
        <item><para>Table cell width calculations didn't always
account for the proper minimum width (STR #121)</para></item>
        <item><para>Images were not copied when generating indexed
HTML output to a directory (STR #117)</para></item>
        <item><para>Changing the bottom margin resulted in text that
was formatted below the bottom margin</para></item>
        <item><para>The Monospace-Oblique font was not embedded
properly in PDF files</para></item>
      </change>

      <change from="1.8.25" to="1.8.26">
        <item><para>Outline and keyword strings in PDF files are now
stored as Unicode</para></item>
        <item><para>The Flate compression code could get in an
infinite loop if it ran out of memory</para></item>
        <item><para>Book files saved from the GUI did not handle
filenames with spaces</para></item>
        <item><para>Fixed and re-enabled the ASCII85Device filter
support in PostScript Level 2/3 output</para></item>
        <item><para>Character entities in the first word of a file
were not rendered properly</para></item>
        <item><para>Fixed-size table columns were incorrectly
resized when a table width was also specified and there was extra
space to distribute</para></item>
        <item><para>Text could "walk" up or down when in-line images
were used</para></item>
        <item><para>Row backgrounds incorrectly replaced cell
backgrounds when the first cell in a row used ROWSPAN</para></item>
        <item><para>HTMLDOC did not correctly parse FONT FACE
attributes</para></item>
        <item><para>Images in Level 2/3 PostScript output did not
work on some printers</para></item>
        <item><para>The GUI did not use the first page
header</para></item>
      </change>

      <change from="1.8.24" to="1.8.25">
        <items name="New Features">
          <item><para>Added "--overflow" and "--no-overflow"
command-line options to show or hide the content-too-large errors; the
default is "--no-overflow".</para></item>
          <item><para>Added "--header1" command-line option and
"HEADER1" page comments to set the page header for the first page of
each chapter.</para></item>
          <item><para>Added "timing" and "remotebytes" debug data
generation.</para></item>
          <item><para>Added DejaVu font collection to better support
Cyrillic and Greek text; the new fonts are available under the generic
names "monospace", "sans", and "serif".</para></item>
          <item><para>Added "--referer" command-line option and
corresponding CGI-mode support to pass Referer: information in HTTP
requests</para></item>
        </items>

        <items name="Changes">
          <item><para>On Windows, HTMLDOC now logs CGI mode errors to
a file called "htmldoc.log" in the Windows temporary
directory.</para></item>
          <item><para>HTMLDOC no longer uses Base-85 encoding for
image data when producing Level 2 and 3 PostScript output. It appears
that many printers and PostScript interpreters cannot properly decode
this data when the original image data is not a multiple of 8
bits.</para></item>
          <item><para>HTMLDOC now renders STRONG elements in boldface
instead of bold-italic to match the W3C recommendations.</para></item>
          <item><para>HTMLDOC now automatically inserts a TR element
before a TD or TH element as needed to improve web site compatibility;
this also triggers a HTML error in --strict mode.</para></item>
        </items>

        <items name="Bug Fixes">
          <item><para>"$HFIMAGEn" didn't work in a header/footer
string.</para></item>
          <item><para>HTMLDOC could crash when rendering a
table.</para></item>
          <item><para>Book files were not used in CGI
mode</para></item>
          <item><para>Cookies were not sent in HTTP
requests</para></item>
          <item><para>Table cells were not aligned properly when the
ROWSPAN attribute was set to 1</para></item>
          <item><para>HTMLDOC crashed when rendering unresolved
hyperlinks in aligned images</para></item>
          <item><para>Documented the HTMLDOC_NOCGI environment
variable</para></item>
          <item><para>HTMLDOC sometimes crashed when rendering tables
with background colors</para></item>
          <item><para>HTMLDOC would crash when writing encrypted
strings longer than 1024 bytes</para></item>
          <item><para>HTMLDOC didn't set the data directory when
running in CGI mode on Windows.</para></item>
          <item><para>HTMLDOC could crash when loading the Symbol.afm
file</para></item>
          <item><para>HTMLDOC did not always honor HEIGHT attributes
in table rows.</para></item>
          <item><para>Tables with a mix of colspan and rowspan
sometimes caused cells to be moved vertically outside the
cell.</para></item>
        </items>
      </change>
    </notes>

    <changelog>
      <change date="2012 February 1" revision="7"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Update freetype dependency from 2.3.7 to
2.4.6</para></item>
        <item><para>Update jpeg dependency from 6b to 8b</para></item>
        <item><para>Update libpng dependency from 1.2.29 to
1.4.4</para></item>
        <item><para>Update openssl dependency from 0.9.8h to
1.0.0e</para></item>
        <item><para>Update zlib dependency from 1.2.3 to
1.2.5</para></item>
        <item><para>Add support for AIX 7.1</para></item>
        <item><para>Remove support for HP-UX 10.20, Solaris 6 and 7,
RHEL 3, and SLES 10</para></item>
      </change>

      <change date="2010 November 9" revision="6"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Add support for RHEL 6</para></item>
      </change>

      <change date="2009 June 22" revision="5"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Update fltk dependency from 1.1.7 to
1.1.9</para></item>
        <item><para>Update freetype dependency from 2.3.5 to
2.3.7</para></item>
        <item><para>Update libpng dependency from 1.2.18 to
1.2.29</para></item>
        <item><para>Update openssl dependency from 0.9.8e to
0.9.8h</para></item>
      </change>

      <change date="2007 September 28" revision="4"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Update expat dependency from 1.95.8 to
2.0.1</para></item>
        <item><para>Update libpng dependency from 1.2.4 to
1.2.18</para></item>
        <item><para>Update zlib dependency from 1.1.4 to
1.2.3</para></item>
      </change>

      <change date="2007 Aug 1" revision="3"
      author="Axel Thimm" email="thimm@thewrittenword.com">
        <item><para>Rebuild against freetype-2.3.5</para></item>
      </change>

      <change date="2007 May 2" revision="2"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Add support for RHEL 5</para></item>
      </change>
    </changelog>
  </program>
</programs>

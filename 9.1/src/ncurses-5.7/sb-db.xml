<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="ncurses" version="5.7" revision="1">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <sources>
      <source checksum="cce05daf61a64501ef6cd8da1f727ec6"
        checksum-type="md5" size="2445052"
        path="src/ncurses-5.7.tar.gz"/>
      <patch checksum="cf70c70bc240862063b3ca12da45334b"
        checksum-type="md5" size="5087675"
        path="src/ncurses-5.7.ncurses-5.7-20100424-cumulative.patch"/>
      <patch checksum="58d5083695e76077e895182695b9186c"
        checksum-type="md5" size="192014"
        path="src/ncurses-5.7.ncurses-5.7-20100501.patch"/>
      <patch checksum="e44fba07c16457ef686b3d1e26f6461e"
        checksum-type="md5" size="560104"
        path="src/ncurses-5.7.ncurses-5.7-20100515.patch"/>
      <patch checksum="ecf6ffbdd3ab8f095665e283c2b6822f"
        checksum-type="md5" size="331317"
        path="src/ncurses-5.7.ncurses-5.7-20100522.patch"/>
      <patch checksum="b9c2bf57b437a464cd35b3870704587a"
        checksum-type="md5" size="533635"
        path="src/ncurses-5.7.ncurses-5.7-20100529.patch"/>
      <patch checksum="8a3b42b8feeefbf6d890fe03d3e29b78"
        checksum-type="md5" size="301463"
        path="src/ncurses-5.7.ncurses-5.7-20100605.patch"/>
      <patch checksum="f9452d2a502bf1890b17ddc8c39cfe52"
        checksum-type="md5" size="239767"
        path="src/ncurses-5.7.ncurses-5.7-20100612.patch"/>
      <patch checksum="5aeb8749f197264a682f4f5398316d34"
        checksum-type="md5" size="635878"
        path="src/ncurses-5.7.ncurses-5.7-20100619.patch"/>
      <patch checksum="9d0c6eb479f266d0ffedbab80d7baf64"
        checksum-type="md5" size="62097"
        path="src/ncurses-5.7.ncurses-5.7-20100626.patch"/>
      <patch checksum="935a906394b54330f00f4eb7d2ddee5c"
        checksum-type="md5" size="34145"
        path="src/ncurses-5.7.ncurses-5.7-20100703.patch"/>
      <patch checksum="71b05a7b3fc8139ee8c3977a84aba869"
        checksum-type="md5" size="19644"
        path="src/ncurses-5.7.ncurses-5.7-20100717.patch"/>
      <patch checksum="6b090b2da342642d9463d9ecd53a1de2"
        checksum-type="md5" size="544270"
        path="src/ncurses-5.7.ncurses-5.7-20100724.patch"/>
      <patch checksum="e2903d9d789aeaafee2d60d0e63fb5ee"
        checksum-type="md5" size="450738"
        path="src/ncurses-5.7.ncurses-5.7-20100731.patch"/>
      <patch checksum="55baab220dc477f70d3fb1e1bccdbe79"
        checksum-type="md5" size="163666"
        path="src/ncurses-5.7.ncurses-5.7-20100807.patch"/>
      <patch checksum="b9346fbf927830213098081d6abea291"
        checksum-type="md5" size="50204"
        path="src/ncurses-5.7.ncurses-5.7-20100814.patch"/>
      <patch checksum="3fe20075bab2ac9b9c907cea3a49c6ba"
        checksum-type="md5" size="30548"
        path="src/ncurses-5.7.ncurses-5.7-20100828.patch"/>
      <patch checksum="ea54c3c58b3dd98fa5f5095aaca8299f"
        checksum-type="md5" size="633938"
        path="src/ncurses-5.7.ncurses-5.7-20100904.patch"/>
      <patch checksum="fd78a54a18c8c8f7e6b11842f3a1bf06"
        checksum-type="md5" size="216560"
        path="src/ncurses-5.7.ncurses-5.7-20100911.patch"/>
      <patch checksum="daa4bf7923473c47c28de4c00b3486c7"
        checksum-type="md5" size="249312"
        path="src/ncurses-5.7.ncurses-5.7-20100918.patch"/>
      <patch checksum="91998907719a6a1c2e5bfe706a02c78f"
        checksum-type="md5" size="28981"
        path="src/ncurses-5.7.ncurses-5.7-20100925.patch"/>
      <patch checksum="a8e1c4121c2c2973121790e6a6d8cf52"
        checksum-type="md5" size="130539"
        path="src/ncurses-5.7.ncurses-5.7-20101002.patch"/>
      <patch checksum="7f10d98d25ff52823dd81837420281eb"
        checksum-type="md5" size="5177"
        path="src/ncurses-5.7.ncurses-5.7-20101009.patch"/>
      <patch checksum="a6df8220efc07a82b34086dd76fe6c27"
        checksum-type="md5" size="774175"
        path="src/ncurses-5.7.ncurses-5.7-20101023.patch"/>
      <patch checksum="6fdffc976fdf943d2f5e1a75c7b75c17"
        checksum-type="md5" size="289309"
        path="src/ncurses-5.7.ncurses-5.7-20101106.patch"/>
      <patch checksum="e1d94138e42784af4e6ac2490b4e7de8"
        checksum-type="md5" size="209634"
        path="src/ncurses-5.7.ncurses-5.7-20101113.patch"/>
      <patch checksum="7da6425beb3b64c9f7f60624e17b6111"
        checksum-type="md5" size="315880"
        path="src/ncurses-5.7.ncurses-5.7-20101120.patch"/>
      <patch checksum="0b5dc2cf7f8955dd473d29c3dc752283"
        checksum-type="md5" size="247937"
        path="src/ncurses-5.7.tww.patch"/>
      <patch checksum="c9055ce51c4bdc19479a43df26432592"
        checksum-type="md5" size="1002219"
        path="src/ncurses-5.7.auto.patch"/>
    </sources>

    <module name="default">
      <install-name>${SB_PROG_NAME}57</install-name>

      <validate>
        <depend program="ncurses" module="64bit"
          systype="*-aix*|*-hpux*|*-irix*|*-solaris*">v==5.7</depend>
        <depend program="ncurses"
          module="Curses-5.12.2">v==5.7</depend>
        <depend program="ncurses" module="widec"
          systype="*-aix*|*-hpux11.11|*-hpux11.[23]*|*-irix*|*-linux*|*-osf*|*-solaris*">v==5.7</depend>
        <depend program="ncurses" module="widec-64bit"
          systype="*-aix*|*-hpux11.11*|*-hpux11.[23]*|*-irix*|*-solaris*">v==5.7</depend>
      </validate>

      <script-header>
<![CDATA[
_docdir="${SB_INSTALL_PREFIX}/doc"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC=xlc CFLAGS="-O2 -qro -qroconst -qmaxmem=-1 -qarch=ppc"
  CXX=xlC CXXFLAGS="-O2 -qobjmodel=ibm -qro -qroconst \
-qnotempinc -qnotemplateregistry -qmaxmem=-1 -qarch=ppc"
  LDFLAGS="-Wl,-brtl"

  ARGS="--with-caps=aix4 --with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-hpux11.[01]*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Ofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-hpux11*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-hpux*)
  CC=cc CFLAGS="-Ae -z +O2 +Ofltacc +ESlit +DAportable \
+Oentrysched +Odataprefetch"

  ARGS="--without-cxx-binding --with-shlib-version=abi \
--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-irix*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1009,1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CXX=CC CXXFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-ptused -FE:template_in_elf_section -O2 -OPT:Olimit=0"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CXXFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"

  ARGS="--with-terminfo-dirs=/usr/share/terminfo \
--with-default-terminfo-dir=/usr/share/terminfo" ;;
*-linux*)
  ARGS="--with-terminfo-dirs=/usr/share/terminfo \
--with-default-terminfo-dir=/usr/share/terminfo" ;;
*-osf*)
  CC=cc CFLAGS="-O2 -arch ev5 -msym -readonly_strings"
  CXX=cxx CXXFLAGS="-O2 -arch ev5 -msym -readonly_strings \
-D__USE_STD_IOSTREAM"

  ARGS="--with-caps=osf1r5 --with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=pentium4"
  CXX=CC CXXFLAGS="-xO2 -xtarget=pentium4"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-xarch=v8plusa"
  CXX=CC CXXFLAGS="-xO2 -xtarget=ultra2 -xarch=v8plusa"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-m32 -xarch=sparcvis"
  CXX=CC CXXFLAGS="-xO2 -xtarget=ultra2 -m32 -xarch=sparcvis"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CFLAGS="${CFLAGS:--O2}" \
CXX="${CXX:-g++}" CXXFLAGS="${CXXFLAGS:--O2}" \
LDFLAGS="${LDFLAGS+${LDFLAGS}}" --with-libtool --with-shared \
--with-normal --with-debug=no --disable-overwrite \
--enable-symlinks --enable-echo --with-manpage-format=normal \
--without-ada --program-prefix=gnu --enable-rpath \
${ARGS+${ARGS}} --prefix=${SB_INSTALL_PREFIX}
]]>
      </configure>

      <install>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac

# no 'make install' because we don't wish to build the terminfo data
gmake install.libs
gmake install.progs
gmake install.includes
gmake install.man

# add runtime path to ncurses5-config
${SB_PATH_SED} -i -e "\
s!-L\(\${exec_prefix}/lib\)!-L\1 ${CC_LD_RT}\1!" \
${SB_INSTALL_PREFIX}/bin/ncurses5-config

# remove build prefix from dependency_libs
${SB_PATH_SED} -i -e "\
s! -L${SB_BUILD_PREFIX}[^ '][^ ']*!!g;" \
${SB_INSTALL_PREFIX}/lib/lib*.la

# install documentation
${SB_PATH_INSTALL} -m 755 -o root -g 0 -d ${_docdir}
(cd doc
${SB_PATH_TAR} cf - * | (cd ${_docdir}; tar xf -))
${SB_PATH_CHOWN} -hR 0:0 ${_docdir}
${SB_PATH_FIND} ${_docdir} -type d -exec ${SB_PATH_CHMOD} 755 {} \;
${SB_PATH_FIND} ${_docdir} -type f -exec ${SB_PATH_CHMOD} 644 {} \;
]]>
      </install>
    </module>

    <module name="widec"
    systype="*-aix*|*-hpux11.11|*-hpux11.[23]*|*-irix*|*-linux*|*-osf*|*-solaris*">
      <install-name>${SB_PROG_NAME}57</install-name>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC=xlc CFLAGS="-O2 -qro -qroconst -qmaxmem=-1 -qarch=ppc"
  CXX=xlC CXXFLAGS="-O2 -qobjmodel=ibm -qro -qroconst \
-qnotempinc -qnotemplateregistry -qmaxmem=-1 -qarch=ppc"
  LDFLAGS="-Wl,-brtl"

  ARGS="--with-caps=aix4 --with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-hpux11.[01]*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Ofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-hpux10*)
  CC=cc CFLAGS="-Ae -z +O2 +Ofltacc +ESlit +DAportable \
+Oentrysched +Odataprefetch"

  ARGS="--without-cxx-binding --with-shlib-version=abi \
--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-hpux*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-irix*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1009,1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CXX=CC CXXFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-ptused -FE:template_in_elf_section -O2 -OPT:Olimit=0"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CXXFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"

  ARGS="--with-terminfo-dirs=/usr/share/terminfo \
--with-default-terminfo-dir=/usr/share/terminfo" ;;
*-linux*)
  ARGS="--with-terminfo-dirs=/usr/share/terminfo \
--with-default-terminfo-dir=/usr/share/terminfo" ;;
*-osf*)
  CC=cc CFLAGS="-O2 -arch ev5 -msym -readonly_strings"
  CXX=cxx CXXFLAGS="-O2 -arch ev5 -msym -readonly_strings \
-D__USE_STD_IOSTREAM"

  ARGS="--with-caps=osf1r5 --with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=pentium4"
  CXX=CC CXXFLAGS="-xO2 -xtarget=pentium4"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-xarch=v8plusa"
  CXX=CC CXXFLAGS="-xO2 -xtarget=ultra2 -xarch=v8plusa"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-m32 -xarch=sparcvis"
  CXX=CC CXXFLAGS="-xO2 -xtarget=ultra2 -m32 -xarch=sparcvis"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CFLAGS="${CFLAGS:--O2}" \
CXX="${CXX:-g++}" CXXFLAGS="${CXXFLAGS:--O2}" \
LDFLAGS="${LDFLAGS+${LDFLAGS}}" --with-libtool --with-shared \
--with-normal --with-debug=no --disable-overwrite \
--enable-symlinks --enable-echo --with-manpage-format=normal \
--without-ada --program-prefix=gnu --enable-rpath \
--enable-widec ${ARGS+${ARGS}} --prefix=${SB_INSTALL_PREFIX}
]]>
      </configure>

      <install>
<![CDATA[
# no 'make install' because we don't wish to build the terminfo data
gmake install.libs
gmake install.includes

# remove build prefix from dependency_libs
${SB_PATH_SED} -i -e "\
s! -L${SB_BUILD_PREFIX}[^ '][^ ']*!!g;" \
${SB_INSTALL_PREFIX}/lib/lib*.la
]]>
      </install>

      <uninstall>
<![CDATA[
rm -rf ${SB_INSTALL_PREFIX}/include/ncursesw

rm ${SB_INSTALL_PREFIX}/lib/*w.a
rm ${SB_INSTALL_PREFIX}/lib/*w.la
rm ${SB_INSTALL_PREFIX}/lib/*w.s[lo]*
]]>
      </uninstall>
    </module>

    <module name="64bit"
    systype="*-aix*|*-hpux*|*-irix*|*-solaris*">
      <install-name>${SB_PROG_NAME}57</install-name>

      <sources>
        <source checksum="cce05daf61a64501ef6cd8da1f727ec6"
          checksum-type="md5" size="2445052"
          path="src/ncurses-5.7.tar.gz"/>
        <patch checksum="cf70c70bc240862063b3ca12da45334b"
          checksum-type="md5" size="5087675"
          path="src/ncurses-5.7.ncurses-5.7-20100424-cumulative.patch"/>
        <patch checksum="58d5083695e76077e895182695b9186c"
          checksum-type="md5" size="192014"
          path="src/ncurses-5.7.ncurses-5.7-20100501.patch"/>
        <patch checksum="e44fba07c16457ef686b3d1e26f6461e"
          checksum-type="md5" size="560104"
          path="src/ncurses-5.7.ncurses-5.7-20100515.patch"/>
        <patch checksum="ecf6ffbdd3ab8f095665e283c2b6822f"
          checksum-type="md5" size="331317"
          path="src/ncurses-5.7.ncurses-5.7-20100522.patch"/>
        <patch checksum="b9c2bf57b437a464cd35b3870704587a"
          checksum-type="md5" size="533635"
          path="src/ncurses-5.7.ncurses-5.7-20100529.patch"/>
        <patch checksum="8a3b42b8feeefbf6d890fe03d3e29b78"
          checksum-type="md5" size="301463"
          path="src/ncurses-5.7.ncurses-5.7-20100605.patch"/>
        <patch checksum="f9452d2a502bf1890b17ddc8c39cfe52"
          checksum-type="md5" size="239767"
          path="src/ncurses-5.7.ncurses-5.7-20100612.patch"/>
        <patch checksum="5aeb8749f197264a682f4f5398316d34"
          checksum-type="md5" size="635878"
          path="src/ncurses-5.7.ncurses-5.7-20100619.patch"/>
        <patch checksum="9d0c6eb479f266d0ffedbab80d7baf64"
          checksum-type="md5" size="62097"
          path="src/ncurses-5.7.ncurses-5.7-20100626.patch"/>
        <patch checksum="935a906394b54330f00f4eb7d2ddee5c"
          checksum-type="md5" size="34145"
          path="src/ncurses-5.7.ncurses-5.7-20100703.patch"/>
        <patch checksum="71b05a7b3fc8139ee8c3977a84aba869"
          checksum-type="md5" size="19644"
          path="src/ncurses-5.7.ncurses-5.7-20100717.patch"/>
        <patch checksum="6b090b2da342642d9463d9ecd53a1de2"
          checksum-type="md5" size="544270"
          path="src/ncurses-5.7.ncurses-5.7-20100724.patch"/>
        <patch checksum="e2903d9d789aeaafee2d60d0e63fb5ee"
          checksum-type="md5" size="450738"
          path="src/ncurses-5.7.ncurses-5.7-20100731.patch"/>
        <patch checksum="55baab220dc477f70d3fb1e1bccdbe79"
          checksum-type="md5" size="163666"
          path="src/ncurses-5.7.ncurses-5.7-20100807.patch"/>
        <patch checksum="b9346fbf927830213098081d6abea291"
          checksum-type="md5" size="50204"
          path="src/ncurses-5.7.ncurses-5.7-20100814.patch"/>
        <patch checksum="3fe20075bab2ac9b9c907cea3a49c6ba"
          checksum-type="md5" size="30548"
          path="src/ncurses-5.7.ncurses-5.7-20100828.patch"/>
        <patch checksum="ea54c3c58b3dd98fa5f5095aaca8299f"
          checksum-type="md5" size="633938"
          path="src/ncurses-5.7.ncurses-5.7-20100904.patch"/>
        <patch checksum="fd78a54a18c8c8f7e6b11842f3a1bf06"
          checksum-type="md5" size="216560"
          path="src/ncurses-5.7.ncurses-5.7-20100911.patch"/>
        <patch checksum="daa4bf7923473c47c28de4c00b3486c7"
          checksum-type="md5" size="249312"
          path="src/ncurses-5.7.ncurses-5.7-20100918.patch"/>
        <patch checksum="91998907719a6a1c2e5bfe706a02c78f"
          checksum-type="md5" size="28981"
          path="src/ncurses-5.7.ncurses-5.7-20100925.patch"/>
        <patch checksum="a8e1c4121c2c2973121790e6a6d8cf52"
          checksum-type="md5" size="130539"
          path="src/ncurses-5.7.ncurses-5.7-20101002.patch"/>
        <patch checksum="7f10d98d25ff52823dd81837420281eb"
          checksum-type="md5" size="5177"
          path="src/ncurses-5.7.ncurses-5.7-20101009.patch"/>
        <patch checksum="a6df8220efc07a82b34086dd76fe6c27"
          checksum-type="md5" size="774175"
          path="src/ncurses-5.7.ncurses-5.7-20101023.patch"/>
        <patch checksum="6fdffc976fdf943d2f5e1a75c7b75c17"
          checksum-type="md5" size="289309"
          path="src/ncurses-5.7.ncurses-5.7-20101106.patch"/>
        <patch checksum="e1d94138e42784af4e6ac2490b4e7de8"
          checksum-type="md5" size="209634"
          path="src/ncurses-5.7.ncurses-5.7-20101113.patch"/>
        <patch checksum="7da6425beb3b64c9f7f60624e17b6111"
          checksum-type="md5" size="315880"
          path="src/ncurses-5.7.ncurses-5.7-20101120.patch"/>
        <patch checksum="0b5dc2cf7f8955dd473d29c3dc752283"
          checksum-type="md5" size="247937"
          path="src/ncurses-5.7.tww.patch"/>
        <patch checksum="c9055ce51c4bdc19479a43df26432592"
          checksum-type="md5" size="1002219"
          path="src/ncurses-5.7.auto.patch"/>
        <patch checksum="c9d18ac57a1f1f4cf29398f8f95af72c"
          checksum-type="md5" size="1619"
          path="src/ncurses-5.7.64bit.patch"/>
      </sources>

      <script-header>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  _bindir="${SB_INSTALL_PREFIX}/bin/ppc64"
  _includedir="${SB_INSTALL_PREFIX}/include/ppc64"
  _libdir="lib/ppc64" ;;
ia64*-hpux*)
  _bindir="${SB_INSTALL_PREFIX}/bin/hpux64"
  _includedir="${SB_INSTALL_PREFIX}/include/hpux64"
  _libdir="lib/hpux64" ;;
*-hpux*)
  _bindir="${SB_INSTALL_PREFIX}/bin/pa20_64"
  _includedir="${SB_INSTALL_PREFIX}/include/pa20_64"
  _libdir="lib/pa20_64" ;;
*-irix*)
  _bindir="${SB_INSTALL_PREFIX}/bin/mips4"
  _includedir="${SB_INSTALL_PREFIX}/include/mips4"
  _libdir="lib64" ;;
i?86*-solaris*)
  _bindir="${SB_INSTALL_PREFIX}/bin/amd64"
  _includedir="${SB_INSTALL_PREFIX}/include/amd64"
  _libdir="lib/amd64" ;;
*-solaris*)
  _bindir="${SB_INSTALL_PREFIX}/bin/sparcv9"
  _includedir="${SB_INSTALL_PREFIX}/include/sparcv9"
  _libdir="lib/sparcv9" ;;
esac

case "${SB_SYSTYPE}" in
*-aix*)
  export OBJECT_MODE=64 ;;
esac
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC=xlc CFLAGS="-O2 -q64 -qro -qroconst -qmaxmem=-1 -qarch=ppc64"
  CXX=xlC CXXFLAGS="-O2 -q64 -qobjmodel=ibm -qro -qroconst \
-qnotempinc -qnotemplateregistry -qmaxmem=-1 -qarch=ppc64"
  LDFLAGS="-Wl,-brtl"

  ARGS="--with-caps=aix4 --with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
ia64*-hpux*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +DD64 \
+Oentrysched +Odataprefetch"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Ofltacc +Olit=all +DD64 \
+Oentrysched +Odataprefetch"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-hpux*)
  CC=cc CFLAGS="+O2 -z +Ofltacc +Olit=all +DD64 \
+Oentrysched +Odataprefetch"
  CXX=aCC CXXFLAGS="+O2 -AA -z +Ofltacc +Olit=all +DD64 \
+Oentrysched +Odataprefetch"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo"

  case "${SB_SYSTYPE}" in
  *-hpux11.31)
    ARGS="${ARGS} --build=hppa64-hp-hpux11.31" ;;
  *-hpux11.23)
    ARGS="${ARGS} --build=hppa64-hp-hpux11.23" ;;
  *-hpux11.11)
    ARGS="${ARGS} --build=hppa64-hp-hpux11.11" ;;
  *-hpux11.00)
    ARGS="${ARGS} --build=hppa64-hp-hpux11.00" ;;
  esac ;;
*-irix*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1009,1429 -64 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CXX=CC CXXFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1429 -64 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-ptused -FE:template_in_elf_section -O2 -OPT:Olimit=0"
  LDFLAGS="-64 -mips4"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=opteron -m64 \
-xarch=sse2"
  CXX=CC CXXFLAGS="-xO2 -xtarget=opteron -m64 -xarch=sse2"
  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=generic -xarch=v9"
  CXX=CC CXXFLAGS="-xO2 -xtarget=generic -xarch=v9"
  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=generic -m64 \
-xarch=sparc"
  CXX=CC CXXFLAGS="-xO2 -xtarget=generic -m64 -xarch=sparc"
  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CFLAGS="${CFLAGS:--O2}" \
CXX="${CXX:-g++}" CXXFLAGS="${CXXFLAGS:--O2}" \
LDFLAGS="${LDFLAGS+${LDFLAGS}}" --with-libtool --with-shared \
--with-normal --with-debug=no --disable-overwrite \
--enable-symlinks --enable-echo --with-manpage-format=normal \
--without-ada --program-prefix=gnu --enable-rpath \
--without-progs --libdir="${SB_INSTALL_PREFIX}/${_libdir}" \
--includedir="${_includedir}/ncurses" --bindir=${_bindir} \
${ARGS+${ARGS}} --prefix=${SB_INSTALL_PREFIX}
]]>
      </configure>

      <install>
<![CDATA[
if [ ! -d ${SB_INSTALL_PREFIX}/include/64 ]; then
  ln -s ./$(basename ${_includedir}) ${SB_INSTALL_PREFIX}/include/64
fi

if [ ! -d ${SB_INSTALL_PREFIX}/bin/64 ]; then
  ln -s ./$(basename ${_bindir}) ${SB_INSTALL_PREFIX}/bin/64
fi

if [ ! -d ${SB_INSTALL_PREFIX}/lib/64 ]; then
  case "${SB_SYSTYPE}" in
  *-aix*|*-hpux*|*-solaris*)
    ln -s ./$(basename ${_libdir}) ${SB_INSTALL_PREFIX}/lib/64 ;;
  *-irix*)
    ln -s ../lib64 ${SB_INSTALL_PREFIX}/lib/64 ;;
  esac
fi

gmake install.libs

# remove build prefix from dependency_libs
${SB_PATH_SED} -i -e "\
s! -L${SB_BUILD_PREFIX}[^ '][^ ']*!!g;" \
${SB_INSTALL_PREFIX}/${_libdir}/lib*.la
]]>
      </install>

      <uninstall>
<![CDATA[
rm ${SB_INSTALL_PREFIX}/${_libdir}/libform.a
rm ${SB_INSTALL_PREFIX}/${_libdir}/libform.la
rm ${SB_INSTALL_PREFIX}/${_libdir}/libform.s[lo]*
rm ${SB_INSTALL_PREFIX}/${_libdir}/libmenu.a
rm ${SB_INSTALL_PREFIX}/${_libdir}/libmenu.la
rm ${SB_INSTALL_PREFIX}/${_libdir}/libmenu.s[lo]*
rm ${SB_INSTALL_PREFIX}/${_libdir}/libncurses++.a || :
rm ${SB_INSTALL_PREFIX}/${_libdir}/libncurses++.la || :
rm ${SB_INSTALL_PREFIX}/${_libdir}/libncurses++.s[lo]* || :
rm ${SB_INSTALL_PREFIX}/${_libdir}/libncurses.a
rm ${SB_INSTALL_PREFIX}/${_libdir}/libncurses.la
rm ${SB_INSTALL_PREFIX}/${_libdir}/libncurses.s[lo]*
rm ${SB_INSTALL_PREFIX}/${_libdir}/libpanel.a
rm ${SB_INSTALL_PREFIX}/${_libdir}/libpanel.la
rm ${SB_INSTALL_PREFIX}/${_libdir}/libpanel.s[lo]*
rmdir ${SB_INSTALL_PREFIX}/${_libdir} || :
[ ! -d ${SB_INSTALL_PREFIX}/${_libdir} ] && rm ${SB_INSTALL_PREFIX}/lib/64

rm -f  ${_includedir}/ncurses/curses.h \
${_includedir}/ncurses/cursesapp.h ${_includedir}/ncurses/cursesf.h \
${_includedir}/ncurses/cursesm.h ${_includedir}/ncurses/cursesp.h \
${_includedir}/ncurses/cursesw.h ${_includedir}/ncurses/cursslk.h \
${_includedir}/ncurses/eti.h ${_includedir}/ncurses/etip.h \
${_includedir}/ncurses/form.h ${_includedir}/ncurses/menu.h \
${_includedir}/ncurses/ncurses.h ${_includedir}/ncurses/ncurses_dll.h \
${_includedir}/ncurses/panel.h ${_includedir}/ncurses/term.h \
${_includedir}/ncurses/termcap.h ${_includedir}/ncurses/unctrl.h

rmdir ${_includedir}/ncurses || :
rmdir ${_includedir} || :
[ ! -d ${_includedir} ] && rm ${SB_INSTALL_PREFIX}/include/64

rm -f ${_bindir}/ncurses5-config
rmdir ${_bindir} || :
[ ! -d ${_bindir} ] && rm ${SB_INSTALL_PREFIX}/bin/64

:
]]>
      </uninstall>
    </module>

    <module name="Curses-5.12.2">
      <build-name>Curses-1.28</build-name>

      <install-name>${SB_PROG_NAME}57</install-name>

      <sources>
        <source checksum="ed9f7ddf2d90f4266da91c3dc9fad9c9"
          checksum-type="md5" size="127412"
          path="src/Curses-1.28.tgz"/>
        <patch checksum="1eeafdec4589ffa8f1612bf5754a3c3d"
          checksum-type="md5" size="552"
          path="src/Curses-1.28.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.5</depend>
        <depend program="ncurses" var="NCURSES"
          install-name="ncurses57">v&gt;=5.7</depend>
        <depend program="perl" var="PERL">v==5.12.2</depend>
      </dependencies>

      <script-header>
<![CDATA[
_perl_libdir="${SB_INSTALL_PREFIX_LIB}/perl5122"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-irix*)
  cp hints/c-irix.ncurses.h hints/c-irix.h ;;
*-linux*)
  cp hints/c-linux.ncurses.h hints/c-linux.h ;;
esac

CURSES_CFLAGS="-I${SB_VAR_NCURSES_INC} -I${SB_VAR_NCURSES_INC}/ncurses" \
CURSES_LDFLAGS="-L${SB_VAR_NCURSES_LIB} -lncurses" \
${SB_VAR_PERL}/bin/perl Makefile.PL FORMS MENUS PANELS \
INSTALLARCHLIB=${_perl_libdir} \
INSTALLSITEARCH=${_perl_libdir} \
INSTALLSITELIB=${_perl_libdir} \
PREFIX=${SB_INSTALL_PREFIX}
]]>
      </configure>

      <test>
<![CDATA[
gmake test
]]>
      </test>

      <install>
<![CDATA[
gmake install

# install path for Perl's include.paths.d
${SB_PATH_INSTALL} -m 755 -o root -g 0 -d \
${_perl_libdir}/include.paths.d
cat >${_perl_libdir}/include.paths.d/99-${SB_PROG_NAME} <<_EOT_
${_perl_libdir}
_EOT_
]]>
      </install>

      <uninstall>
<![CDATA[
rm -rf ${_perl_libdir} ${SB_INSTALL_PREFIX}/man/man3/Curses.3
]]>
      </uninstall>
    </module>

    <module name="widec-64bit"
    systype="*-aix*|*-hpux11.11|*-hpux11.[23]*|*-irix*|*-solaris*">
      <install-name>${SB_PROG_NAME}57</install-name>

      <sources>
        <source checksum="cce05daf61a64501ef6cd8da1f727ec6"
          checksum-type="md5" size="2445052"
          path="src/ncurses-5.7.tar.gz"/>
        <patch checksum="cf70c70bc240862063b3ca12da45334b"
          checksum-type="md5" size="5087675"
          path="src/ncurses-5.7.ncurses-5.7-20100424-cumulative.patch"/>
        <patch checksum="58d5083695e76077e895182695b9186c"
          checksum-type="md5" size="192014"
          path="src/ncurses-5.7.ncurses-5.7-20100501.patch"/>
        <patch checksum="e44fba07c16457ef686b3d1e26f6461e"
          checksum-type="md5" size="560104"
          path="src/ncurses-5.7.ncurses-5.7-20100515.patch"/>
        <patch checksum="ecf6ffbdd3ab8f095665e283c2b6822f"
          checksum-type="md5" size="331317"
          path="src/ncurses-5.7.ncurses-5.7-20100522.patch"/>
        <patch checksum="b9c2bf57b437a464cd35b3870704587a"
          checksum-type="md5" size="533635"
          path="src/ncurses-5.7.ncurses-5.7-20100529.patch"/>
        <patch checksum="8a3b42b8feeefbf6d890fe03d3e29b78"
          checksum-type="md5" size="301463"
          path="src/ncurses-5.7.ncurses-5.7-20100605.patch"/>
        <patch checksum="f9452d2a502bf1890b17ddc8c39cfe52"
          checksum-type="md5" size="239767"
          path="src/ncurses-5.7.ncurses-5.7-20100612.patch"/>
        <patch checksum="5aeb8749f197264a682f4f5398316d34"
          checksum-type="md5" size="635878"
          path="src/ncurses-5.7.ncurses-5.7-20100619.patch"/>
        <patch checksum="9d0c6eb479f266d0ffedbab80d7baf64"
          checksum-type="md5" size="62097"
          path="src/ncurses-5.7.ncurses-5.7-20100626.patch"/>
        <patch checksum="935a906394b54330f00f4eb7d2ddee5c"
          checksum-type="md5" size="34145"
          path="src/ncurses-5.7.ncurses-5.7-20100703.patch"/>
        <patch checksum="71b05a7b3fc8139ee8c3977a84aba869"
          checksum-type="md5" size="19644"
          path="src/ncurses-5.7.ncurses-5.7-20100717.patch"/>
        <patch checksum="6b090b2da342642d9463d9ecd53a1de2"
          checksum-type="md5" size="544270"
          path="src/ncurses-5.7.ncurses-5.7-20100724.patch"/>
        <patch checksum="e2903d9d789aeaafee2d60d0e63fb5ee"
          checksum-type="md5" size="450738"
          path="src/ncurses-5.7.ncurses-5.7-20100731.patch"/>
        <patch checksum="55baab220dc477f70d3fb1e1bccdbe79"
          checksum-type="md5" size="163666"
          path="src/ncurses-5.7.ncurses-5.7-20100807.patch"/>
        <patch checksum="b9346fbf927830213098081d6abea291"
          checksum-type="md5" size="50204"
          path="src/ncurses-5.7.ncurses-5.7-20100814.patch"/>
        <patch checksum="3fe20075bab2ac9b9c907cea3a49c6ba"
          checksum-type="md5" size="30548"
          path="src/ncurses-5.7.ncurses-5.7-20100828.patch"/>
        <patch checksum="ea54c3c58b3dd98fa5f5095aaca8299f"
          checksum-type="md5" size="633938"
          path="src/ncurses-5.7.ncurses-5.7-20100904.patch"/>
        <patch checksum="fd78a54a18c8c8f7e6b11842f3a1bf06"
          checksum-type="md5" size="216560"
          path="src/ncurses-5.7.ncurses-5.7-20100911.patch"/>
        <patch checksum="daa4bf7923473c47c28de4c00b3486c7"
          checksum-type="md5" size="249312"
          path="src/ncurses-5.7.ncurses-5.7-20100918.patch"/>
        <patch checksum="91998907719a6a1c2e5bfe706a02c78f"
          checksum-type="md5" size="28981"
          path="src/ncurses-5.7.ncurses-5.7-20100925.patch"/>
        <patch checksum="a8e1c4121c2c2973121790e6a6d8cf52"
          checksum-type="md5" size="130539"
          path="src/ncurses-5.7.ncurses-5.7-20101002.patch"/>
        <patch checksum="7f10d98d25ff52823dd81837420281eb"
          checksum-type="md5" size="5177"
          path="src/ncurses-5.7.ncurses-5.7-20101009.patch"/>
        <patch checksum="a6df8220efc07a82b34086dd76fe6c27"
          checksum-type="md5" size="774175"
          path="src/ncurses-5.7.ncurses-5.7-20101023.patch"/>
        <patch checksum="6fdffc976fdf943d2f5e1a75c7b75c17"
          checksum-type="md5" size="289309"
          path="src/ncurses-5.7.ncurses-5.7-20101106.patch"/>
        <patch checksum="e1d94138e42784af4e6ac2490b4e7de8"
          checksum-type="md5" size="209634"
          path="src/ncurses-5.7.ncurses-5.7-20101113.patch"/>
        <patch checksum="7da6425beb3b64c9f7f60624e17b6111"
          checksum-type="md5" size="315880"
          path="src/ncurses-5.7.ncurses-5.7-20101120.patch"/>
        <patch checksum="0b5dc2cf7f8955dd473d29c3dc752283"
          checksum-type="md5" size="247937"
          path="src/ncurses-5.7.tww.patch"/>
        <patch checksum="c9055ce51c4bdc19479a43df26432592"
          checksum-type="md5" size="1002219"
          path="src/ncurses-5.7.auto.patch"/>
        <patch checksum="c9d18ac57a1f1f4cf29398f8f95af72c"
          checksum-type="md5" size="1619"
          path="src/ncurses-5.7.64bit.patch"/>
      </sources>

      <script-header>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  _bindir="${SB_INSTALL_PREFIX}/bin/ppc64"
  _includedir="${SB_INSTALL_PREFIX}/include/ppc64/ncurses"
  _libdir="lib/ppc64" ;;
ia64*-hpux*)
  _bindir="${SB_INSTALL_PREFIX}/bin/hpux64"
  _includedir="${SB_INSTALL_PREFIX}/include/hpux64/ncurses"
  _libdir="lib/hpux64" ;;
*-hpux*)
  _bindir="${SB_INSTALL_PREFIX}/bin/pa20_64"
  _includedir="${SB_INSTALL_PREFIX}/include/pa20_64/ncurses"
  _libdir="lib/pa20_64" ;;
*-irix*)
  _bindir="${SB_INSTALL_PREFIX}/bin/mips4"
  _includedir="${SB_INSTALL_PREFIX}/include/mips4/ncurses"
  _libdir="lib64" ;;
i?86*-solaris*)
  _bindir="${SB_INSTALL_PREFIX}/bin/amd64"
  _includedir="${SB_INSTALL_PREFIX}/include/amd64/ncurses"
  _libdir="lib/amd64" ;;
*-solaris*)
  _bindir="${SB_INSTALL_PREFIX}/bin/sparcv9"
  _includedir="${SB_INSTALL_PREFIX}/include/sparcv9/ncurses"
  _libdir="lib/sparcv9" ;;
esac

case "${SB_SYSTYPE}" in
*-aix*)
  export OBJECT_MODE=64 ;;
esac
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC=xlc CFLAGS="-O2 -q64 -qro -qroconst -qmaxmem=-1 -qarch=ppc64"
  CXX=xlC CXXFLAGS="-O2 -q64 -qobjmodel=ibm -qro -qroconst \
-qnotempinc -qnotemplateregistry -qmaxmem=-1 -qarch=ppc64"
  LDFLAGS="-Wl,-brtl"

  ARGS="--with-caps=aix4 --with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
ia64*-hpux*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +DD64 \
+Oentrysched +Odataprefetch"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Ofltacc +Olit=all +DD64 \
+Oentrysched +Odataprefetch"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-hpux*)
  CC=cc CFLAGS="+O2 -z +Ofltacc +Olit=all +DD64 \
+Oentrysched +Odataprefetch"
  CXX=aCC CXXFLAGS="+O2 -AA -z +Ofltacc +Olit=all +DD64 \
+Oentrysched +Odataprefetch"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo"

  case "${SB_SYSTYPE}" in
  *-hpux11.31)
    ARGS="${ARGS} --build=hppa64-hp-hpux11.31" ;;
  *-hpux11.23)
    ARGS="${ARGS} --build=hppa64-hp-hpux11.23" ;;
  *-hpux11.11)
    ARGS="${ARGS} --build=hppa64-hp-hpux11.11" ;;
  *-hpux11.00)
    ARGS="${ARGS} --build=hppa64-hp-hpux11.00" ;;
  esac ;;
*-irix*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1009,1429 -64 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CXX=CC CXXFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1429 -64 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-ptused -FE:template_in_elf_section -O2 -OPT:Olimit=0"
  LDFLAGS="-64 -mips4"

  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=opteron -m64 \
-xarch=sse2"
  CXX=CC CXXFLAGS="-xO2 -xtarget=opteron -m64 -xarch=sse2"
  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=generic -xarch=v9"
  CXX=CC CXXFLAGS="-xO2 -xtarget=generic -xarch=v9"
  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=generic -m64 \
-xarch=sparc"
  CXX=CC CXXFLAGS="-xO2 -xtarget=generic -m64 -xarch=sparc"
  ARGS="--with-terminfo-dirs=/usr/share/lib/terminfo \
--with-default-terminfo-dir=/usr/share/lib/terminfo" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CFLAGS="${CFLAGS:--O2}" \
CXX="${CXX:-g++}" CXXFLAGS="${CXXFLAGS:--O2}" \
LDFLAGS="${LDFLAGS+${LDFLAGS}}" --with-libtool --with-shared \
--with-normal --with-debug=no --disable-overwrite \
--enable-symlinks --enable-echo --with-manpage-format=normal \
--without-ada --program-prefix=gnu --enable-rpath \
--without-progs --enable-widec \
--libdir="${SB_INSTALL_PREFIX}/${_libdir}" \
--includedir=${_includedir} --bindir=${_bindir} \
${ARGS+${ARGS}} --prefix=${SB_INSTALL_PREFIX}
]]>
      </configure>

      <install>
<![CDATA[
if [ ! -d ${SB_INSTALL_PREFIX}/include/64 ]; then
  ln -s ./$(basename ${_includedir}) ${SB_INSTALL_PREFIX}/include/64
fi

if [ ! -d ${SB_INSTALL_PREFIX}/bin/64 ]; then
  ln -s ./$(basename ${_bindir}) ${SB_INSTALL_PREFIX}/bin/64
fi

if [ ! -d ${SB_INSTALL_PREFIX}/lib/64 ]; then
  case "${SB_SYSTYPE}" in
  *-aix*|*-hpux*|*-solaris*)
    ln -s ./$(basename ${_libdir}) ${SB_INSTALL_PREFIX}/lib/64 ;;
  *-irix*)
    ln -s ../lib64 ${SB_INSTALL_PREFIX}/lib/64 ;;
  esac
fi

gmake install.libs

# remove build prefix from dependency_libs
${SB_PATH_SED} -i -e "\
s! -L${SB_BUILD_PREFIX}[^ '][^ ']*!!g;" \
${SB_INSTALL_PREFIX}/${_libdir}/lib*.la
]]>
      </install>

      <uninstall>
<![CDATA[
rm ${SB_INSTALL_PREFIX}/${_libdir}/*w.a
rm ${SB_INSTALL_PREFIX}/${_libdir}/*w.la
rm ${SB_INSTALL_PREFIX}/${_libdir}/*w.s[lo]*

rmdir ${SB_INSTALL_PREFIX}/${_libdir} || :
[ ! -d ${SB_INSTALL_PREFIX}/${_libdir} ] && rm ${SB_INSTALL_PREFIX}/lib/64

:
]]>
      </uninstall>
    </module>

    <licenses>
      <license>
        <para>Copyright (c) 1998-2009,2010 Free Software Foundation,
Inc.</para>
        <para>Permission is hereby granted, free of charge, to any
person obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, distribute with modifications, sublicense, and/or
sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:</para>
        <para>The above copyright notice and this permission notice
shall be included in all copies or substantial portions of the
Software.</para>
        <para>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF
ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</para>
        <para>Except as contained in this notice, the name(s) of the
above copyright holders shall not be used in advertising or otherwise
to promote the sale, use or other dealings in this Software without
prior written authorization.</para>
      </license>
    </licenses>

    <notes>
      <change from="5.6" to="5.7">
        <items name="Interface changes">
          <item><para>generate linkable stubs for some macros:
getattrs</para></item>
        </items>

        <items name="New features and improvements">
          <item><para>library</para>
          <unorderedlist>
            <item><para>new flavor of the ncurses library provides
rudimentary support for POSIX threads. Several functions are
reentrant, but most require either a window-level or screen-level
mutex. (This is API-compatible, but not ABI-compatible with the normal
library).</para></item>
            <item><para>add NCURSES_OPAQUE symbol to curses.h, will
use to make structs opaque in selected configurations.</para></item>
            <item><para>add NCURSES_EXT_FUNCS and NCURSES_EXT_COLORS
symbols to curses.h to make it simpler to tell if the extended
functions and/or colors are declared.</para></item>
            <item><para>add wresize to C++ binding</para></item>
            <item><para>eliminate fixed-buffer vsprintf calls in C++
binding.</para></item>
            <item><para>add several functions to C++ binding which
wrap C functions that pass a WINDOW* parameter.</para></item>
            <item><para>adapt mouse-handling code from menu library in
form-library</para></item>
            <item><para>improve tracing for form library, showing
created forms, fields, etc.</para></item>
            <item><para>make $NCURSES_NO_PADDING feature work for
termcap interface .</para></item>
            <item><para>add check to trace-file open, if the given
name is a directory, add ".log" to the name and try
again.</para></item>
            <item><para>several new manpages: curs_legacy.3x,
curs_memleaks.3x, curs_opaque.3x and curs_threads.3x</para></item>
            <item><para>ms: modified three test-programs to
demonstrate the threading support in this version: ditto, rain,
worm.</para></item>
            <item><para>several new test-programs: demo_panels,
dots_mvcur, inch_wide, inchs, key_name, key_names, savescreen,
savescreen.sh test_arrays, test_get_wstr, test_getstr, test_instr,
test_inwstr and test_opaque.</para></item>
            <item><para>add adacurses-config to the Ada95
install.</para></item>
            <item><para>modify tic -f option to format spaces as \s to
prevent them from being lost when that is read back in unformatted
strings.</para></item>
            <item><para>The tack program is now distributed separately
from ncurses.</para></item>
          </unorderedlist></item>
          <item><para>terminal database</para>
          <unorderedlist>
            <item><para>added entries:</para>
            <unorderedlist>
              <item><para>Eterm-256color, Eterm-88color and
rxvt-88color</para></item>
              <item><para>aterm</para></item>
              <item><para>konsole-256color</para></item>
              <item><para>mrxvt</para></item>
              <item><para>screen.mlterm</para></item>
              <item><para>screen.rxvt</para></item>
              <item><para>teraterm4.59 is now the primary primary
teraterm entry, renamed original to teraterm2.3</para></item>
              <item><para>9term terminal</para></item>
              <item><para>Newbury Data entries</para></item>
            </unorderedlist></item>
            <item><para>updated/improved entries:</para>
            <unorderedlist>
              <item><para>gnome to version 2.22.3</para></item>
              <item><para>h19, z100</para></item>
              <item><para>konsole to version 1.6.6</para></item>
              <item><para>mlterm, mlterm+pcfkeys</para></item>
              <item><para>xterm, and building-blocks for function-keys
to xterm patch #230.</para></item>
            </unorderedlist></item>
          </unorderedlist></item>
        </items>

        <items name="Major bug fixes">
          <item><para>add logic to tic for cancelling strings in
user-defined capabilities (this is needed for current konsole terminfo
entry).</para></item>
          <item><para>modify mk-1st.awk so the generated makefile
rules for linking or installing shared libraries do not first remove
the library, in case it is in use, e.g., libncurses.so by
/bin/sh.</para></item>
          <item><para>correct check for notimeout in
wgetch.</para></item>
          <item><para>fix a sign-extension bug in infocmp's
repair_acsc function.</para></item>
          <item><para>change winnstr to stop at the end of the
line.</para></item>
          <item><para>make Ada95 demo_panels example
work.</para></item>
          <item><para>fix for adding a non-spacing character at the
beginning of a line.</para></item>
          <item><para>fill in extended-color pair to make colors work
for wide-characters using extended-colors.</para></item>
          <item><para>improve refresh of window on top of multi-column
characters, taking into account split characters on left/right window
boundaries.</para></item>
          <item><para>modify win_wchnstr to ensure that only a base
cell is returned for each multi-column character.</para></item>
          <item><para>improve waddch and winsch handling of EILSEQ
from mbrtowc by using unctrl to display illegal bytes rather than
trying to append further bytes to make up a valid
sequence.</para></item>
          <item><para>restore curs_set state after
endwin/refresh</para></item>
          <item><para>modify keyname to use "^X" form only if meta has
been called, or if keyname is called without initializing curses,
e.g., via initscr or newterm.</para></item>
          <item><para>modify unctrl to check codes in 128-255 range
versus isprint. If they are not printable, and locale was set, use a
"M-" or "~" sequence.</para></item>
          <item><para>improve resizeterm by moving ripped-off lines,
and repainting the soft-keys.</para></item>
          <item><para>modify form library to accept control characters
such as newline in set_field_buffer, which is compatible with
Solaris.</para></item>
          <item><para>use NCURSES_MOUSE_MASK in definition of
BUTTON_RELEASE, etc., to make those work properly with the
--enable-ext-mouse configuration</para></item>
          <item><para>correct some functions in Ada95 binding which
were using return value from C where none was returned.</para></item>
          <item><para>reviewed/fixed issues reported by Coverity and
Klocwork tools.</para></item>
        </items>

        <items name="Portability">
          <item><para>configure script:</para>
          <unorderedlist>
            <item><para>new options:</para>
            <unorderedlist>
              <item><para><command>--disable-big-strings</command>
control whether static string tables are generated as single large
strings (to improve startup performance), or as array of individual
strings.</para></item>
              <item><para><command>--disable-relink</command> control
whether shared libraries are relinked (during install) when rpath is
enabled.</para></item>
              <item><para><command>--disable-tic-depends</command>
make explicit whether tic library depends on ncurses/ncursesw
library.</para></item>
              <item><para><command>--enable-mixed-case</command>
override the configure script's check if the filesystem supports
mixed-case filenames. This allows one to control how the terminal
database maps to the filesystem. For filesystems that do not support
mixed-case, the library uses generate 2-character (hexadecimal) codes
for the lower-level of the filesystem terminfo database</para></item>
              <item><para><command>--enable-reentrant</command> builds
a different flavor of the ncurses library (ncursest) which improves
reentrant use of the library by reducing global and static variables
(see the "--with-pthread" option for the threaded
support).</para></item>
              <item><para><command>--enable-weak-symbols</command> use
weak-symbols for linking to the POSIX thread library, and use the same
soname for the ncurses shared library as the normal library (caveat:
the ABI is for the threaded library, which makes global data accessed
via functions).</para></item>
              <item><para><command>--with-pthread</command> build with
the POSIX thread library (tested with AIX, GNU/Linux, FreeBSD,
OpenBSD, HPUX, IRIX64, Solaris, Tru64).</para></item>
              <item><para><command>--with-ticlib</command>
build/install the tic-support functions in a separate
library</para></item>
            </unorderedlist></item>
            <item><para>improved options:</para>
            <unorderedlist>
              <item><para><command>--enable-ext-colors</command>
requires the wide-character configuration.</para></item>
              <item><para><command>--with-chtype</command> ignore
option value "unsigned" is always added to the type in curses.h; do
the same for --with-mmask-t.</para></item>
              <item><para><command>--with-dmalloc</command> build-fix
for redefinition of strndup.</para></item>
              <item><para><command>--with-hashed-db</command></para>
              <unorderedlist>
                <item><para>accepts a parameter which is the
install-prefix of a given Berkeley Database.</para></item>
                <item><para>the $LIBS environment variable overrides the
search for the db library.</para></item>
              </unorderedlist></item>
              <item><para><command>--without-hashed-db</command>
assumed when "--disable-database" is used.</para></item>
            </unorderedlist></item>
          </unorderedlist></item>
          <item><para>other configure/build issues:</para>
          <unorderedlist>
            <item><para>build-fixes for LynxOS</para></item>
            <item><para>modify shared-library rules to allow FreeBSD
3.x to use rpath.</para></item>
            <item><para>build-fix for FreeBSD "contemporary" TTY
interface.</para></item>
            <item><para>build-fixes for AIX with
libtool.</para></item>
            <item><para>build-fixes for Darwin and
libtool.</para></item>
            <item><para>modify BeOS-specific ifdef's to build on
Haiku.</para></item>
            <item><para>corrected gcc options for building shared
libraries on Solaris and IRIX64.</para></item>
            <item><para>change shared-library configuration for
OpenBSD, make rpath work.</para></item>
            <item><para>build-fixes for using libutf8, e.g., on
OpenBSD 3.7</para></item>
            <item><para>add "-e" option in ncurses/Makefile.in when
generating source-files to force earlier exit if the build environment
fails unexpectedly.</para></item>
            <item><para>add support for shared libraries for
QNX.</para></item>
            <item><para>change delimiter in MKlib_gen.sh from '%' to
'@', to avoid substitution by IBM xlc to '#' as part of its extensions
to digraphs.</para></item>
          </unorderedlist></item>
          <item><para>library:</para>
          <unorderedlist>
            <item><para>rewrite wrapper for wcrtomb, making it work on
Solaris. This is used in the form library to determine the length of
the buffer needed by field_buffer.</para></item>
            <item><para>add/use configure script macro
CF_SIG_ATOMIC_T, use the corresponding type for data manipulated by
signal handlers.</para></item>
            <item><para>set locale in misc/ncurses-config.in since it
uses a range</para></item>
            <item><para>disable GPM mouse support when $TERM does not
happen to contain "linux", since Gpm_Open no longer limits its
assertion to terminals that it might handle, e.g., within "screen" in
xterm.</para></item>
            <item><para>reset mouse file-descriptor when unloading GPM
library.</para></item>
          </unorderedlist></item>
          <item><para>test programs:</para>
          <unorderedlist>
            <item><para>update test programs to build/work with
various UNIX curses for comparisons.</para></item>
          </unorderedlist></item>
        </items>
      </change>

      <note type="usage">
        <para>The Curses Perl modules are available in the following
directory:</para>
        <screen>
${SB_INSTALL_PREFIX}/lib/perl5122    # Perl 5.12.2
        </screen>

        <para>This directory is automatically added to the Perl
include.paths.d directory by the postinstall script.</para>
      </note>
    </notes>
  </program>
</programs>

<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="4Suite" version="1.0.2" revision="5"
  systype="!*-osf*">
    <build-name>${SB_PROG_NAME}-XML-${SB_PROG_VER}</build-name>

    <sources>
      <source checksum="b3e976a666899113d58f333518205968"
        checksum-type="md5" size="1286713"
        path="src/4Suite-XML-1.0.2.tar.bz2"/>
      <patch checksum="dd4184c4755343a9a5c19bc26f9e6aa5"
        checksum-type="md5" size="3040"
        path="src/4Suite-XML-1.0.2.tww.patch"/>
    </sources>

    <script-header>
<![CDATA[
_datadir="${SB_INSTALL_PREFIX}/share"
_docdir="${SB_INSTALL_PREFIX}/doc"
_sysconfdir="${SB_INSTALL_PREFIX}/etc"
]]>
    </script-header>

    <configure>
<![CDATA[
${SB_VAR_PYTHON}/bin/python setup.py config

${SB_PATH_SED} -i -e "\
s|^docdir.*|docdir = ${_docdir}/4suite|; \
s|^pythonlibdir.*|pythonlibdir = ${_install_prefix}|; \
s|^sysconfdir.*|sysconfdir = ${_sysconfdir}/4suite|; \
s|^libdir.*|libdir = ${SB_INSTALL_PREFIX}/lib|; \
s|^datadir.*|datadir = ${_datadir}/4suite|; \
s|^includedir.*|includedir = ${_include_prefix}/\$name|; \
s|^localedir.*|localedir = ${_datadir}/locale|; \
s|^localstatedir.*|localstatedir = ${_install_prefix}/Ft|; \
s|^mandir.*|mandir = ${SB_INSTALL_PREFIX}/man|; \
s|^bindir.*|bindir = ${SB_INSTALL_PREFIX}/bin|;" config.cache
]]>
    </configure>

    <build>
<![CDATA[
${SB_VAR_PYTHON}/bin/python setup.py build
]]>
    </build>

    <install>
<![CDATA[
${SB_VAR_PYTHON}/bin/python setup.py install 

# fix path to binaries
for _bin in 4xml 4xpath 4xslt 4xupdate; do
  ${SB_PATH_SED} -i -e "\
s|#!/bin/env python|#!${SB_VAR_PYTHON}/bin/python|;" \
  ${SB_INSTALL_PREFIX}/bin/${_bin}
done

rm -rf ${SB_INSTALL_PREFIX}/lib/tests
]]>
    </install>

    <uninstall>
<![CDATA[
rm -rf ${_datadir}/4suite
rm -rf ${_docdir}/4suite
rm -rf ${_install_prefix}/Ft
rm -rf ${_sysconfdir}/4suite
rm -f ${SB_INSTALL_PREFIX}/bin/4*
rm -f ${_install_prefix}/${_egg}

rm -f ${SB_INSTALL_PREFIX}/lib/profiles/profile_all.py \
${SB_INSTALL_PREFIX}/lib/profiles/profile_util.py \
${SB_INSTALL_PREFIX}/lib/profiles/Xml/XUpdate \
${SB_INSTALL_PREFIX}/lib/profiles/Xml/XUpdate/append.py

rmdir ${SB_INSTALL_PREFIX}/lib/profiles/Xml || :
rmdir ${SB_INSTALL_PREFIX}/lib/profiles || :
rmdir ${SB_INSTALL_PREFIX}/lib || :
rmdir ${SB_INSTALL_PREFIX}/bin || :
rmdir ${_sysconfdir}/4suite || :
rmdir ${_sysconfdir} || :
rmdir ${_datadir}/4suite || :
rmdir ${_datadir} || :
]]>
    </uninstall>

    <module name="2.7.2">
      <install-name>python27p</install-name>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend program="python" var="PYTHON" install-name="python27"
          add-path="prepend">v&gt;=2.7.2</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_install_prefix="${SB_INSTALL_PREFIX}/lib/python2.7/site-packages"
_include_prefix="${SB_INSTALL_PREFIX}/include/python2.7"
_egg="4Suite_XML-${SB_PROG_VER}-py2.7.egg-info"
]]>
      </script-header>

      <configure>
<![CDATA[
${SB_VAR_PYTHON}/bin/python setup.py config

${SB_PATH_SED} -i -e "\
s|^docdir.*|docdir = ${_docdir}/4suite|; \
s|^pythonlibdir.*|pythonlibdir = ${_install_prefix}|; \
s|^sysconfdir.*|sysconfdir = ${_sysconfdir}/4suite|; \
s|^libdir.*|libdir = ${SB_INSTALL_PREFIX}/lib|; \
s|^datadir.*|datadir = ${_datadir}/4suite|; \
s|^includedir.*|includedir = ${_include_prefix}/\$name|; \
s|^localedir.*|localedir = ${_datadir}/locale|; \
s|^localstatedir.*|localstatedir = ${_install_prefix}/Ft|; \
s|^mandir.*|mandir = ${SB_INSTALL_PREFIX}/man|; \
s|^bindir.*|bindir = ${SB_INSTALL_PREFIX}/bin|;" config.cache
]]>
      </configure>

      <build>
<![CDATA[
${SB_VAR_PYTHON}/bin/python setup.py build
]]>
      </build>

      <install>
<![CDATA[
${SB_VAR_PYTHON}/bin/python setup.py install 

# fix path to binaries
for _bin in 4xml 4xpath 4xslt 4xupdate; do
  ${SB_PATH_SED} -i -e "\
s|#!/bin/env python|#!${SB_VAR_PYTHON}/bin/python|;" \
  ${SB_INSTALL_PREFIX}/bin/${_bin}
done

rm -rf ${SB_INSTALL_PREFIX}/lib/tests
]]>
      </install>

      <uninstall>
<![CDATA[
rm -rf ${_datadir}/4suite
rm -rf ${_docdir}/4suite
rm -rf ${_install_prefix}/Ft
rm -rf ${_sysconfdir}/4suite
rm -f ${SB_INSTALL_PREFIX}/bin/4*
rm -f ${_install_prefix}/${_egg}

rm -f ${SB_INSTALL_PREFIX}/lib/profiles/profile_all.py \
${SB_INSTALL_PREFIX}/lib/profiles/profile_util.py \
${SB_INSTALL_PREFIX}/lib/profiles/Xml/XUpdate \
${SB_INSTALL_PREFIX}/lib/profiles/Xml/XUpdate/append.py

rmdir ${SB_INSTALL_PREFIX}/lib/profiles/Xml || :
rmdir ${SB_INSTALL_PREFIX}/lib/profiles || :
rmdir ${SB_INSTALL_PREFIX}/lib || :
rmdir ${SB_INSTALL_PREFIX}/bin || :
rmdir ${_sysconfdir}/4suite || :
rmdir ${_sysconfdir} || :
rmdir ${_datadir}/4suite || :
rmdir ${_datadir} || :
]]>
      </uninstall>
    </module>

    <module name="2.6.7">
      <install-name>python26p</install-name>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend program="python" var="PYTHON" install-name="python26"
          add-path="prepend">v&gt;=2.6.7</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_install_prefix="${SB_INSTALL_PREFIX}/lib/python2.6/site-packages"
_include_prefix="${SB_INSTALL_PREFIX}/include/python2.6"
_egg="4Suite_XML-${SB_PROG_VER}-py2.6.egg-info"
]]>
      </script-header>

      <configure>
<![CDATA[
${SB_VAR_PYTHON}/bin/python setup.py config

${SB_PATH_SED} -i -e "\
s|^docdir.*|docdir = ${_docdir}/4suite|; \
s|^pythonlibdir.*|pythonlibdir = ${_install_prefix}|; \
s|^sysconfdir.*|sysconfdir = ${_sysconfdir}/4suite|; \
s|^libdir.*|libdir = ${SB_INSTALL_PREFIX}/lib|; \
s|^datadir.*|datadir = ${_datadir}/4suite|; \
s|^includedir.*|includedir = ${_include_prefix}/\$name|; \
s|^localedir.*|localedir = ${_datadir}/locale|; \
s|^localstatedir.*|localstatedir = ${_install_prefix}/Ft|; \
s|^mandir.*|mandir = ${SB_INSTALL_PREFIX}/man|; \
s|^bindir.*|bindir = ${SB_INSTALL_PREFIX}/bin|;" config.cache
]]>
      </configure>

      <build>
<![CDATA[
${SB_VAR_PYTHON}/bin/python setup.py build
]]>
      </build>

      <install>
<![CDATA[
${SB_VAR_PYTHON}/bin/python setup.py install 

# fix path to binaries
for _bin in 4xml 4xpath 4xslt 4xupdate; do
  ${SB_PATH_SED} -i -e "\
s|#!/bin/env python|#!${SB_VAR_PYTHON}/bin/python|;" \
  ${SB_INSTALL_PREFIX}/bin/${_bin}
done

rm -rf ${SB_INSTALL_PREFIX}/lib/tests
]]>
      </install>

      <uninstall>
<![CDATA[
rm -rf ${_datadir}/4suite
rm -rf ${_docdir}/4suite
rm -rf ${_install_prefix}/Ft
rm -rf ${_sysconfdir}/4suite
rm -f ${SB_INSTALL_PREFIX}/bin/4*
rm -f ${_install_prefix}/${_egg}

rm -f ${SB_INSTALL_PREFIX}/lib/profiles/profile_all.py \
${SB_INSTALL_PREFIX}/lib/profiles/profile_util.py \
${SB_INSTALL_PREFIX}/lib/profiles/Xml/XUpdate \
${SB_INSTALL_PREFIX}/lib/profiles/Xml/XUpdate/append.py

rmdir ${SB_INSTALL_PREFIX}/lib/profiles/Xml || :
rmdir ${SB_INSTALL_PREFIX}/lib/profiles || :
rmdir ${SB_INSTALL_PREFIX}/lib || :
rmdir ${SB_INSTALL_PREFIX}/bin || :
rmdir ${_sysconfdir}/4suite || :
rmdir ${_sysconfdir} || :
rmdir ${_datadir}/4suite || :
rmdir ${_datadir} || :
]]>
      </uninstall>
    </module>

    <changelog>
      <change date="2011 September 18" revision="5"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Remove 2.5.2, 2.6.4, 2.6.5, and 2.7
modules</para></item>
        <item><para>Add 2.6.7 and 2.7.2 modules</para></item>
      </change>

      <change date="2010 July 19" revision="4"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Add 2.7 module</para></item>
      </change>

      <change date="2010 May 20" revision="3"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Add 2.6.5 module</para></item>
      </change>

      <change date="2008 June 21" revision="2"
      author="Gary V. Vaughan" email="gary@thewrittenword.com">
        <item><para>Add 2.5.2 module</para></item>
        <item><para>Update gcc dependency from 3.4.3 to
4.2.4</para></item>
      </change>
    </changelog>
  </program>
</programs>

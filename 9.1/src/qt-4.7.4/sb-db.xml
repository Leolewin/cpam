<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="qt" version="4.7.4" revision="1">
    <build-name>${SB_PROG_NAME}-everywhere-opensource-src-${SB_PROG_VER}</build-name>

    <install-name>lib${SB_PROG_NAME}47</install-name>

    <sources>
      <source checksum="9831cf1dfa8d0689a06c2c54c5c65aaf"
        checksum-type="md5" size="220388303"
        path="src/qt-everywhere-opensource-src-4.7.4.tar.gz"/>
      <patch checksum="48724964224a02af4b7387d322dc0324"
        checksum-type="md5" size="2790"
        path="src/qt-everywhere-opensource-src-4.7.4.rh-glib-eventloop-nullcheck.patch"/>
      <patch checksum="245432dff96201716b6d0b254dde8de9"
        checksum-type="md5" size="1778"
        path="src/qt-everywhere-opensource-src-4.7.4.rh-fix-qatomic-inline-asm.patch"/>
      <patch checksum="76e8f3aa9f0d6a4a23f6d1aa6de80a51"
        checksum-type="md5" size="3071"
        path="src/qt-everywhere-opensource-src-4.7.4.rh-cups.patch"/>
      <patch checksum="074b348eabab0147318ef5d770b427b6"
        checksum-type="md5" size="941"
        path="src/qt-everywhere-opensource-src-4.7.4.rh-bn-rendering-bz562049.patch"/>
      <patch checksum="82ea9a6da038a9d783eeef186cbb8356"
        checksum-type="md5" size="623"
        path="src/qt-everywhere-opensource-src-4.7.4.rh-bn-rendering-bz562058.patch"/>
      <patch checksum="bf59a08e7fc97786597b17ca694bf20c"
        checksum-type="md5" size="793"
        path="src/qt-everywhere-opensource-src-4.7.4.rh-indic-rendering-bz631732.patch"/>
      <patch checksum="166087e513577a0af575f6192a37226e"
        checksum-type="md5" size="1001"
        path="src/qt-everywhere-opensource-src-4.7.4.rh-indic-rendering-bz636399.patch"/>
      <patch checksum="c3cb3cb179bdec8058a118e9436f7f00"
        checksum-type="md5" size="715"
        path="src/qt-everywhere-opensource-src-4.7.4.rh-bpp24.patch"/>
      <patch checksum="33fe4f129f4cc87f30cdfd97eb916b11"
        checksum-type="md5" size="536"
        path="src/qt-everywhere-opensource-src-4.7.4.rh-qtextcursor-crash.patch"/>
      <patch checksum="aebe3080a011dc5c69b9cb1ca24acfc3"
        checksum-type="md5" size="1316"
        path="src/qt-everywhere-opensource-src-4.7.4.CVE-2010-1822.patch"/>
      <patch checksum="f3b3bf36428e91bc4f565d19ed98e859"
        checksum-type="md5" size="233578"
        path="src/qt-everywhere-opensource-src-4.7.4.tww.patch"/>
      <patch checksum="5149ac64883a2516817b79735b5346e6"
        checksum-type="md5" size="952"
        path="src/qt-everywhere-opensource-src-4.7.4.make_safe_select_safer.patch"/>
    </sources>

    <dependencies>
      <depend program="bison" install-name="bison24"
        add-path="prepend" type="build">v&gt;=2.4.3</depend>
      <depend program="flex" install-name="flex25" add-path="prepend"
        type="build">v&gt;=2.5.35</depend>
      <depend program="pkgconfig" install-name="pkgconfig02"
        add-path="prepend" type="build">v&gt;=0.25</depend>
      <depend program="dbus" var="DBUS"
        install-name="dbus12">v&gt;=1.2.26</depend>
      <depend program="atk" var="LIBATK"
        install-name="libatk132">v&gt;=1.32.0</depend>
      <depend program="cairo" var="LIBCAIRO"
        install-name="libcairo110">v&gt;=1.10.2</depend>
      <depend program="dbus" var="DBUS"
        install-name="dbus12">v&gt;=1.2.26</depend>
      <depend program="fcpackage" var="FCPACKAGE"
        install-name="fcpackage28">v&gt;=2.8</depend>
      <depend program="freetype" var="LIBTTF"
        install-name="libttf24">v&gt;=2.4.6</depend>
      <depend program="gdk-pixbuf" var="LIBGDKPIXBUF"
        install-name="libgdkpixbuf222">v&gt;=2.22.1</depend>
      <depend program="gettext" var="GETTEXT"
        install-name="gettext018">v&gt;=0.18.1.1</depend>
      <depend program="gtk+" var="LIBGTK"
        install-name="libgtk+222">v&gt;=2.22.1</depend>
      <depend program="jpeg" var="JPEG"
        install-name="libjpeg8">v&gt;=8b</depend>
      <depend program="libiconv" var="LIBICONV"
        install-name="libiconv113">v&gt;=1.13.1</depend>
      <depend program="libmng" var="LIBMNG"
        install-name="libmng10">v&gt;=1.0.10</depend>
      <depend program="libpng" var="LIBPNG"
        install-name="libpng14">v&gt;=1.4.4</depend>
      <depend program="openssl" var="LIBOPENSSL"
        install-name="libopenssl10">v&gt;=1.0.0e</depend>
      <depend program="pango" var="LIBPANGO"
        install-name="libpango128">v&gt;=1.28.4</depend>
      <depend program="sqlite" var="LIBSQLITE"
        install-name="libsqlite37">v&gt;=3.7.7.1</depend>
      <depend program="tiff" var="LIBTIFF"
        install-name="libtiff39">v&gt;=3.9.5</depend>
      <depend program="zlib" var="LIBZ"
        install-name="libz12">v&gt;=1.2.5</depend>
      <depend program="mysql" var="MYSQL"
        module="libruntime">v==5.5.15</depend>
      <depend program="postgresql" var="PGSQL"
        module="libruntime">v==9.0.6</depend>
      <depend program="cups" var="CUPS">v==1.4.8</depend>
      <depend program="perl" var="PERL" add-path="prepend"
        type="build">v==5.12.2</depend>
    </dependencies>

    <script-header>
<![CDATA[
_datadir=${SB_INSTALL_PREFIX}/share
_docdir=${SB_INSTALL_PREFIX}/doc

_gccsubdir="gcc44"

case "${SB_SYSTYPE}" in
hppa*-hpux*|*-osf*|*-solaris2.8)
  _includedir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}" ;;
*)
  _includedir=${SB_INSTALL_PREFIX}/include
  _libdir=${SB_INSTALL_PREFIX_LIB} ;;
esac

case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac
]]>
    </script-header>

    <module name="default">
      <dependencies replace="0">
        <depend var="GNOME" install-name="gnome232" set-var-only="1"
          type="build"/>
        <depend var="KDE" install-name="kde47" set-var-only="1"
          type="build"/>
        <depend program="glib" var="LIBGLIB" install-name="libglib226"
          module="gcc44"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=2.26.1</depend>
        <depend program="glib" var="LIBGLIB" install-name="libglib226"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=2.26.1</depend>
        <depend program="gcc" install-name="gcc44" add-path="prepend"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8"/>
      </dependencies>

      <validate>
        <depend program="qt" module="stlport4"
          systype="*-solaris2.1?">v==4.7.4</depend>
        <depend program="qt" module="rtti"
          systype="*-aix*">v==4.7.4</depend>
        <depend program="qt" module="gcc44"
          systype="*-aix*|*-irix*|*-linux*|*-solaris2.1?">v==4.7.4</depend>
        <depend program="qt" module="sip-2.6.7">v==4.7.4</depend>
        <depend program="qt" module="sip-2.7.2">v==4.7.4</depend>
        <depend program="qt" module="PyQt-2.6.7">v==4.7.4</depend>
        <depend program="qt" module="PyQt-2.7.2">v==4.7.4</depend>
        <depend program="qt" module="qtwebkit"
          systype="*-aix*|hppa*-hpux*|*-linux*|*-osf*|*-solaris*">v==4.7.4</depend>
        <depend program="qt" module="qtwebkit-gcc44"
          systype="*-linux*">v==4.7.4</depend>
        <depend program="qt" module="apiextractor">v==4.7.4</depend>
        <depend program="qt" module="generatorrunner">v==4.7.4</depend>
        <depend program="qt" module="shiboken-2.6.7"
          systype="*-aix*|*-irix*|*-linux*|*-osf*|*-solaris*">v==4.7.4</depend>
        <depend program="qt" module="shiboken-2.7.2"
          systype="*-aix*|*-irix*|*-linux*|*-osf*|*-solaris*">v==4.7.4</depend>
        <depend program="qt" module="pyside-2.6.7"
          systype="*-irix*|*-linux*|*-osf*|*-solaris*">v==4.7.4</depend>
        <depend program="qt" module="pyside-2.7.2"
          systype="-irix*|*-linux*|*-osf*|*-solaris*">v==4.7.4</depend>
        <depend program="qscintilla"
          module="python-2.6.7">v==2.5.1</depend>
        <depend program="qscintilla"
          module="python-2.7.2">v==2.5.1</depend>
        <depend program="qwt" module="python-2.6.7">v==5.2.2</depend>
        <depend program="qwt" module="python-2.7.2">v==5.2.2</depend>
      </validate>

      <script-header>
<![CDATA[
_datadir=${SB_INSTALL_PREFIX}/share
_docdir=${SB_INSTALL_PREFIX}/doc

_gccsubdir="gcc44"

case "${SB_SYSTYPE}" in
hppa*-hpux*|*-osf*|*-solaris2.8)
  _includedir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}" ;;
*)
  _includedir=${SB_INSTALL_PREFIX}/include
  _libdir=${SB_INSTALL_PREFIX_LIB} ;;
esac

case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  PLATFORM=aix-xlc
  ARGS="-sm" ;;
ia64*-hpux*)
  PLATFORM=hpuxi-acc-32
  ARGS=-sm ;;
*-hpux*)
  PLATFORM=hpux-g++
  ARGS="-sm -no-webkit"

  _libglib_inc="${SB_VAR_LIBGLIB_INC}/${_gccsubdir}"
  _libglib_lib="${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}" ;;
*-irix*)
  PLATFORM=irix-cc
  ARGS="-sm -no-webkit -no-reduce-exports -no-script -no-scripttools" ;;
x86_64-redhat-linuxe4)
  PLATFORM=linux-g++-64
  ARGS="-sm -xinerama -xcursor -xrandr" ;;
x86_64*-linux*)
  PLATFORM=rhel5-g++-64
  ARGS="-sm -xinerama -xcursor -xrandr" ;;
i?86-redhat-linuxe4)
  PLATFORM=linux-g++
  ARGS="-sm -xinerama -xcursor -xrandr" ;;
i?86*-linux*)
  PLATFORM=rhel5-g++
  ARGS="-sm -xinerama -xcursor -xrandr" ;;
*-osf*)
  PLATFORM=tru64-g++
  QMAKE_CFLAGS="-mieee"
  QMAKE_LFLAGS="-Wl,-rpath,${SB_VAR_GCC_RT_LIB}"

  ARGS="-sm" ;;
i?86*-solaris*)
  PLATFORM=solarisx86-cc59
  ARGS="${ARGS+${ARGS} }-sm" ;;
*-solaris2.1?)
  PLATFORM=solaris-cc59
  ARGS="-sm" ;;
*-solaris2.8)
  PLATFORM=solaris-g++
  ARGS="-sm"

  ${SB_PATH_SED} -i -e "\
s|OLD_SOLARIS_SYSTEM_WITH_GCC|1|" \
src/3rdparty/javascriptcore/JavaScriptCore/wtf/Platform.h \
src/3rdparty/webkit/JavaScriptCore/wtf/Platform.h

  _libglib_inc="${SB_VAR_LIBGLIB_INC}/${_gccsubdir}"
  _libglib_lib="${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}" ;;
*-solaris*)
   PLATFORM=solaris-cc59
  ARGS="-sm" ;;
esac

case "${SB_SYSTYPE}" in
hppa*-hpux*|*-solaris2.8)
  # allow tests to find GCC runtime path
  for _pro in endian/endiantest.pro ipv6/ipv6.pro \
  ptrsize/ptrsizetest.pro \
  stl/stl.pro; do
    cat >>config.tests/unix/${_pro} <<_EOT_
QMAKE_LFLAGS += \$\$QMAKE_RPATH${SB_VAR_GCC_RT_LIB}
_EOT_
  done
  ;;
*-solaris2.1?)
  # remove -R/usr/openwin/lib
  ${SB_PATH_SED} -i -e "\
s!^QMAKE_LFLAGS[	 ]*=.*!QMAKE_LFLAGS		=!; \
s! -Dfloat_t=float!!; \
" mkspecs/${PLATFORM}/qmake.conf
  ;;
esac

# don't waste time creating Makefiles in examples directory
${SB_PATH_FIND} ${SB_BUILD_PREFIX}/examples \
-name \*.pro -exec rm {} \;

# let makefile create missing .qm files, the .qm files should be included in qt upstream
for f in translations/*.ts ; do
  touch ${f%.ts}.qm
done

# s/stdint/inttypes/ on those systems that lack stdint.h
test -f /usr/include/stdint.h || {
_filelist=`cat stdint_sed_filelist`
(cd src/3rdparty
${SB_PATH_SED} -i -e "\
s|\([ 	]*#[ 	]*include.*\)stdint.h\(.*\)|\1inttypes.h\2|" \
${_filelist})
}

EXTRA_CFLAGS="${QMAKE_CFLAGS+${QMAKE_CFLAGS}}" \
EXTRA_LFLAGS="${QMAKE_LFLAGS+${QMAKE_LFLAGS}}" \
PKG_CONFIG_PATH="\
${SB_VAR_CUPS+${SB_VAR_CUPS_LIB}/pkgconfig:}\
${SB_VAR_DBUS+${SB_VAR_DBUS_LIB}/pkgconfig:}\
${SB_VAR_FCPACKAGE+${SB_VAR_FCPACKAGE_LIB}/pkgconfig:}\
${SB_VAR_GETTEXT+${SB_VAR_GETTEXT_LIB}/pkgconfig:}\
${SB_VAR_JPEG+${SB_VAR_JPEG_LIB}/pkgconfig:}\
${SB_VAR_LIBATK+${SB_VAR_LIBATK_LIB}/pkgconfig:}\
${SB_VAR_LIBCAIRO+${SB_VAR_LIBCAIRO_LIB}/pkgconfig:}\
${SB_VAR_LIBGDKPIXBUF+${SB_VAR_LIBGDKPIXBUF_LIB}/pkgconfig:}\
${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/pkgconfig:}\
${SB_VAR_LIBICONV+${SB_VAR_LIBICONV_LIB}/pkgconfig:}\
${SB_VAR_LIBGLIB+${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}}/pkgconfig:}\
${SB_VAR_LIBPANGO+${SB_VAR_LIBPANGO_LIB}/pkgconfig:}\
${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_LIB}/pkgconfig:}\
${SB_VAR_LIBSQLITE+${SB_VAR_LIBSQLITE_LIB}/pkgconfig:}\
${SB_VAR_LIBTIFF+${SB_VAR_LIBTIFF_LIB}/pkgconfig:}\
${SB_VAR_LIBTTF+${SB_VAR_LIBTTF_LIB}/pkgconfig:}\
${SB_VAR_LIBOPENSSL+${SB_VAR_LIBOPENSSL_LIB}/pkgconfig:}\
${SB_VAR_LIBZ+${SB_VAR_LIBZ_LIB}/pkgconfig}" \
${SHELL} ./configure -verbose -release -shared -no-separate-debug-info \
-qt-gif -system-zlib -system-libmng -system-libpng -system-libjpeg \
-system-sqlite -plugin-sql-sqlite -glib -xrender -dbus-linked \
-openssl-linked -no-3dnow -platform ${PLATFORM} \
-nomake demos -nomake docs -nomake translations \
${SB_VAR_CUPS+-I${SB_VAR_CUPS_INC}\
 -L${SB_VAR_CUPS_LIB} -R${SB_VAR_CUPS_LIB} }\
${SB_VAR_DBUS+-I${SB_VAR_DBUS_INC} \
 -L${SB_VAR_DBUS_LIB} -R${SB_VAR_DBUS_LIB} }\
${SB_VAR_FCPACKAGE+-I${SB_VAR_FCPACKAGE_INC}\
 -L${SB_VAR_FCPACKAGE_LIB} -R${SB_VAR_FCPACKAGE_LIB} }\
${SB_VAR_JPEG+-I${SB_VAR_JPEG_INC}\
 -L${SB_VAR_JPEG_LIB} -R${SB_VAR_JPEG_LIB} }\
${SB_VAR_LIBICONV+-I${SB_VAR_LIBICONV_INC}\
 -L${SB_VAR_LIBICONV_LIB} -R${SB_VAR_LIBICONV_LIB} }\
${SB_VAR_LIBGLIB+-I${_libglib_inc:-${SB_VAR_LIBGLIB_INC}} \
 -I${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}}/include \
 -L${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}} \
 -R${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}} }\
${SB_VAR_LIBMNG+-I${SB_VAR_LIBMNG_INC}\
 -L${SB_VAR_LIBMNG_LIB} -R${SB_VAR_LIBMNG_LIB} }\
${SB_VAR_LIBPNG+-I${SB_VAR_LIBPNG_INC}\
 -L${SB_VAR_LIBPNG_LIB} -R${SB_VAR_LIBPNG_LIB} }\
${SB_VAR_LIBSQLITE+-I${SB_VAR_LIBSQLITE_INC}\
 -L${SB_VAR_LIBSQLITE_LIB} -R${SB_VAR_LIBSQLITE_LIB} }\
${SB_VAR_LIBTIFF+-I${SB_VAR_LIBTIFF_INC}\
 -L${SB_VAR_LIBTIFF_LIB} -R${SB_VAR_LIBTIFF_LIB} }\
${SB_VAR_LIBTTF+-I${SB_VAR_LIBTTF_INC} \
 -I${SB_VAR_LIBTTF_INC}/freetype2 \
 -L${SB_VAR_LIBTTF_LIB} -R${SB_VAR_LIBTTF_LIB} }\
${SB_VAR_MYSQL+-I${SB_VAR_MYSQL_INC}\
 -L${SB_VAR_MYSQL_LIB} -R${SB_VAR_MYSQL_LIB} }\
${SB_VAR_LIBOPENSSL+-I${SB_VAR_LIBOPENSSL_INC}\
 -L${SB_VAR_LIBOPENSSL_LIB} -R${SB_VAR_LIBOPENSSL_LIB} }\
${SB_VAR_PGSQL+-I${SB_VAR_PGSQL_INC}\
 -L${SB_VAR_PGSQL_LIB} -R${SB_VAR_PGSQL_LIB} }\
${SB_VAR_LIBZ+-I${SB_VAR_LIBZ_INC}\
 -L${SB_VAR_LIBZ_LIB} -R${SB_VAR_LIBZ_LIB} }\
${SB_VAR_GCC_RT+-L${SB_VAR_GCC_RT_LIB}\
 -R${SB_VAR_GCC_RT_LIB} }\
${ARGS+${ARGS}} \
-datadir ${_datadir} -demosdir "${_datadir}/demos" \
-docdir ${_docdir} -headerdir ${_includedir} -libdir ${_libdir} \
-importdir "${_libdir}/imports" \
-plugindir "${_libdir}/plugins" -prefix ${SB_INSTALL_PREFIX} \
-translationdir "${_datadir}/translations" \
-no-webkit
#### Webkit will be in a separate .sb file

# set path to dlopen libraries
${SB_PATH_SED} -i -e "\
s!@GLIB_PATH@!${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}/lib}/!; \
s!@GNOME_PATH@!${SB_VAR_GNOME+${SB_VAR_GNOME}/lib/lib}!; \
s!@KDE_PATH@!${SB_VAR_KDE+${SB_VAR_KDE}/lib/lib}!; \
s!@GTK_PATH@!${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/lib}!" \
src/3rdparty/phonon/gstreamer/artssink.cpp \
src/3rdparty/phonon/gstreamer/mediaobject.cpp \
src/gui/styles/qgtkstyle_p.cpp
]]>
      </configure>

      <build>
<![CDATA[
LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/lib \
LIBPATH=${SB_BUILD_PREFIX}/lib \
SHLIB_PATH=${SB_BUILD_PREFIX}/lib \
DOTQTDIR=${SB_BUILD_PREFIX} \
gmake

LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/lib \
LIBPATH=${SB_BUILD_PREFIX}/lib \
SHLIB_PATH=${SB_BUILD_PREFIX}/lib \
bin/lrelease translations/*.ts
]]>
      </build>

      <install>
<![CDATA[
set -x
gmake install

# remove platform-specific link
rm -rf ${_datadir}/mkspecs/default

# rebuild libraries so RPATH is correct
case "${SB_SYSTYPE}" in
hppa*-hpux*)
# Relinking reinstalls the .pc files, which, because of an interesting
# sed statement end up empty. mv the dir away, and mv it back later
  mv ${_libdir}/pkgconfig ${_libdir}/pkgconfig-
  mkdir ${_libdir}/backup
  mv ${_libdir}/*.la ${_libdir}/backup
  mv ${_libdir}/*.prl ${_libdir}/backup
  ${SB_PATH_SED} -i -e "\
s!^QMAKE_LIBDIR_QT  =.*!QMAKE_LIBDIR_QT  = ${_libdir}!;" \
  ${SB_BUILD_PREFIX}/.qmake.cache

  ${SB_PATH_SED} -i -e "\
/QMAKE_LIBDIR =/ s!\$\$QT_BUILD_TREE/lib !!;" \
  ${SB_BUILD_PREFIX}/mkspecs/features/qt.prf
  ${SB_PATH_SED} -i -e "s|^QMAKE_LIBDIR.*|#&|" \
    ${SB_BUILD_PREFIX}/tools/designer/src/designer/designer.pro

  rm -f ${_libdir}/lib*.sl
  rm -f ${_libdir}/lib*.4
  ${SB_PATH_FIND} plugins imports -name '*.sl' -exec rm -f '{}' \;

  (cd ${SB_BUILD_PREFIX}/src
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake src.pro
   QTDIR=${SB_BUILD_PREFIX} gmake)
  (cd ${SB_BUILD_PREFIX}/tools/designer/src/lib
   rm -f ${_libdir}/libQtDesigner.4 ${_libdir}/libQtDesigner.sl
   rm -f ${SB_BUILD_PREFIX}/lib/libQtDesigner.4 \
     ${SB_BUILD_PREFIX}/lib/libQtDesigner.sl
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake lib.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)
  (cd ${SB_BUILD_PREFIX}/tools/designer/src/components/lib
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake lib.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/assistant
   cd ${SB_BUILD_PREFIX}/tools/assistant
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake assistant.pro
   QTDIR=${SB_BUILD_PREFIX} gmake)
  (rm bin/assistant_adp
   cd ${SB_BUILD_PREFIX}/tools/assistant/compat
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake assistant.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/designer
   cd ${SB_BUILD_PREFIX}/tools/designer/src/designer
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake designer.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/linguist
   cd ${SB_BUILD_PREFIX}/tools/linguist/linguist
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake linguist.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)
  (rm bin/lrelease
   cd ${SB_BUILD_PREFIX}/tools/linguist/lrelease
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake lrelease.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)
  (rm bin/lupdate
   cd ${SB_BUILD_PREFIX}/tools/linguist/lupdate
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake lupdate.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)
  (rm bin/lconvert
   cd ${SB_BUILD_PREFIX}/tools/linguist/lconvert
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake lconvert.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/pixeltool
   cd ${SB_BUILD_PREFIX}/tools/pixeltool
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake pixeltool.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qcollectiongenerator
   cd ${SB_BUILD_PREFIX}/tools/assistant/tools/qcollectiongenerator
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake \
     qcollectiongenerator.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qdbus
   cd ${SB_BUILD_PREFIX}/tools/qdbus/qdbus
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake qdbus.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qdbuscpp2xml
   cd ${SB_BUILD_PREFIX}/tools/qdbus/qdbuscpp2xml
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake qdbuscpp2xml.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qdbusviewer
   cd ${SB_BUILD_PREFIX}/tools/qdbus/qdbusviewer
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake qdbusviewer.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qdbusxml2cpp
   cd ${SB_BUILD_PREFIX}/tools/qdbus/qdbusxml2cpp
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake qdbusxml2cpp.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qdoc3
   cd ${SB_BUILD_PREFIX}/tools/qdoc3
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake qdoc3.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qhelpconverter
   cd ${SB_BUILD_PREFIX}/tools/assistant/tools/qhelpconverter
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake qhelpconverter.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qhelpgenerator
   cd ${SB_BUILD_PREFIX}/tools/assistant/tools/qhelpgenerator
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake qhelpgenerator.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qmlviewer
   cd ${SB_BUILD_PREFIX}/tools/qml
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake qml.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qt3to4
   cd ${SB_BUILD_PREFIX}/tools/porting/src
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake src.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qttracereplay
   cd ${SB_BUILD_PREFIX}/tools/qttracereplay
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake qttracereplay.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/qtconfig
   cd ${SB_BUILD_PREFIX}/tools/qtconfig
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake qtconfig.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/uic3
   cd ${SB_BUILD_PREFIX}/src/tools/uic3
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake uic3.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/xmlpatterns
   cd ${SB_BUILD_PREFIX}/tools/xmlpatterns
   QTDIR=${SB_BUILD_PREFIX} ${SB_BUILD_PREFIX}/bin/qmake xmlpatterns.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  (rm bin/xmlpatternsvalidator
   cd ${SB_BUILD_PREFIX}/tools/xmlpatternsvalidator
   QTDIR=${SB_BUILD_PREFIX} \
     ${SB_BUILD_PREFIX}/bin/qmake xmlpatternsvalidator.pro
   QTDIR=${SB_BUILD_PREFIX} gmake install)

  rm -rf ${_libdir}/pkgconfig
  mv ${_libdir}/pkgconfig- ${_libdir}/pkgconfig
  mv ${_libdir}/backup/* ${_libdir}/
  rm -rf ${_libdir}/backup
  ;;
esac

(cd doc
 ${SB_PATH_INSTALL} -m 755 -o root -g 0 -d ${_docdir}
 ${SB_PATH_TAR} cf - html | (cd ${_docdir} && ${SB_PATH_TAR} xf -)
 ${SB_PATH_CHOWN} -hR 0:0 ${_docdir})

set -x
# Add rpath to .pc files
for _pc in ${_libdir}/pkgconfig/*.pc; do
  ${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" ${_pc}
done

# Remove extraneous search paths and libraries from .prl files
for _prl in ${_libdir}/*.prl; do
  ${SB_PATH_AWK} -v _var_printed=0 "\
/QMAKE_PRL_LIBS/ {
  for (i = 3; i <= NF; i++) {
    if (match (\$i, \"-L\") && !match (\$i, \"-L${SB_INSTALL_PREFIX}\"))
      continue
    if (\$i ~ /^-Wl|-R/)
      continue
    if (\$i ~ /^-l/ && \$i !~ /^-lQt/)
      continue

    if (\$i in _libs_printed)
      continue
    _libs_printed[\$i] = 1

    if (_var_printed == 0) {
      printf \"%s\", \"QMAKE_PRL_LIBS =\"
      _var_printed = 1
    }
    printf \" %s\", \$i
  }
  
  if (_var_printed == 1)
    printf \"\n\"

  next
}
{ print }" ${_prl} >${_prl}.new
  cp ${_prl}.new ${_prl}
  rm ${_prl}.new
done

# Remove runtime library path from .la files
${SB_PATH_SED} -i -e "\
s!${CC_LD_RT}[^ ][^ ]* !!g;" ${_libdir}/*.la
]]>
      </install>
    </module>

    <module name="PyQt-2.6.7">
      <build-name>PyQt-x11-gpl-4.8.4</build-name>

      <sources>
        <source checksum="97c5dc1042feb5b3fe20baabad055af1"
          checksum-type="md5" size="9799081"
          path="src/PyQt-x11-gpl-4.8.4.tar.gz"/>
        <patch checksum="2ef22326bf553fff6119b0da51b6d5da"
          checksum-type="md5" size="5303"
          path="src/PyQt-x11-gpl-4.8.4.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend program="qt" install-name="libqt47" module="gcc44"
          append="bin/gcc44" add-path="prepend"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" install-name="libqt47" add-path="prepend"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend program="qscintilla" var="LIBQSCINTILLA"
          install-name="libqscintilla25"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=2.5.1</depend>
        <depend program="qscintilla" var="LIBQSCINTILLA"
          install-name="libqscintilla25" module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=2.5.1</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="fcpackage" var="FCPACKAGE"
          install-name="fcpackage28">v&gt;=2.8</depend>
        <depend program="jpeg" var="JPEG"
          install-name="libjpeg8">v&gt;=8b</depend>
        <depend program="libiconv" var="LIBICONV"
          install-name="libiconv113">v&gt;=1.13.1</depend>
        <depend program="libmng" var="LIBMNG"
          install-name="libmng10">v&gt;=1.0.10</depend>
        <depend program="libpng" var="LIBPNG"
          install-name="libpng14">v&gt;=1.4.4</depend>
        <depend program="zlib" var="LIBZ"
          install-name="libz12">v&gt;=1.2.5</depend>
        <depend program="python" var="PYTHON" install-name="python26"
          add-path="prepend">v&gt;=2.6.7</depend>
        <depend program="qt" module="sip-2.6.7">v==4.7.4</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_pysubdir="python26"

_install_prefix="${SB_INSTALL_PREFIX_LIB}/${_pysubdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-bbigtoc -Wl,-brtl -Wl,-blibpath:/usr/lib"

  PLATFORM=aix-g++ ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b,"

  PLATFORM=hpuxi-g++-32 ;;
*-hpux*)
  CC_LD_RT="-Wl,+b,"

  PLATFORM=hpux-g++ ;;
*-irix*)
  CC_LD_RT="-Wl,-rpath,"

  PLATFORM=irix-g++ ;;
x86_64-redhat-linuxe4)
  CC_LD_RT=-Wl,-rpath,


  PLATFORM=linux-g++-64 ;;
x86_64*-linux*)
  CC_LD_RT=-Wl,-rpath,


  PLATFORM=rhel5-g++-64 ;;
i?86-redhat-linuxe4)
  CC_LD_RT=-Wl,-rpath,


  PLATFORM=linux-g++ ;;
i?86*-linux*)
  CC_LD_RT="-Wl,-rpath,"

  PLATFORM=rhel5-g++ ;;
*-osf*)
  CC_LD_RT="-Wl,-rpath,"

  PLATFORM=tru64-g++ ;;
i?86*-solaris*)
  CC_LD_RT="-Wl,-R,"


  PLATFORM=solarisx86-g++ ;;
*-solaris*)
  CC_LD_RT="-Wl,-R,"


  PLATFORM=solaris-g++ ;;
esac


# Allow executables to run during configure stage
case "${SB_SYSTYPE}" in
ia64*-hpux*)
  export LD_LIBRARY_PATH=${SB_VAR_GCC_RT_LIB} ;;
*-aix*)
  export LIBPATH=${SB_VAR_GCC_RT_LIB} ;;
esac

${SB_PATH_SED} -i -e "\
s!@QMAKE_LFLAGS@!\$\$QMAKE_RPATH${SB_VAR_GCC_RT_LIB}:\
${SB_VAR_LIBZ_LIB}:${SB_VAR_LIBICONV_LIB}!;" configure.py

QMAKESPEC=${PLATFORM} PYTHONPATH=${_install_prefix} \
${SB_VAR_PYTHON}/bin/python configure.py \
-w -b ${_install_prefix}/bin -d ${_install_prefix} \
-v ${_install_prefix}/share --no-qsci-api \
INCDIR_QT=${_qt_inc:-${SB_VAR_LIBQT_INC}/${_gccsubdir}} \
LIBDIR_QT=${_qt_lib:-${SB_VAR_LIBQT_LIB}/${_gccsubdir}}

# set runtime path to Qt library dependencies and GCC runtime path
find ${SB_BUILD_PREFIX} -name Makefile | while read _makefile; do
  ${SB_PATH_SED} -i -e "\
s|-L\(${_libqscintilla_lib:-${SB_VAR_LIBQSCINTILLA_LIB}/${_gccsubdir}}\)|\
-L\1 ${CC_LD_RT}\1|; \
s|^\(LFLAGS.*\)|\1 ${SB_VAR_GCC_RT+-L${SB_VAR_GCC_RT_LIB}} \
${SB_VAR_FCPACKAGE+${CC_LD_RT}${SB_VAR_FCPACKAGE_LIB}} \
${SB_VAR_LIBMNG+${CC_LD_RT}${SB_VAR_LIBMNG_LIB}} \
${SB_VAR_JPEG+${CC_LD_RT}${SB_VAR_JPEG_LIB}} \
${SB_VAR_LIBPNG+${CC_LD_RT}${SB_VAR_LIBPNG_LIB}} \
${SB_VAR_LIBZ+${CC_LD_RT}${SB_VAR_LIBZ_LIB}} \
${SB_VAR_GCC_RT+${CC_LD_RT}${SB_VAR_GCC_RT_LIB}} \
${LDFLAGS+${LDFLAGS}}|;" \
  ${_makefile}
done

case "${SB_SYSTYPE}" in
*-aix*)
  ${SB_PATH_SED} -i -e "\
s|^LINK = g++|LINK = ${SB_VAR_PYTHON}/lib/python2.6/config/ld_so_aix \
g++ -Wl,-bI:${SB_VAR_PYTHON}/lib/python2.6/config/python.exp|;" \
  Qt*/Makefile ;;
esac
]]>
      </configure>

      <uninstall>
        <remove-db-entry program="qscintilla"
          module="python-2.6.7">v==2.5.1</remove-db-entry>
      </uninstall>
    </module>

    <module name="qtwebkit-gcc44"
    systype="*-linux*">
      <build-name>QtWebKit-2.2.0</build-name>

      <sources>
        <source checksum="d5033ca3a1108758fc9269c4feb68d96"
          checksum-type="md5" size="33199377"
          path="src/QtWebKit-2.2.0.tar.gz"/>
        <patch checksum="0290a991ea9cd37d86cf49b7b72c1f77"
          checksum-type="md5" size="630"
          path="src/QtWebKit-2.2.0.rh-no-Werror.patch"/>
        <patch checksum="4a87efedc7fdce37c24452fd632395f5"
          checksum-type="md5" size="38056"
          path="src/QtWebKit-2.2.0.tww.patch"/>
        <patch checksum="ae03720b17b0b8cd77ba70b41ad10670"
          checksum-type="md5" size="8999"
          path="src/QtWebKit-2.2.0.rhel5.patch"/>
        <patch checksum="f16dbf923e5c2b38bf9377c68865d1d6"
          checksum-type="md5" size="1543"
          path="src/QtWebKit-2.2.0.rename_m_slot.patch"/>
        <patch checksum="e4cf6233935d5a394e25b201714c591f"
          checksum-type="md5" size="9374"
          path="src/QtWebKit-2.2.0.rename_m_unit.patch"/>
        <patch checksum="37f0509af7def99b863da2f5e068bd75"
          checksum-type="md5" size="925"
          path="src/QtWebKit-2.2.0.explicit_yield.patch"/>
        <patch checksum="962aa1684f1b5ed4f594ae34c944fb79"
          checksum-type="md5" size="5972"
          path="src/QtWebKit-2.2.0.rename_TSNONE.patch"/>
      </sources>

      <dependencies replace="0">
        <depend program="gperf" install-name="gperf30"
          add-path="prepend" type="build">v==3.0.4</depend>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44" add-path="prepend">v&gt;=4.7.4</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="glib" var="LIBGLIB" install-name="libglib226"
          module="gcc44">v&gt;=2.26.1</depend>
        <depend program="libxml" var="LIBXML" install-name="libxml27"
          add-path="prepend" type="build">v&gt;=2.7.8</depend>
        <depend program="libxslt" var="LIBXSLT"
          install-name="libxslt11" add-path="prepend"
          type="build">v&gt;=1.1.26</depend>
        <depend program="python" add-path="prepend"
          type="build">v==2.6.7</depend>
        <depend program="gawk" add-path="prepend"
          type="build">v==3.1.8</depend>
      </dependencies>

      <script-header>
<![CDATA[
_docdir="${SB_INSTALL_PREFIX}/doc"

_gccsubdir="gcc44"

CC_LD_RT="-Wl,-rpath,"

export PKG_CONFIG_PATH="\
${SB_VAR_FCPACKAGE_LIB}/pkgconfig:\
${SB_VAR_LIBXML_LIB}/pkgconfig:\
${SB_VAR_LIBSQLITE_LIB}/pkgconfig:\
${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}}/pkgconfig:\
${SB_VAR_LIBTTF_LIB}/pkgconfig:\
${SB_VAR_LIBICONV_LIB}/pkgconfig:\
${SB_VAR_GETTEXT_LIB}/pkgconfig\
${SB_VAR_LIBXSLT+:${SB_VAR_LIBXSLT_LIB}/pkgconfig}\
${SB_VAR_LIBZ+:${SB_VAR_LIBZ_LIB}/pkgconfig}\
${SB_VAR_LIBPNG+:${SB_VAR_LIBPNG_LIB}/pkgconfig}"

if [ "${SB_VAR_PRNGD+set}" = "set" ]; then
  _prngd_socket="/var${SB_VAR_PRNGD}/pool"
fi

case "${SB_SYSTYPE}" in
x86_64-redhat-linuxe4)
  _platform="linux-g++-64" ;;
i?86-redhat-linuxe4)
  _platform="linux-g++" ;;
x86_64*-linux*)
  _platform="rhel5-g++-64" ;;
*-linux*)
  _platform="rhel5-g++" ;;
esac

PATH=${SB_VAR_LIBQT}/bin/${_gccsubdir}:$PATH

LDFLAGS="${SB_VAR_GCC_RT+${CC_LD_RT}${SB_VAR_GCC_RT_LIB}} \
${LDFLAGS+${LDFLAGS}}"

export DOTQTDIR=${SB_BUILD_PREFIX}
export QMAKESPEC=${_platform}
export QTDIR=${SB_VAR_LIBQT}

_incdir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
_libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
set -x
${SB_PATH_SED} -i -e "\
s|^#!/usr/bin/perl|#!${SB_VAR_PERL}/bin/perl|" \
Tools/Scripts/build-webkit
set +x

cat <<_EOF >>Source/WebKit.pri
INCLUDEPATH += \
${SB_VAR_FCPACKAGE_INC} \
${SB_VAR_LIBXML_INC} \
${SB_VAR_LIBSQLITE_INC} \
${_libglib_inc:-${SB_VAR_LIBGLIB_INC}} \
${SB_VAR_LIBTTF_INC}\
${SB_VAR_LIBICONV_INC} \
${SB_VAR_GETTEXT_INC} \
${SB_VAR_LIBXSLT+${SB_VAR_LIBXSLT_INC}}\
${SB_VAR_LIBZ+${SB_VAR_LIBZ_INC}}\
${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_INC}}

QMAKE_LFLAGS += \
-L${SB_VAR_FCPACKAGE_LIB} \
-L${SB_VAR_LIBXML_LIB} \
-L${SB_VAR_LIBSQLITE_LIB} \
-L${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}} \
-L${SB_VAR_LIBTTF_LIB} \
-L${SB_VAR_LIBICONV_LIB} \
-L${SB_VAR_GETTEXT_LIB} \
-L${SB_VAR_LIBXSLT+${SB_VAR_LIBXSLT_LIB}} \
-L${SB_VAR_LIBZ+${SB_VAR_LIBZ_LIB}} \
-L${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_LIB}} \
${CC_LD_RT}${SB_VAR_FCPACKAGE_LIB}:\
${SB_VAR_LIBXML_LIB}:\
${SB_VAR_LIBSQLITE_LIB}:\
${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}}:\
${SB_VAR_LIBTTF_LIB}:\
${SB_VAR_LIBICONV_LIB}:\
${SB_VAR_GETTEXT_LIB}:\
${SB_VAR_LIBXSLT+${SB_VAR_LIBXSLT_LIB}}:\
${SB_VAR_LIBZ+${SB_VAR_LIBZ_LIB}}:\
${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_LIB}}:\
${SB_VAR_GCC_RT+${SB_VAR_GCC_RT_LIB}}
_EOF

test -f "/usr/include/stdint.h" || {
mkdir -p WebKitBuild/Release/include
mkdir -p WebKitBuild/Debug/include
echo '#include <inttypes.h>' > WebKitBuild/Release/include/stdint.h
echo '#include <inttypes.h>' > WebKitBuild/Debug/include/stdint.h
}

if [ "${SB_VAR_PRNGD+set}" = "set" ]; then
  cat <<_EOF >>Source/JavaScriptCore/config.h
#define EGD_SOCKET_PATH "${_prngd_socket}"
_EOF
fi
]]>
      </configure>

      <build>
<![CDATA[
case "${SB_SYSTYPE}" in
*-osf*)
  QMAKE_CXXFLAGS="-mieee" ;;
esac

_type="--release"

set -x
Tools/Scripts/build-webkit --qt ${_type} --no-video \
--install-headers=${_incdir-${SB_INSTALL_PREFIX}/include} \
--install-libs=${_libdir-${SB_INSTALL_PREFIX_LIB}} \
${QMAKE_CXXFLAGS+QMAKE_CXXFLAGS="${QMAKE_CXXFLAGS}"} \
${QMAKE_CXXFLAGS_RELEASE+QMAKE_CXXFLAGS_RELEASE="${QMAKE_CXXFLAGS_RELEASE}"} \
${ARGS+${ARGS}}
set +x
]]>
      </build>

      <install>
<![CDATA[
${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" \
WebKitBuild/Release/lib/pkgconfig/QtWebKit.pc

gmake -C WebKitBuild/Release install
]]>
      </install>
    </module>

    <module name="apiextractor">
      <build-name>apiextractor-0.10.7</build-name>

      <sources>
        <source checksum="539be815e7fb09064fefcdb21ad44965"
          checksum-type="md5" size="272545"
          path="src/apiextractor-0.10.7.tar.bz2"/>
        <patch checksum="1ff95bc7833b16bfe1c8ede1a8c400e7"
          checksum-type="md5" size="4753"
          path="src/apiextractor-0.10.7.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="cmake" install-name="cmake28"
          add-path="prepend" type="build">v&gt;=2.8.5</depend>
        <depend program="pkgconfig" install-name="pkgconfig02"
          add-path="prepend" type="build">v&gt;=0.25</depend>
        <depend program="qt" install-name="libqt47" module="gcc44"
          append="bin/gcc44" add-path="prepend"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="libiconv" var="LIBICONV"
          install-name="libiconv113">v&gt;=1.13.1</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          add-path="prepend"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="libxml" var="LIBXML"
          install-name="libxml27">v&gt;=2.7.8</depend>
        <depend program="libxslt" var="LIBXSLT"
          install-name="libxslt11">v&gt;=1.1.26</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_gccsubdir="gcc44"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac

export PKG_CONFIG_PATH=${SB_VAR_LIBXML_LIB}/pkgconfig:\
${SB_VAR_LIBXSLT_LIB}/pkgconfig:${SB_VAR_LIBICONV_LIB}/pkgconfig

CXX=${CXX-g++} CC=${CC-gcc} cmake . \
-DCMAKE_CXX_FLAGS:STRING="${CXXFLAGS--O2}" \
-DCMAKE_C_FLAGS:STRING="${CFLAGS--O2}" \
-DCMAKE_VERBOSE_MAKEFILE:BOOL=TRUE \
-DCMAKE_INSTALL_PREFIX:PATH=${SB_INSTALL_PREFIX} \
-DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=ON \
-DCMAKE_INSTALL_RPATH="${SB_VAR_LIBQT}/lib/${_gccsubdir}:\
${SB_VAR_GCC_RT_LIB}:${SB_VAR_LIBXSLT_LIB}:${SB_VAR_LIBXML_LIB}" \
-DLIB_INSTALL_DIR:PATH="${SB_INSTALL_PREFIX}/lib/${_gccsubdir}" \
-DINCLUDE_INSTALL_DIR:PATH="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" data/apiextractor.pc
]]>
      </configure>

      <test>
<![CDATA[
LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/tests \
LIBPATH=${SB_BUILD_PREFIX}/tests \
SHLIB_PATH=${SB_BUILD_PREFIX}/tests \
gmake test
]]>
      </test>

      <uninstall>
<![CDATA[
rm -rf ${SB_INSTALL_PREFIX}/include/${_gccsubdir}/apiextractor

rm -f ${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/libapiextractor.* \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/pkgconfig/apiextractor.pc \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/cmake/ApiExtractorConfigVersion.cmake \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/cmake/ApiExtractorConfig.cmake  
 
rmdir ${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/pkgconfig || :
]]>
      </uninstall>
    </module>

    <module name="pyside-2.7.2"
    systype="*-irix*|*-linux*|*-osf*|*-solaris*">
      <build-name>pyside-qt4.7+1.0.7</build-name>

      <sources>
        <source checksum="f2a0e8b69bf49feeaea1ff682e30a7a9"
          checksum-type="md5" size="3745583"
          path="src/pyside-qt4.7+1.0.7.tar.bz2"/>
        <patch checksum="dff8cdd0ea8732db091a726c7ca9de28"
          checksum-type="md5" size="8150"
          path="src/pyside-qt4.7+1.0.7.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="cmake" install-name="cmake28"
          add-path="prepend" type="build">v&gt;=2.8.5</depend>
        <depend program="pkgconfig" install-name="pkgconfig02"
          add-path="prepend" type="build">v&gt;=0.25</depend>
        <depend program="qt" install-name="libqt47" module="gcc44"
          append="bin/gcc44" add-path="prepend"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          add-path="prepend"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="python" var="PYTHON" install-name="python27"
          add-path="prepend">v&gt;=2.7.2</depend>
        <depend program="qt" module="shiboken-2.7.2">v==4.7.4</depend>
        <depend program="qt" var="GENERATORRUNNER"
          module="generatorrunner">v==4.7.4</depend>
        <depend program="qt" var="APIEXTRACTOR"
          module="apiextractor">v==4.7.4</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_gccsubdir="gcc44"
_py_subdir="python27"

_install_prefix="${SB_INSTALL_PREFIX}/lib/${_py_subdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  _ext=".sl"
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac

: ${_ext=".so"}

export GeneratorRunner_DIR="${SB_VAR_APIEXTRACTOR}/lib/${_gccsubdir}/cmake"
export ApiExtractor_DIR="${SB_VAR_APIEXTRACTOR}/lib/${_gccsubdir}/cmake"
export Shiboken_DIR="${_install_prefix}/lib/cmake"

CXX=${CXX-g++} CC=${CC-gcc} cmake . \
-DCMAKE_CXX_COMPILER:FILEPATH=${CXX-g++} \
-DCMAKE_C_COMPILER:FILEPATH=${CC-gcc} \
-DCMAKE_CXX_FLAGS:STRING="${CXXFLAGS--O2}" \
-DCMAKE_C_FLAGS:STRING="${CFLAGS--O2}" \
-DCMAKE_VERBOSE_MAKEFILE:BOOL=TRUE \
-DCMAKE_INSTALL_PREFIX:PATH=${_install_prefix} \
-DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=ON \
-DCMAKE_INSTALL_RPATH="${SB_VAR_LIBQT}/lib/${_gccsubdir}:\
${SB_VAR_GCC_RT_LIB}:${SB_VAR_PYTHON_LIB}/python2.7/config:\
${_install_prefix}/lib" \
-DPYTHON_INCLUDE_DIR:PATH="${SB_VAR_PYTHON_INC}/python2.7" \
-DPYTHON_LIBRARY:FILEPATH="${SB_VAR_PYTHON_LIB}/python2.7/config/libpython2.7${_ext}" \
-DPYTHON_EXECUTABLE:FILEPATH="${SB_VAR_PYTHON}/bin/python" \
-DSITE_PACKAGE=${_install_prefix} \
-DLIB_INSTALL_DIR:PATH="${_install_prefix}/lib" \
-DMANDIR="${_install_prefix}/man" \
-DINCDIR:PATH="${_install_prefix}/include/shiboken"

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" libpyside/pyside.pc
]]>
      </configure>

      <test>
<![CDATA[
if [ "${DISPLAY+set}" != "set" ]; then
  echo "No DISPLAY - skipping tests"
  exit 0
fi

set -x
LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/libpyside:${_install_prefix}/lib:\
${SB_BUILD_PREFIX}/tests/pysidetest:${SB_BUILD_PREFIX}/PySide \
LIBPATH=${SB_BUILD_PREFIX}/libpyside:${_install_prefix}/lib:\
${SB_BUILD_PREFIX}/tests/pysidetest:${SB_BUILD_PREFIX}/PySide \
SHLIB_PATH=${SB_BUILD_PREFIX}/libpyside:${_install_prefix}/lib:\
${SB_BUILD_PREFIX}/tests/pysidetest:${SB_BUILD_PREFIX}/PySide \
gmake test
]]>
      </test>

      <uninstall>
<![CDATA[
rm -rf ${_install_prefix}/include/shiboken
rm -f \
${_install_prefix}/lib/cmake/Shiboken-1.0.0/ShibokenConfigVersion.cmake \
${_install_prefix}/lib/cmake/Shiboken-1.0.0/ShibokenConfig.cmake \
${_install_prefix}/lib/libshiboken.so \
${_install_prefix}/lib/libshiboken.so.1.0 \
${_install_prefix}/lib/libshiboken.so.1.0.0 \
${_install_prefix}/lib/pkgconfig/shiboken.pc \
${_install_prefix}/man/man1/shiboken.1 \
${_install_prefix}/bin/shiboken \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/generatorrunner/shiboken_generator.so

rmdir ${_install_prefix}/lib/pkgconfig || :
rmdir ${_install_prefix}/lib || :
rmdir ${_install_prefix}/man/man1 || :
rmdir ${_install_prefix}/man || :
rmdir ${_install_prefix}/bin || :
]]>
      </uninstall>
    </module>

    <module name="stlport4"
    systype="*-solaris2.[91]*">
      <dependencies replace="0">
        <depend var="GNOME" install-name="gnome232" set-var-only="1"
          type="build"/>
        <depend var="KDE" install-name="kde47" set-var-only="1"
          type="build"/>
        <depend program="glib" var="LIBGLIB"
          install-name="libglib226">v&gt;=2.26.1</depend>
      </dependencies>

      <script-header>
<![CDATA[
_datadir=${SB_INSTALL_PREFIX}/share
_docdir=${SB_INSTALL_PREFIX}/doc

_gccsubdir="gcc44"

case "${SB_SYSTYPE}" in
hppa*-hpux*|*-osf*|*-solaris2.8)
  _includedir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}" ;;
*)
  _includedir=${SB_INSTALL_PREFIX}/include
  _libdir=${SB_INSTALL_PREFIX_LIB} ;;
esac

case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
i?86*-solaris*)
  PLATFORM=solarisx86-cc59stl ;;
*-solaris*)
  PLATFORM=solaris-cc59stl ;;
esac

case "${SB_SYSTYPE}" in
*-solaris2.1?)
  # remove -R/usr/openwin/lib
  ${SB_PATH_SED} -i -e "\
s!^QMAKE_LFLAGS[	 ]*=.*!QMAKE_LFLAGS		=!; \
" mkspecs/${PLATFORM}/qmake.conf
  ;;
esac

# don't waste time creating Makefiles in examples directory
${SB_PATH_FIND} ${SB_BUILD_PREFIX}/examples \
-name \*.pro -exec rm {} \;

# s/stdint/inttypes/ on those systems that lack stdint.h
test -f /usr/include/stdint.h || {
_filelist=`cat stdint_sed_filelist`
(cd src/3rdparty
${SB_PATH_SED} -i -e "\
s|\([ 	]*#[ 	]*include.*\)stdint.h\(.*\)|\1inttypes.h\2|" \
${_filelist})
}

EXTRA_CFLAGS="${QMAKE_CFLAGS+$QMAKE_CFLAGS}" \
EXTRA_LFLAGS="${QMAKE_LFLAGS+$QMAKE_LFLAGS}" \
PKG_CONFIG_PATH="\
${SB_VAR_CUPS+${SB_VAR_CUPS_LIB}/pkgconfig:}\
${SB_VAR_DBUS+${SB_VAR_DBUS_LIB}/pkgconfig:}\
${SB_VAR_FCPACKAGE+${SB_VAR_FCPACKAGE_LIB}/pkgconfig:}\
${SB_VAR_GETTEXT+${SB_VAR_GETTEXT_LIB}/pkgconfig:}\
${SB_VAR_JPEG+${SB_VAR_JPEG_LIB}/pkgconfig:}\
${SB_VAR_LIBATK+${SB_VAR_LIBATK_LIB}/pkgconfig:}\
${SB_VAR_LIBCAIRO+${SB_VAR_LIBCAIRO_LIB}/pkgconfig:}\
${SB_VAR_LIBGDKPIXBUF+${SB_VAR_LIBGDKPIXBUF_LIB}/pkgconfig:}\
${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/pkgconfig:}\
${SB_VAR_LIBICONV+${SB_VAR_LIBICONV_LIB}/pkgconfig:}\
${SB_VAR_LIBGLIB+${SB_VAR_LIBGLIB_LIB}/pkgconfig:}\
${SB_VAR_LIBPANGO+${SB_VAR_LIBPANGO_LIB}/pkgconfig:}\
${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_LIB}/pkgconfig:}\
${SB_VAR_LIBSQLITE+${SB_VAR_LIBSQLITE_LIB}/pkgconfig:}\
${SB_VAR_LIBTIFF+${SB_VAR_LIBTIFF_LIB}/pkgconfig:}\
${SB_VAR_LIBTTF+${SB_VAR_LIBTTF_LIB}/pkgconfig:}\
${SB_VAR_LIBOPENSSL+${SB_VAR_LIBOPENSSL_LIB}/pkgconfig:}\
${SB_VAR_LIBZ+${SB_VAR_LIBZ_LIB}/pkgconfig}" \
${SHELL} ./configure -verbose -release -shared -no-separate-debug-info \
-qt-gif -system-zlib -system-libmng -system-libpng -system-libjpeg \
-system-sqlite -plugin-sql-sqlite -glib -stl -xrender -sm -dbus-linked \
-no-webkit -openssl-linked -no-3dnow -platform ${PLATFORM} \
-nomake demos -nomake docs -nomake translations \
${SB_VAR_CUPS+-I${SB_VAR_CUPS_INC}\
 -L${SB_VAR_CUPS_LIB} -R${SB_VAR_CUPS_LIB} }\
${SB_VAR_DBUS+-I${SB_VAR_DBUS_INC} \
 -L${SB_VAR_DBUS_LIB} -R${SB_VAR_DBUS_LIB} }\
${SB_VAR_FCPACKAGE+-I${SB_VAR_FCPACKAGE_INC}\
 -L${SB_VAR_FCPACKAGE_LIB} -R${SB_VAR_FCPACKAGE_LIB} }\
${SB_VAR_JPEG+-I${SB_VAR_JPEG_INC}\
 -L${SB_VAR_JPEG_LIB} -R${SB_VAR_JPEG_LIB} }\
${SB_VAR_LIBICONV+-I${SB_VAR_LIBICONV_INC}\
 -L${SB_VAR_LIBICONV_LIB} -R${SB_VAR_LIBICONV_LIB} }\
${SB_VAR_LIBGLIB+-I${SB_VAR_LIBGLIB_INC} \
 -I${SB_VAR_LIBGLIB_LIB}/include \
 -L${SB_VAR_LIBGLIB_LIB} \
 -R${SB_VAR_LIBGLIB_LIB} }\
${SB_VAR_LIBMNG+-I${SB_VAR_LIBMNG_INC}\
 -L${SB_VAR_LIBMNG_LIB} -R${SB_VAR_LIBMNG_LIB} }\
${SB_VAR_LIBPNG+-I${SB_VAR_LIBPNG_INC}\
 -L${SB_VAR_LIBPNG_LIB} -R${SB_VAR_LIBPNG_LIB} }\
${SB_VAR_LIBSQLITE+-I${SB_VAR_LIBSQLITE_INC}\
 -L${SB_VAR_LIBSQLITE_LIB} -R${SB_VAR_LIBSQLITE_LIB} }\
${SB_VAR_LIBTIFF+-I${SB_VAR_LIBTIFF_INC}\
 -L${SB_VAR_LIBTIFF_LIB} -R${SB_VAR_LIBTIFF_LIB} }\
${SB_VAR_LIBTTF+-I${SB_VAR_LIBTTF_INC} \
 -I${SB_VAR_LIBTTF_INC}/freetype2 \
 -L${SB_VAR_LIBTTF_LIB} -R${SB_VAR_LIBTTF_LIB} }\
${SB_VAR_MYSQL+-I${SB_VAR_MYSQL_INC}\
 -L${SB_VAR_MYSQL_LIB} -R${SB_VAR_MYSQL_LIB} }\
${SB_VAR_LIBOPENSSL+-I${SB_VAR_LIBOPENSSL_INC}\
 -L${SB_VAR_LIBOPENSSL_LIB} -R${SB_VAR_LIBOPENSSL_LIB} }\
${SB_VAR_PGSQL+-I${SB_VAR_PGSQL_INC}\
 -L${SB_VAR_PGSQL_LIB} -R${SB_VAR_PGSQL_LIB} }\
${SB_VAR_LIBZ+-I${SB_VAR_LIBZ_INC}\
 -L${SB_VAR_LIBZ_LIB} -R${SB_VAR_LIBZ_LIB} }\
${SB_VAR_GCC_RT+-L${SB_VAR_GCC_RT_LIB}\
 -R${SB_VAR_GCC_RT_LIB} }\
${ARGS+${ARGS}} \
-bindir ${SB_INSTALL_PREFIX}/bin/stlport4 \
-datadir "${_datadir}/stlport4" -demosdir "${_datadir}/demos" \
-docdir ${_docdir} -headerdir ${SB_INSTALL_PREFIX}/include/stlport4 \
-libdir ${SB_INSTALL_PREFIX_LIB}/stlport4 \
-importdir "${SB_INSTALL_PREFIX_LIB}/stlport4/imports" \
-plugindir ${SB_INSTALL_PREFIX_LIB}/stlport4/plugins \
-prefix ${SB_INSTALL_PREFIX} \
-translationdir "${_datadir}/translations" \
-no-webkit
#### Webkit will be in a separate .sb file

# set path to dlopen libraries
${SB_PATH_SED} -i -e "\
s!@GLIB_PATH@!${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}/lib}/!; \
s!@GNOME_PATH@!${SB_VAR_GNOME+${SB_VAR_GNOME}/lib/lib}!; \
s!@KDE_PATH@!${SB_VAR_KDE+${SB_VAR_KDE}/lib/lib}!; \
s!@GTK_PATH@!${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/lib}!" \
src/3rdparty/phonon/gstreamer/artssink.cpp \
src/3rdparty/phonon/gstreamer/mediaobject.cpp \
src/gui/styles/qgtkstyle_p.cpp
]]>
      </configure>

      <build>
<![CDATA[
LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/lib \
LIBPATH=${SB_BUILD_PREFIX}/lib \
SHLIB_PATH=${SB_BUILD_PREFIX}/lib \
DOTQTDIR=${SB_BUILD_PREFIX} \
gmake
]]>
      </build>

      <install>
<![CDATA[
gmake install

# remove platform-specific link
rm -rf ${_datadir}/stlport4/mkspecs/default

# Add rpath to .pc files
for _pc in ${SB_INSTALL_PREFIX_LIB}/stlport4/pkgconfig/*.pc; do
  ${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" ${_pc}
done

# Remove extraneous search paths and libraries from .prl files
for _prl in ${SB_INSTALL_PREFIX_LIB}/stlport4/*.prl; do
  ${SB_PATH_AWK} -v _var_printed=0 "\
/QMAKE_PRL_LIBS/ {
  for (i = 3; i <= NF; i++) {
    if (match (\$i, \"-L\") && !match (\$i, \"-L${SB_INSTALL_PREFIX}\"))
      continue
    if (\$i ~ /^-Wl|-R/)
      continue
    if (\$i ~ /^-l/ && \$i !~ /^-lQt/)
      continue

    if (\$i in _libs_printed)
      continue
    _libs_printed[\$i] = 1

    if (_var_printed == 0) {
      printf \"%s\", \"QMAKE_PRL_LIBS =\"
      _var_printed = 1
    }
    printf \" %s\", \$i
  }
  
  if (_var_printed == 1)
    printf \"\n\"

  next
}
{ print }" ${_prl} >${_prl}.new
  cp ${_prl}.new ${_prl}
  rm ${_prl}.new
done

# Remove runtime library path from .la files
${SB_PATH_SED} -i -e "\
s!${CC_LD_RT}[^ ][^ ]* !!g;" \
${SB_INSTALL_PREFIX_LIB}/stlport4/*.la
]]>
      </install>
    </module>

    <module name="sip-2.7.2">
      <build-name>sip-4.12.3</build-name>

      <sources>
        <source checksum="d0f1fa60494db04b4d115d4c2d92f79e"
          checksum-type="md5" size="725415"
          path="src/sip-4.12.3.tar.gz"/>
        <patch checksum="c81ff754f2d58519a62164ea8a2ae574"
          checksum-type="md5" size="31648"
          path="src/sip-4.12.3.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="python" var="PYTHON" install-name="python27"
          add-path="prepend">v&gt;=2.7.2</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_pysubdir="python27"

_install_prefix="${SB_INSTALL_PREFIX_LIB}/${_pysubdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-blibpath:/usr/lib"

  PLATFORM=aix-g++  ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b,"

  PLATFORM=hpuxi-g++-32 ;;
*-hpux*)
  CC_LD_RT="-Wl,+b,"

  PLATFORM=hpux-g++ ;;
*-irix*)
  CC_LD_RT="-Wl,-rpath,"

  PLATFORM=irix-g++ ;;
x86_64-redhat-linuxe4)
  CC_LD_RT="-Wl,-rpath,"


  PLATFORM=linux-g++-64 ;;
x86_64*-linux*)
  CC_LD_RT="-Wl,-rpath,"


  PLATFORM=rhel5-g++-64 ;;
i?86-redhat-linuxe4)
  CC_LD_RT="-Wl,-rpath,"


  PLATFORM=linux-g++ ;;
i?86*-linux*)
  CC_LD_RT="-Wl,-rpath,"


  PLATFORM=rhel5-g++ ;;
*-osf*)
  CC_LD_RT="-Wl,-rpath,"

  PLATFORM=tru64-g++ ;;
i?86*-solaris*)
  CC_LD_RT="-Wl,-R,"

  PLATFORM=solarisx86-g++ ;;
*-solaris*)
  CC_LD_RT="-Wl,-R,"

  PLATFORM=solaris-g++ ;;
esac

QTDIR=${SB_VAR_LIBQT} \
${SB_VAR_PYTHON}/bin/python configure.py \
-b ${_install_prefix}/bin -d ${_install_prefix} \
-e ${_install_prefix}/include -p ${PLATFORM} \
-q ${_datadir} \
INCDIR=${_qt_inc:-${SB_VAR_LIBQT_INC}/${_gccsubdir}} \
LIBDIR=${_qt_lib:-${SB_VAR_LIBQT_LIB}/${_gccsubdir}} \
CXXFLAGS+="-DQT_NO_STL -fno-exceptions"

if [ "${SB_VAR_GCC_RT+set}" = set ]; then
  find ${SB_BUILD_PREFIX} -name Makefile | while read _makefile; do
    ${SB_PATH_SED} -i -e "\
s|^\(LFLAGS.*\)|\1 ${SB_VAR_GCC_RT+-L${SB_VAR_GCC_RT_LIB} \
${CC_LD_RT}${SB_VAR_GCC_RT_LIB}} ${LDFLAGS+${LDFLAGS}}|" \
    ${_makefile}
  done
fi
]]>
      </configure>

      <install>
<![CDATA[
gmake install

${SB_PATH_CHMOD} 644 ${_install_prefix}/sipdistutils.py

# install path for Python's include.paths.d
${SB_PATH_INSTALL} -m 755 -o root -g 0 -d \
${_install_prefix}/include.paths.d
cat >${_install_prefix}/include.paths.d/99-${SB_PROG_NAME} <<_EOT_
${_install_prefix}
_EOT_
]]>
      </install>

      <uninstall>
<![CDATA[
rm ${_install_prefix}/bin/sip ${_install_prefix}/include/sip.h \
${_install_prefix}/sip*

rmdir ${_install_prefix}/bin || :
rmdir ${_install_prefix}/include || :
rmdir ${_install_prefix} || :
]]>
      </uninstall>
    </module>

    <module name="pyside-2.6.7"
    systype="*-hpux*|*-irix*|*-linux*|*-osf*|*-solaris*">
      <build-name>pyside-qt4.7+1.0.7</build-name>

      <sources>
        <source checksum="f2a0e8b69bf49feeaea1ff682e30a7a9"
          checksum-type="md5" size="3745583"
          path="src/pyside-qt4.7+1.0.7.tar.bz2"/>
        <patch checksum="dff8cdd0ea8732db091a726c7ca9de28"
          checksum-type="md5" size="8150"
          path="src/pyside-qt4.7+1.0.7.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="cmake" install-name="cmake28"
          add-path="prepend" type="build">v&gt;=2.8.5</depend>
        <depend program="pkgconfig" install-name="pkgconfig02"
          add-path="prepend" type="build">v&gt;=0.25</depend>
        <depend program="qt" install-name="libqt47" module="gcc44"
          append="bin/gcc44" add-path="prepend"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          add-path="prepend"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="python" var="PYTHON" install-name="python26"
          add-path="prepend">v&gt;=2.6.7</depend>
        <depend program="qt" module="shiboken-2.6.7">v==4.7.4</depend>
        <depend program="qt" var="GENERATORRUNNER"
          module="generatorrunner">v==4.7.4</depend>
        <depend program="qt" var="APIEXTRACTOR"
          module="apiextractor">v==4.7.4</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_gccsubdir="gcc44"
_py_subdir="python26"

_install_prefix="${SB_INSTALL_PREFIX}/lib/${_py_subdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  _ext=".sl"
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac

: ${_ext=".so"}

export GeneratorRunner_DIR="${SB_VAR_APIEXTRACTOR}/lib/${_gccsubdir}/cmake"
export ApiExtractor_DIR="${SB_VAR_APIEXTRACTOR}/lib/${_gccsubdir}/cmake"
export Shiboken_DIR="${_install_prefix}/lib/cmake"

CXX=${CXX-g++} CC=${CC-gcc} cmake . \
-DCMAKE_CXX_COMPILER:FILEPATH=${CXX-g++} \
-DCMAKE_C_COMPILER:FILEPATH=${CC-gcc} \
-DCMAKE_CXX_FLAGS:STRING="${CXXFLAGS--O2}" \
-DCMAKE_C_FLAGS:STRING="${CFLAGS--O2}" \
-DCMAKE_VERBOSE_MAKEFILE:BOOL=TRUE \
-DCMAKE_INSTALL_PREFIX:PATH=${_install_prefix} \
-DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=ON \
-DCMAKE_INSTALL_RPATH="${SB_VAR_LIBQT}/lib/${_gccsubdir}:\
${SB_VAR_GCC_RT_LIB}:${SB_VAR_PYTHON_LIB}/python2.6/config:\
${_install_prefix}/lib" \
-DPYTHON_INCLUDE_DIR:PATH="${SB_VAR_PYTHON_INC}/python2.6" \
-DPYTHON_LIBRARY:FILEPATH="${SB_VAR_PYTHON_LIB}/python2.6/config/libpython2.6${_ext}" \
-DPYTHON_EXECUTABLE:FILEPATH="${SB_VAR_PYTHON}/bin/python" \
-DSITE_PACKAGE=${_install_prefix} \
-DLIB_INSTALL_DIR:PATH="${_install_prefix}/lib" \
-DMANDIR="${_install_prefix}/man" \
-DINCDIR:PATH="${_install_prefix}/include/shiboken"

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" libpyside/pyside.pc
]]>
      </configure>

      <test>
<![CDATA[
if [ "${DISPLAY+set}" != "set" ]; then
  echo "No DISPLAY - skipping tests"
  exit 0
fi

set -x
LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/libpyside:${_install_prefix}/lib:\
${SB_BUILD_PREFIX}/tests/pysidetest:${SB_BUILD_PREFIX}/PySide \
LIBPATH=${SB_BUILD_PREFIX}/libpyside:${_install_prefix}/lib:\
${SB_BUILD_PREFIX}/tests/pysidetest:${SB_BUILD_PREFIX}/PySide \
SHLIB_PATH=${SB_BUILD_PREFIX}/libpyside:${_install_prefix}/lib:\
${SB_BUILD_PREFIX}/tests/pysidetest:${SB_BUILD_PREFIX}/PySide \
gmake test
]]>
      </test>

      <uninstall>
<![CDATA[
rm -rf ${_install_prefix}/include/shiboken
rm -f \
${_install_prefix}/lib/cmake/Shiboken-1.0.0/ShibokenConfigVersion.cmake \
${_install_prefix}/lib/cmake/Shiboken-1.0.0/ShibokenConfig.cmake \
${_install_prefix}/lib/libshiboken.so \
${_install_prefix}/lib/libshiboken.so.1.0 \
${_install_prefix}/lib/libshiboken.so.1.0.0 \
${_install_prefix}/lib/pkgconfig/shiboken.pc \
${_install_prefix}/man/man1/shiboken.1 \
${_install_prefix}/bin/shiboken \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/generatorrunner/shiboken_generator.so

rmdir ${_install_prefix}/lib/pkgconfig || :
rmdir ${_install_prefix}/lib || :
rmdir ${_install_prefix}/man/man1 || :
rmdir ${_install_prefix}/man || :
rmdir ${_install_prefix}/bin || :
]]>
      </uninstall>
    </module>

    <module name="gcc44"
    systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">
      <sources>
        <source checksum="9831cf1dfa8d0689a06c2c54c5c65aaf"
          checksum-type="md5" size="220388303"
          path="src/qt-everywhere-opensource-src-4.7.4.tar.gz"/>
        <patch checksum="48724964224a02af4b7387d322dc0324"
          checksum-type="md5" size="2790"
          path="src/qt-everywhere-opensource-src-4.7.4.rh-glib-eventloop-nullcheck.patch"/>
        <patch checksum="245432dff96201716b6d0b254dde8de9"
          checksum-type="md5" size="1778"
          path="src/qt-everywhere-opensource-src-4.7.4.rh-fix-qatomic-inline-asm.patch"/>
        <patch checksum="76e8f3aa9f0d6a4a23f6d1aa6de80a51"
          checksum-type="md5" size="3071"
          path="src/qt-everywhere-opensource-src-4.7.4.rh-cups.patch"/>
        <patch checksum="074b348eabab0147318ef5d770b427b6"
          checksum-type="md5" size="941"
          path="src/qt-everywhere-opensource-src-4.7.4.rh-bn-rendering-bz562049.patch"/>
        <patch checksum="82ea9a6da038a9d783eeef186cbb8356"
          checksum-type="md5" size="623"
          path="src/qt-everywhere-opensource-src-4.7.4.rh-bn-rendering-bz562058.patch"/>
        <patch checksum="bf59a08e7fc97786597b17ca694bf20c"
          checksum-type="md5" size="793"
          path="src/qt-everywhere-opensource-src-4.7.4.rh-indic-rendering-bz631732.patch"/>
        <patch checksum="166087e513577a0af575f6192a37226e"
          checksum-type="md5" size="1001"
          path="src/qt-everywhere-opensource-src-4.7.4.rh-indic-rendering-bz636399.patch"/>
        <patch checksum="c3cb3cb179bdec8058a118e9436f7f00"
          checksum-type="md5" size="715"
          path="src/qt-everywhere-opensource-src-4.7.4.rh-bpp24.patch"/>
        <patch checksum="33fe4f129f4cc87f30cdfd97eb916b11"
          checksum-type="md5" size="536"
          path="src/qt-everywhere-opensource-src-4.7.4.rh-qtextcursor-crash.patch"/>
        <patch checksum="aebe3080a011dc5c69b9cb1ca24acfc3"
          checksum-type="md5" size="1316"
          path="src/qt-everywhere-opensource-src-4.7.4.CVE-2010-1822.patch"/>
        <patch checksum="f3b3bf36428e91bc4f565d19ed98e859"
          checksum-type="md5" size="233578"
          path="src/qt-everywhere-opensource-src-4.7.4.tww.patch"/>
        <patch checksum="5149ac64883a2516817b79735b5346e6"
          checksum-type="md5" size="952"
          path="src/qt-everywhere-opensource-src-4.7.4.make_safe_select_safer.patch"/>
        <patch checksum="f832109f529fb3474663d9c1caea43df"
          checksum-type="md5" size="5468"
          path="src/aix_gcc.patch"
          systype="*-aix*"/>
      </sources>

      <dependencies replace="0">
        <depend var="GNOME" install-name="gnome232" set-var-only="1"
          type="build"/>
        <depend var="KDE" install-name="kde47" set-var-only="1"
          type="build"/>
        <depend program="glib" var="LIBGLIB" install-name="libglib226"
          module="gcc44">v&gt;=2.26.1</depend>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
      </dependencies>

      <script-header>
<![CDATA[
_datadir=${SB_INSTALL_PREFIX}/share
_docdir=${SB_INSTALL_PREFIX}/doc

_gccsubdir="gcc44"

case "${SB_SYSTYPE}" in
hppa*-hpux*|*-osf*|*-solaris2.8)
  _includedir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}" ;;
*)
  _includedir=${SB_INSTALL_PREFIX}/include
  _libdir=${SB_INSTALL_PREFIX_LIB} ;;
esac

case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  PLATFORM=aix-g++
  QMAKE_LFLAGS="-Wl,-brtl -Wl,-blibpath:${SB_VAR_GCC_RT_LIB}:/usr/lib"
  ARGS="-no-webkit" ;;
ia64*-hpux*)
  PLATFORM=hpuxi-g++-32
  QMAKE_LFLAGS="-Wl,+b,${SB_VAR_GCC_RT_LIB}"
  ARGS="-no-webkit" ;;
*-irix*)
  PLATFORM=irix-g++
  QMAKE_LFLAGS="-Wl,-rpath,${SB_VAR_GCC_RT_LIB}"
  ARGS="-no-webkit -no-script" ;;
x86_64-redhat-linuxe4)
  PLATFORM=linux-g++-64
  QMAKE_LFLAGS="-Wl,-rpath,${SB_VAR_GCC_RT_LIB}"
  ARGS="-xinerama -xcursor -xrandr" ;;
x86_64*-linux*)
  PLATFORM=rhel5-g++-64
  QMAKE_LFLAGS="-Wl,-rpath,${SB_VAR_GCC_RT_LIB}"
  ARGS="-xinerama -xcursor -xrandr" ;;
i?86-redhat-linuxe4)
  PLATFORM=linux-g++
  QMAKE_LFLAGS="-Wl,-rpath,${SB_VAR_GCC_RT_LIB}"
  ARGS="-xinerama -xcursor -xrandr" ;;
i?86*-linux*)
  PLATFORM=rhel5-g++
  QMAKE_LFLAGS="-Wl,-rpath,${SB_VAR_GCC_RT_LIB}"
  ARGS="-xinerama -xcursor -xrandr" ;;
*-osf*)
  PLATFORM=tru64-g++
  QMAKE_CFLAGS="-mieee"
  QMAKE_LFLAGS="-Wl,-rpath,${SB_VAR_GCC_RT_LIB}"

  ARGS="-sm -no-script -no-scripttools -no-webkit" ;;
i?86*-solaris*)
  PLATFORM=solarisx86-g++
  QMAKE_LFLAGS="-R${SB_VAR_GCC_RT_LIB}" ;;
*-solaris2.9)
  PLATFORM=solaris-g++
  QMAKE_LFLAGS="-R${SB_VAR_GCC_RT_LIB}"

  ${SB_PATH_SED} -i -e "\
s|OLD_SOLARIS_SYSTEM_WITH_GCC|1|" \
src/3rdparty/javascriptcore/JavaScriptCore/wtf/Platform.h \
src/3rdparty/webkit/JavaScriptCore/wtf/Platform.h ;;
*-solaris*)
  PLATFORM=solaris-g++
  QMAKE_LFLAGS="-R${SB_VAR_GCC_RT_LIB}" ;;
esac

# allow tests to find GCC runtime path
for _pro in endian/endiantest.pro ipv6/ipv6.pro \
ptrsize/ptrsizetest.pro \
stl/stltest.pro; do
  cat >>config.tests/unix/${_pro} <<_EOT_
QMAKE_LFLAGS += \$\$QMAKE_RPATH${SB_VAR_GCC_RT_LIB}
_EOT_
done

# don't waste time creating Makefiles in examples directory
${SB_PATH_FIND} ${SB_BUILD_PREFIX}/examples \
-name \*.pro -exec rm {} \;

test -f /usr/include/stdint.h || {
_filelist=`cat stdint_sed_filelist`
(cd src/3rdparty
${SB_PATH_SED} -i -e "\
s|\([ 	]*#[ 	]*include.*\)stdint.h\(.*\)|\1inttypes.h\2|" \
${_filelist})
}

# ensure qmake finds gcc runtime libraries
case "${SB_SYSTYPE}" in
*-aix*)
  export LIBPATH=${SB_VAR_GCC_RT_LIB} ;;
ia64*-hpux*)
  export LD_LIBRARY_PATH=${SB_VAR_GCC_RT_LIB} ;;
esac

EXTRA_CFLAGS="${QMAKE_CFLAGS+${QMAKE_CFLAGS}}" \
EXTRA_LFLAGS="${QMAKE_LFLAGS+${QMAKE_LFLAGS}}" \
PKG_CONFIG_PATH="\
${SB_VAR_CUPS+${SB_VAR_CUPS_LIB}/pkgconfig:}\
${SB_VAR_DBUS+${SB_VAR_DBUS_LIB}/pkgconfig:}\
${SB_VAR_FCPACKAGE+${SB_VAR_FCPACKAGE_LIB}/pkgconfig:}\
${SB_VAR_GETTEXT+${SB_VAR_GETTEXT_LIB}/pkgconfig:}\
${SB_VAR_JPEG+${SB_VAR_JPEG_LIB}/pkgconfig:}\
${SB_VAR_LIBATK+${SB_VAR_LIBATK_LIB}/pkgconfig:}\
${SB_VAR_LIBCAIRO+${SB_VAR_LIBCAIRO_LIB}/pkgconfig:}\
${SB_VAR_LIBGDKPIXBUF+${SB_VAR_LIBGDKPIXBUF_LIB}/pkgconfig:}\
${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/pkgconfig:}\
${SB_VAR_LIBICONV+${SB_VAR_LIBICONV_LIB}/pkgconfig:}\
${SB_VAR_LIBGLIB+${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}/pkgconfig:}\
${SB_VAR_LIBPANGO+${SB_VAR_LIBPANGO_LIB}/pkgconfig:}\
${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_LIB}/pkgconfig:}\
${SB_VAR_LIBSQLITE+${SB_VAR_LIBSQLITE_LIB}/pkgconfig:}\
${SB_VAR_LIBTIFF+${SB_VAR_LIBTIFF_LIB}/pkgconfig:}\
${SB_VAR_LIBTTF+${SB_VAR_LIBTTF_LIB}/pkgconfig:}\
${SB_VAR_LIBOPENSSL+${SB_VAR_LIBOPENSSL_LIB}/pkgconfig:}\
${SB_VAR_LIBZ+${SB_VAR_LIBZ_LIB}/pkgconfig}" \
${SHELL} ./configure -verbose -release -shared -no-separate-debug-info \
-qt-gif -system-zlib -system-libmng -system-libpng -system-libjpeg \
-system-sqlite -plugin-sql-sqlite -glib -stl -xrender -sm -dbus-linked \
-openssl-linked -no-3dnow -platform ${PLATFORM} \
-nomake demos -nomake docs -nomake translations \
${SB_VAR_CUPS+-I${SB_VAR_CUPS_INC} -L${SB_VAR_CUPS_LIB} }\
${SB_VAR_DBUS+-I${SB_VAR_DBUS_INC} -L${SB_VAR_DBUS_LIB} }\
${SB_VAR_FCPACKAGE+-I${SB_VAR_FCPACKAGE_INC}\
 -L${SB_VAR_FCPACKAGE_LIB} }\
${SB_VAR_JPEG+-I${SB_VAR_JPEG_INC} -L${SB_VAR_JPEG_LIB} }\
${SB_VAR_LIBICONV+-I${SB_VAR_LIBICONV_INC} -L${SB_VAR_LIBICONV_LIB} }\
${SB_VAR_LIBGLIB+-I${SB_VAR_LIBGLIB_INC}/${_gccsubdir} \
 -I${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}/include \
 -L${SB_VAR_LIBGLIB_LIB} -R${SB_VAR_LIBGLIB_LIB} }\
${SB_VAR_LIBMNG+-I${SB_VAR_LIBMNG_INC} -L${SB_VAR_LIBMNG_LIB} }\
${SB_VAR_LIBPNG+-I${SB_VAR_LIBPNG_INC} -L${SB_VAR_LIBPNG_LIB} }\
${SB_VAR_LIBSQLITE+-I${SB_VAR_LIBSQLITE_INC}\
 -L${SB_VAR_LIBSQLITE_LIB} }\
${SB_VAR_LIBTIFF+-I${SB_VAR_LIBTIFF_INC} -L${SB_VAR_LIBTIFF_LIB} }\
${SB_VAR_LIBTTF+-I${SB_VAR_LIBTTF_INC} \
 -I${SB_VAR_LIBTTF_INC}/freetype2 \
 -L${SB_VAR_LIBTTF_LIB} }\
${SB_VAR_MYSQL+-I${SB_VAR_MYSQL_INC} -L${SB_VAR_MYSQL_LIB} }\
${SB_VAR_LIBOPENSSL+-I${SB_VAR_LIBOPENSSL_INC} -L${SB_VAR_LIBOPENSSL_LIB} }\
${SB_VAR_PGSQL+-I${SB_VAR_PGSQL_INC} -L${SB_VAR_PGSQL_LIB} }\
${SB_VAR_LIBZ+-I${SB_VAR_LIBZ_INC} -L${SB_VAR_LIBZ_LIB} }\
${SB_VAR_GCC_RT+-L${SB_VAR_GCC_RT_LIB}} \
-R${SB_VAR_CUPS+${SB_VAR_CUPS_LIB}:}\
${SB_VAR_DBUS+${SB_VAR_DBUS_LIB}:}\
${SB_VAR_FCPACKAGE+${SB_VAR_FCPACKAGE_LIB}:}\
${SB_VAR_JPEG+${SB_VAR_JPEG_LIB}:}\
${SB_VAR_LIBICONV+${SB_VAR_LIBICONV_LIB}:}\
${SB_VAR_LIBGLIB+${SB_VAR_LIBGLIB_LIB}:}\
${SB_VAR_LIBMNG+${SB_VAR_LIBMNG_LIB}:}\
${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_LIB}:}\
${SB_VAR_LIBSQLITE+${SB_VAR_LIBSQLITE_LIB}:}\
${SB_VAR_LIBTIFF+${SB_VAR_LIBTIFF_LIB}:}\
${SB_VAR_LIBTTF+${SB_VAR_LIBTTF_LIB}:}\
${SB_VAR_MYSQL+${SB_VAR_MYSQL_LIB}:}\
${SB_VAR_LIBOPENSSL+${SB_VAR_LIBOPENSSL_LIB}:}\
${SB_VAR_PGSQL+${SB_VAR_PGSQL_LIB}:}\
${SB_VAR_LIBZ+${SB_VAR_LIBZ_LIB}:}\
${SB_VAR_GCC_RT+${SB_VAR_GCC_RT_LIB}} \
${ARGS+${ARGS}} \
-bindir ${SB_INSTALL_PREFIX}/bin/${_gccsubdir} \
-datadir "${_datadir}/${_gccsubdir}" -demosdir "${_datadir}/demos" \
-docdir ${_docdir} -headerdir ${SB_INSTALL_PREFIX}/include/${_gccsubdir} \
-libdir ${SB_INSTALL_PREFIX_LIB}/${_gccsubdir} \
-importdir "${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}/imports" \
-plugindir ${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}/plugins \
-prefix ${SB_INSTALL_PREFIX} \
-translationdir "${_datadir}/translations" \
-no-webkit
#### Webkit will be in a separate .sb file

set -x
# rebuild qmake with correct blibpath
case "${SB_SYSTYPE}" in
*-aix*)
  ${SB_PATH_SED} -i -e "\
s!^QMAKE_LFLAGS.*!QMAKE_LFLAGS = -Wl,-brtl \
-Wl,-blibpath:${SB_VAR_GCC_RT_LIB}:/usr/lib!;" qmake/Makefile
  chmod u+w src/corelib/global/qconfig.h
  cp src/corelib/global/qconfig.h src/corelib/global/qconfig.h.orig
  cp src/corelib/global/qconfig.h.qmake src/corelib/global/qconfig.h
  (cd ${SB_BUILD_PREFIX}/qmake
   rm ${SB_BUILD_PREFIX}/bin/qmake
   gmake ${SB_BUILD_PREFIX}/bin/qmake)
  cp src/corelib/global/qconfig.h.orig src/corelib/global/qconfig.h ;;
ia64*-hpux*)
  if [ "${SB_VAR_GCC_RT+set}" = set ]; then
    ${SB_PATH_SED} -i -e "\
s!^QMAKE_LFLAGS.*!QMAKE_LFLAGS = -Wl,+b,${SB_VAR_GCC_RT_LIB}!;" \
    qmake/Makefile
    chmod u+w src/corelib/global/qconfig.h
    cp src/corelib/global/qconfig.h src/corelib/global/qconfig.h.orig
    cp src/corelib/global/qconfig.h.qmake src/corelib/global/qconfig.h
    (cd ${SB_BUILD_PREFIX}/qmake
     rm ${SB_BUILD_PREFIX}/bin/qmake
     gmake ${SB_BUILD_PREFIX}/bin/qmake)
    cp src/corelib/global/qconfig.h.orig src/corelib/global/qconfig.h
  fi ;;
esac

# set path to dlopen libraries
${SB_PATH_SED} -i -e "\
s!@GLIB_PATH@!${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}/lib}/!; \
s!@GNOME_PATH@!${SB_VAR_GNOME+${SB_VAR_GNOME}/lib/lib}!; \
s!@KDE_PATH@!${SB_VAR_KDE+${SB_VAR_KDE}/lib/lib}!; \
s!@GTK_PATH@!${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/lib}!" \
src/3rdparty/phonon/gstreamer/artssink.cpp \
src/3rdparty/phonon/gstreamer/mediaobject.cpp \
src/gui/styles/qgtkstyle_p.cpp
]]>
      </configure>

      <build>
<![CDATA[
LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/lib \
LIBPATH=${SB_BUILD_PREFIX}/lib \
SHLIB_PATH=${SB_BUILD_PREFIX}/lib \
DOTQTDIR=${SB_BUILD_PREFIX} \
gmake
]]>
      </build>

      <install>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac

gmake install

# remove platform-specific link
rm -rf ${_datadir}/${_gccsubdir}/mkspecs/default

# Add rpath to .pc files
for _pc in ${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}/pkgconfig/*.pc; do
  ${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" ${_pc}
done

# Remove extraneous search paths and libraries from .prl files
for _prl in ${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}/*.prl; do
  ${SB_PATH_AWK} -v _var_printed=0 "\
/QMAKE_PRL_LIBS/ {
  for (i = 3; i <= NF; i++) {
    if (match (\$i, \"-L\") && !match (\$i, \"-L${SB_INSTALL_PREFIX}\"))
      continue
    if (\$i ~ /^-Wl|-R/)
      continue
    if (\$i ~ /^-l/ && \$i !~ /^-lQt/)
      continue

    if (\$i in _libs_printed)
      continue
    _libs_printed[\$i] = 1

    if (_var_printed == 0) {
      printf \"%s\", \"QMAKE_PRL_LIBS =\"
      _var_printed = 1
    }
    printf \" %s\", \$i
  }
  
  if (_var_printed == 1)
    printf \"\n\"

  next
}
{ print }" ${_prl} >${_prl}.new
  cp ${_prl}.new ${_prl}
  rm ${_prl}.new
done

# Remove runtime library path from .la files
${SB_PATH_SED} -i -e "\
s!${CC_LD_RT}[^ ][^ ]* !!g;" \
${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}/*.la
]]>
      </install>

      <uninstall>
<![CDATA[
rm -rf ${SB_INSTALL_PREFIX}/bin/${_gccsubdir}
rm -rf ${SB_INSTALL_PREFIX}/include/${_gccsubdir}
rm -rf ${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}
rm -rf ${SB_INSTALL_PREFIX}/plugins/${_gccsubdir}
]]>
      </uninstall>
    </module>

    <module name="shiboken-2.6.7"
    systype="*-aix*|*-hpux*|*-irix*|*-linux*|*-osf*|*-solaris*">
      <build-name>shiboken-1.0.7</build-name>

      <sources>
        <source checksum="b932c66a49145894c0af556030ac90ac"
          checksum-type="md5" size="597317"
          path="src/shiboken-1.0.7.tar.bz2"/>
        <patch checksum="5838a091199dc7021a400672ce73dcd0"
          checksum-type="md5" size="9379"
          path="src/shiboken-1.0.7.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="cmake" install-name="cmake28"
          add-path="prepend" type="build">v&gt;=2.8.5</depend>
        <depend program="pkgconfig" install-name="pkgconfig02"
          add-path="prepend" type="build">v&gt;=0.25</depend>
        <depend program="qt" install-name="libqt47" module="gcc44"
          append="bin/gcc44" add-path="prepend"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          add-path="prepend"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="python" var="PYTHON" install-name="python26"
          add-path="prepend">v&gt;=2.6.7</depend>
        <depend program="qt" var="GENERATORRUNNER"
          module="generatorrunner">v==4.7.4</depend>
        <depend program="qt" var="APIEXTRACTOR"
          module="apiextractor">v==4.7.4</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_gccsubdir="gcc44"
_py_subdir="python26"

_install_prefix="${SB_INSTALL_PREFIX}/lib/${_py_subdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CFLAGS="-O0 -ftrapv"
  CXXFLAGS="-O0 -ftrapv"
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CFLAGS="-O0 -ftrapv"
  CXXFLAGS="-O0 -ftrapv"
  _ext=".sl"
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac

: ${_ext=".so"}

export GeneratorRunner_DIR="${SB_VAR_APIEXTRACTOR}/lib/${_gccsubdir}/cmake"
export ApiExtractor_DIR="${SB_VAR_APIEXTRACTOR}/lib/${_gccsubdir}/cmake"

CXX=${CXX-g++} CC=${CC-gcc} \
cmake . \
-DCMAKE_CXX_COMPILER:FILEPATH=${CXX-g++} \
-DCMAKE_C_COMPILER:FILEPATH=${CC-gcc} \
-DCMAKE_CXX_FLAGS:STRING="${CXXFLAGS--O2}" \
-DCMAKE_C_FLAGS:STRING="${CFLAGS--O2}" \
-DCMAKE_VERBOSE_MAKEFILE:BOOL=TRUE \
-DCMAKE_INSTALL_PREFIX:PATH=${_install_prefix} \
-DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=ON \
-DCMAKE_INSTALL_RPATH="${SB_VAR_LIBQT}/lib/${_gccsubdir}:\
${SB_VAR_GCC_RT_LIB}:${SB_VAR_PYTHON_LIB}/python2.6/config" \
-DPYTHON_INCLUDE_DIR:PATH="${SB_VAR_PYTHON_INC}/python2.6" \
-DPYTHON_LIBRARY:FILEPATH="${SB_VAR_PYTHON_LIB}/python2.6/config/libpython2.6${_ext}" \
-DPYTHON_EXECUTABLE:FILEPATH="${SB_VAR_PYTHON}/bin/python" \
-DLIB_INSTALL_DIR:PATH="${_install_prefix}/lib" \
-DMANDIR="${_install_prefix}/man" \
-DINCDIR:PATH="${_install_prefix}/include/shiboken"

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" data/shiboken.pc
]]>
      </configure>

      <test>
<![CDATA[
LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/generator:\
${SB_BUILD_PREFIX}/tests:${SB_BUILD_PREFIX}/libshiboken \
LIBPATH=${SB_BUILD_PREFIX}/generator:\
${SB_BUILD_PREFIX}/tests:${SB_BUILD_PREFIX}/libshiboken \
SHLIB_PATH=${SB_BUILD_PREFIX}/generator:\
${SB_BUILD_PREFIX}/tests:${SB_BUILD_PREFIX}/libshiboken \
gmake test
]]>
      </test>

      <uninstall>
<![CDATA[
rm -rf ${_install_prefix}/include/shiboken
rm -f \
${_install_prefix}/lib/cmake/Shiboken-1.0.0/ShibokenConfigVersion.cmake \
${_install_prefix}/lib/cmake/Shiboken-1.0.0/ShibokenConfig.cmake \
${_install_prefix}/lib/libshiboken.so \
${_install_prefix}/lib/libshiboken.so.1.0 \
${_install_prefix}/lib/libshiboken.so.1.0.0 \
${_install_prefix}/lib/pkgconfig/shiboken.pc \
${_install_prefix}/man/man1/shiboken.1 \
${_install_prefix}/bin/shiboken \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/generatorrunner/shiboken_generator.so

rmdir ${_install_prefix}/lib/pkgconfig || :
rmdir ${_install_prefix}/lib || :
rmdir ${_install_prefix}/man/man1 || :
rmdir ${_install_prefix}/man || :
rmdir ${_install_prefix}/bin || :
]]>
      </uninstall>
    </module>

    <module name="PyQt-2.7.2">
      <build-name>PyQt-x11-gpl-4.8.4</build-name>

      <sources>
        <source checksum="97c5dc1042feb5b3fe20baabad055af1"
          checksum-type="md5" size="9799081"
          path="src/PyQt-x11-gpl-4.8.4.tar.gz"/>
        <patch checksum="2ef22326bf553fff6119b0da51b6d5da"
          checksum-type="md5" size="5303"
          path="src/PyQt-x11-gpl-4.8.4.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend program="qt" install-name="libqt47" module="gcc44"
          append="bin/gcc44" add-path="prepend"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" install-name="libqt47" add-path="prepend"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend program="qscintilla" var="LIBQSCINTILLA"
          install-name="libqscintilla25"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=2.5.1</depend>
        <depend program="qscintilla" var="LIBQSCINTILLA"
          install-name="libqscintilla25" module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=2.5.1</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="fcpackage" var="FCPACKAGE"
          install-name="fcpackage28">v&gt;=2.8</depend>
        <depend program="jpeg" var="JPEG"
          install-name="libjpeg8">v&gt;=8b</depend>
        <depend program="libiconv" var="LIBICONV"
          install-name="libiconv113">v&gt;=1.13.1</depend>
        <depend program="libmng" var="LIBMNG"
          install-name="libmng10">v&gt;=1.0.10</depend>
        <depend program="libpng" var="LIBPNG"
          install-name="libpng14">v&gt;=1.4.4</depend>
        <depend program="zlib" var="LIBZ"
          install-name="libz12">v&gt;=1.2.5</depend>
        <depend program="python" var="PYTHON" install-name="python27"
          add-path="prepend">v&gt;=2.7.2</depend>
        <depend program="qt" module="sip-2.7.2">v==4.7.4</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_pysubdir="python27"

_install_prefix="${SB_INSTALL_PREFIX_LIB}/${_pysubdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-bbigtoc -Wl,-brtl -Wl,-blibpath:/usr/lib"

  PLATFORM=aix-g++ ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b,"

  PLATFORM=hpuxi-g++-32 ;;
*-hpux*)
  CC_LD_RT="-Wl,+b,"

  PLATFORM=hpux-g++ ;;
*-irix*)
  CC_LD_RT="-Wl,-rpath,"

  PLATFORM=irix-g++ ;;
x86_64-redhat-linuxe4)
  CC_LD_RT=-Wl,-rpath,


  PLATFORM=linux-g++-64 ;;
x86_64*-linux*)
  CC_LD_RT=-Wl,-rpath,


  PLATFORM=rhel5-g++-64 ;;
i?86-redhat-linuxe4)
  CC_LD_RT=-Wl,-rpath,


  PLATFORM=linux-g++ ;;
i?86*-linux*)
  CC_LD_RT="-Wl,-rpath,"

  PLATFORM=rhel5-g++ ;;
*-osf*)
  CC_LD_RT="-Wl,-rpath,"

  PLATFORM=tru64-g++ ;;
i?86*-solaris*)
  CC_LD_RT="-Wl,-R,"


  PLATFORM=solarisx86-g++ ;;
*-solaris*)
  CC_LD_RT="-Wl,-R,"


  PLATFORM=solaris-g++ ;;
esac


# Allow executables to run during configure stage
case "${SB_SYSTYPE}" in
ia64*-hpux*)
  export LD_LIBRARY_PATH=${SB_VAR_GCC_RT_LIB} ;;
*-aix*)
  export LIBPATH=${SB_VAR_GCC_RT_LIB} ;;
esac

${SB_PATH_SED} -i -e "\
s!@QMAKE_LFLAGS@!\$\$QMAKE_RPATH${SB_VAR_GCC_RT_LIB}:\
${SB_VAR_LIBZ_LIB}:${SB_VAR_LIBICONV_LIB}!;" configure.py

QMAKESPEC=${PLATFORM} PYTHONPATH=${_install_prefix} \
${SB_VAR_PYTHON}/bin/python configure.py \
-w -b ${_install_prefix}/bin -d ${_install_prefix} \
-v ${_install_prefix}/share --no-qsci-api \
INCDIR_QT=${_qt_inc:-${SB_VAR_LIBQT_INC}/${_gccsubdir}} \
LIBDIR_QT=${_qt_lib:-${SB_VAR_LIBQT_LIB}/${_gccsubdir}}

# set runtime path to Qt library dependencies and GCC runtime path
find ${SB_BUILD_PREFIX} -name Makefile | while read _makefile; do
  ${SB_PATH_SED} -i -e "\
s|-L\(${_libqscintilla_lib:-${SB_VAR_LIBQSCINTILLA_LIB}/${_gccsubdir}}\)|\
-L\1 ${CC_LD_RT}\1|; \
s|^\(LFLAGS.*\)|\1 ${SB_VAR_GCC_RT+-L${SB_VAR_GCC_RT_LIB}} \
${SB_VAR_FCPACKAGE+${CC_LD_RT}${SB_VAR_FCPACKAGE_LIB}} \
${SB_VAR_LIBMNG+${CC_LD_RT}${SB_VAR_LIBMNG_LIB}} \
${SB_VAR_JPEG+${CC_LD_RT}${SB_VAR_JPEG_LIB}} \
${SB_VAR_LIBPNG+${CC_LD_RT}${SB_VAR_LIBPNG_LIB}} \
${SB_VAR_LIBZ+${CC_LD_RT}${SB_VAR_LIBZ_LIB}} \
${SB_VAR_GCC_RT+${CC_LD_RT}${SB_VAR_GCC_RT_LIB}} \
${LDFLAGS+${LDFLAGS}}|;" \
  ${_makefile}
done

case "${SB_SYSTYPE}" in
*-aix*)
  ${SB_PATH_SED} -i -e "\
s|^LINK = g++|LINK = ${SB_VAR_PYTHON}/lib/python2.7/config/ld_so_aix \
g++ -Wl,-bI:${SB_VAR_PYTHON}/lib/python2.7/config/python.exp|;" \
  Qt*/Makefile ;;
esac
]]>
      </configure>

      <uninstall>
        <remove-db-entry program="qscintilla"
          module="python-2.7.2">v==2.5.1</remove-db-entry>
      </uninstall>
    </module>

    <module name="qtwebkit"
    systype="*-aix*|hppa*-hpux*|*-linux*|*-osf*|*-solaris*">
      <build-name>QtWebKit-2.2.0</build-name>

      <sources>
        <source checksum="d5033ca3a1108758fc9269c4feb68d96"
          checksum-type="md5" size="33199377"
          path="src/QtWebKit-2.2.0.tar.gz"/>
        <patch checksum="0290a991ea9cd37d86cf49b7b72c1f77"
          checksum-type="md5" size="630"
          path="src/QtWebKit-2.2.0.rh-no-Werror.patch"/>
        <patch checksum="4a87efedc7fdce37c24452fd632395f5"
          checksum-type="md5" size="38056"
          path="src/QtWebKit-2.2.0.tww.patch"/>
        <patch checksum="ae03720b17b0b8cd77ba70b41ad10670"
          checksum-type="md5" size="8999"
          path="src/QtWebKit-2.2.0.rhel5.patch"/>
        <patch checksum="f16dbf923e5c2b38bf9377c68865d1d6"
          checksum-type="md5" size="1543"
          path="src/QtWebKit-2.2.0.rename_m_slot.patch"/>
        <patch checksum="e4cf6233935d5a394e25b201714c591f"
          checksum-type="md5" size="9374"
          path="src/QtWebKit-2.2.0.rename_m_unit.patch"/>
        <patch checksum="37f0509af7def99b863da2f5e068bd75"
          checksum-type="md5" size="925"
          path="src/QtWebKit-2.2.0.explicit_yield.patch"/>
        <patch checksum="962aa1684f1b5ed4f594ae34c944fb79"
          checksum-type="md5" size="5972"
          path="src/QtWebKit-2.2.0.rename_TSNONE.patch"/>
      </sources>

      <dependencies replace="0">
        <depend program="gperf" install-name="gperf30"
          add-path="prepend" type="build">v&gt;=3.0.4</depend>
        <depend program="gcc" install-name="gcc44" add-path="prepend"
          systype="!*-linux*">v&gt;=4.4.6</depend>
        <depend program="glib" var="LIBGLIB" install-name="libglib226"
          systype="*-linux*">v&gt;=2.26.1</depend>
        <depend program="glib" var="LIBGLIB" install-name="libglib226"
          module="gcc44" systype="!*-linux*">v&gt;=2.26.1</depend>
        <depend program="libxml" var="LIBXML" install-name="libxml27"
          add-path="prepend" type="build">v&gt;=2.7.8</depend>
        <depend program="libxslt" var="LIBXSLT"
          install-name="libxslt11" add-path="prepend"
          type="build">v&gt;=1.1.26</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44" add-path="prepend"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          add-path="prepend"
          systype="hppa*-hpux*|*-linux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend var="GCC_RT" install-name="gcc44r"
          systype="*-aix*|*-hpux*|*-irix*|*-osf*|*-solaris*"/>
        <depend program="prngd" var="PRNGD"
          systype="*-hpux11.[01]*|*-osf*">v&gt;=0.9.25</depend>
        <depend program="python" add-path="prepend"
          type="build">v==2.6.7</depend>
        <depend program="gawk" add-path="prepend"
          type="build">v==3.1.8</depend>
      </dependencies>

      <script-header>
<![CDATA[
_docdir="${SB_INSTALL_PREFIX}/doc"

_gccsubdir="gcc44"

case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-blibpath:/usr/lib" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris2.[89])
  CC_LD_RT="-Wl,-R," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac

export PKG_CONFIG_PATH="\
${SB_VAR_FCPACKAGE_LIB}/pkgconfig:\
${SB_VAR_LIBXML_LIB}/pkgconfig:\
${SB_VAR_LIBSQLITE_LIB}/pkgconfig:\
${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}}/pkgconfig:\
${SB_VAR_LIBTTF_LIB}/pkgconfig:\
${SB_VAR_LIBICONV_LIB}/pkgconfig:\
${SB_VAR_GETTEXT_LIB}/pkgconfig\
${SB_VAR_LIBXSLT+:${SB_VAR_LIBXSLT_LIB}/pkgconfig}\
${SB_VAR_LIBZ+:${SB_VAR_LIBZ_LIB}/pkgconfig}\
${SB_VAR_LIBPNG+:${SB_VAR_LIBPNG_LIB}/pkgconfig}"

if [ "${SB_VAR_PRNGD+set}" = "set" ]; then
  _prngd_socket="/var${SB_VAR_PRNGD}/pool"
fi

case "${SB_SYSTYPE}" in
*-aix*)
  _platform="aix-g++"

  _incdir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}"
  _libglib_inc="${SB_VAR_LIBGLIB_INC}/${_gccsubdir}"
  _libglib_lib="${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}" ;;
ia64*-hpux*)
  _platform="hpuxi-g++-32"

  _incdir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}"
  _libglib_inc="${SB_VAR_LIBGLIB_INC}/${_gccsubdir}"
  _libglib_lib="${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}" ;;
*-hpux*)
  _platform="hpux-g++"

  _incdir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}"
  _libglib_inc="${SB_VAR_LIBGLIB_INC}/${_gccsubdir}"
  _libglib_lib="${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}" ;;
*-irix*)
  _platform="irix-g++"

  _incdir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}"
  _libglib_inc="${SB_VAR_LIBGLIB_INC}/${_gccsubdir}"
  _libglib_lib="${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}" ;;
x86_64-redhat-linuxe4)
  _platform="linux-g++-64" ;;
i?86-redhat-linuxe4)
  _platform="linux-g++" ;;
x86_64*-linux*)
  _platform="rhel5-g++-64" ;;
*-linux*)
  _platform="rhel5-g++" ;;
*-osf*)
  _platform="tru64-g++"

  _incdir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}"
  _libglib_inc="${SB_VAR_LIBGLIB_INC}/${_gccsubdir}"
  _libglib_lib="${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}" ;;
i?86*-solaris*)
  _platform="solarisx86-g++"

  _incdir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}"
  _libglib_inc="${SB_VAR_LIBGLIB_INC}/${_gccsubdir}"
  _libglib_lib="${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}" ;;
*-solaris2.[89])
  _platform="solaris-g++"

${SB_PATH_SED} -i -e "\
s|undef OLD_SOLARIS_SYSTEM_WITH_GCC|\
define OLD_SOLARIS_SYSTEM_WITH_GCC 1|" \
Source/JavaScriptCore/wtf/Platform.h

  _incdir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}"
  _libglib_inc="${SB_VAR_LIBGLIB_INC}/${_gccsubdir}"
  _libglib_lib="${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}" ;;
*-solaris*)
  _platform="solaris-g++"

  _incdir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}"
  _libglib_inc="${SB_VAR_LIBGLIB_INC}/${_gccsubdir}"
  _libglib_lib="${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}" ;;
esac

case "${SB_SYSTYPE}" in
*-aix*|*-hpux*|*-irix*|*-osf*|*-solaris*)
  _libdir_subdir=${_gccsubdir}
  _libqt_inc="${SB_VAR_LIBQT_INC}/${_gccsubdir}"
  _libqt_lib="${SB_VAR_LIBQT_LIB}/${_gccsubdir}"
  _libqt_uic_path="${SB_VAR_LIBQT}/bin/${_gccsubdir}/uic" ;;
esac

case "${SB_SYSTYPE}" in
*-aix*|ia64*-hpux*|*-irix*|*-solaris2.[91]*)
  PATH=${SB_VAR_LIBQT}/bin/${_gccsubdir}:$PATH ;;
esac

LDFLAGS="${SB_VAR_GCC_RT+${CC_LD_RT}${SB_VAR_GCC_RT_LIB}} \
${LDFLAGS+${LDFLAGS}}"

export DOTQTDIR=${SB_BUILD_PREFIX}
export QMAKESPEC=${_platform}
export QTDIR=${SB_VAR_LIBQT}
]]>
      </script-header>

      <configure>
<![CDATA[
set -x
${SB_PATH_SED} -i -e "\
s|^#!/usr/bin/perl|#!${SB_VAR_PERL}/bin/perl|" \
Tools/Scripts/build-webkit
set +x

cat <<_EOF >>Source/WebKit.pri
INCLUDEPATH += \
${SB_VAR_FCPACKAGE_INC} \
${SB_VAR_LIBXML_INC} \
${SB_VAR_LIBSQLITE_INC} \
${_libglib_inc:-${SB_VAR_LIBGLIB_INC}} \
${SB_VAR_LIBTTF_INC}\
${SB_VAR_LIBICONV_INC} \
${SB_VAR_GETTEXT_INC} \
${SB_VAR_LIBXSLT+${SB_VAR_LIBXSLT_INC}}\
${SB_VAR_LIBZ+${SB_VAR_LIBZ_INC}}\
${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_INC}}

QMAKE_LFLAGS += \
-L${SB_VAR_FCPACKAGE_LIB} \
-L${SB_VAR_LIBXML_LIB} \
-L${SB_VAR_LIBSQLITE_LIB} \
-L${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}} \
-L${SB_VAR_LIBTTF_LIB} \
-L${SB_VAR_LIBICONV_LIB} \
-L${SB_VAR_GETTEXT_LIB} \
-L${SB_VAR_LIBXSLT+${SB_VAR_LIBXSLT_LIB}} \
-L${SB_VAR_LIBZ+${SB_VAR_LIBZ_LIB}} \
-L${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_LIB}} \
${CC_LD_RT}${SB_VAR_FCPACKAGE_LIB}:\
${SB_VAR_LIBXML_LIB}:\
${SB_VAR_LIBSQLITE_LIB}:\
${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}}:\
${SB_VAR_LIBTTF_LIB}:\
${SB_VAR_LIBICONV_LIB}:\
${SB_VAR_GETTEXT_LIB}:\
${SB_VAR_LIBXSLT+${SB_VAR_LIBXSLT_LIB}}:\
${SB_VAR_LIBZ+${SB_VAR_LIBZ_LIB}}:\
${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_LIB}}:\
${SB_VAR_GCC_RT+${SB_VAR_GCC_RT_LIB}}
_EOF

test -f "/usr/include/stdint.h" || {
mkdir -p WebKitBuild/Release/include
mkdir -p WebKitBuild/Debug/include
echo '#include <inttypes.h>' > WebKitBuild/Release/include/stdint.h
echo '#include <inttypes.h>' > WebKitBuild/Debug/include/stdint.h
}

if [ "${SB_VAR_PRNGD+set}" = "set" ]; then
  cat <<_EOF >>Source/JavaScriptCore/config.h
#define EGD_SOCKET_PATH "${_prngd_socket}"
_EOF
fi
]]>
      </configure>

      <build>
<![CDATA[
case "${SB_SYSTYPE}" in
*-osf*)
  QMAKE_CXXFLAGS="-mieee" ;;
esac

_type="--release"

set -x
Tools/Scripts/build-webkit --qt ${_type} --no-video \
--install-headers=${_incdir-${SB_INSTALL_PREFIX}/include} \
--install-libs=${_libdir-${SB_INSTALL_PREFIX_LIB}} \
${QMAKE_CXXFLAGS+QMAKE_CXXFLAGS="${QMAKE_CXXFLAGS}"} \
${QMAKE_CXXFLAGS_RELEASE+QMAKE_CXXFLAGS_RELEASE="${QMAKE_CXXFLAGS_RELEASE}"} \
${ARGS+${ARGS}}
set +x
]]>
      </build>

      <install>
<![CDATA[
${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" \
WebKitBuild/Release/lib/pkgconfig/QtWebKit.pc

gmake -C WebKitBuild/Release install
]]>
      </install>
    </module>

    <module name="rtti"
    systype="*-aix*">
      <dependencies replace="0">
        <depend var="GNOME" install-name="gnome232" set-var-only="1"
          type="build"/>
        <depend var="KDE" install-name="kde47" set-var-only="1"
          type="build"/>
        <depend program="glib" var="LIBGLIB"
          install-name="libglib226">v&gt;=2.26.1</depend>
      </dependencies>

      <script-header>
<![CDATA[
_datadir=${SB_INSTALL_PREFIX}/share
_docdir=${SB_INSTALL_PREFIX}/doc

_gccsubdir="gcc44"

case "${SB_SYSTYPE}" in
hppa*-hpux*|*-osf*|*-solaris2.8)
  _includedir="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"
  _libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}" ;;
*)
  _includedir=${SB_INSTALL_PREFIX}/include
  _libdir=${SB_INSTALL_PREFIX_LIB} ;;
esac

case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  PLATFORM=aix-xlcrtti ;;
esac

# don't waste time creating Makefiles in examples directory
${SB_PATH_FIND} ${SB_BUILD_PREFIX}/examples \
-name \*.pro -exec rm {} \;

# s/stdint/inttypes/ on those systems that lack stdint.h
test -f /usr/include/stdint.h || {
_filelist=`cat stdint_sed_filelist`
(cd src/3rdparty
${SB_PATH_SED} -i -e "\
s|\([ 	]*#[ 	]*include.*\)stdint.h\(.*\)|\1inttypes.h\2|" \
${_filelist})
}

EXTRA_CFLAGS="${QMAKE_CFLAGS+$QMAKE_CFLAGS}" \
EXTRA_LFLAGS="${QMAKE_LFLAGS+$QMAKE_LFLAGS}" \
PKG_CONFIG_PATH="\
${SB_VAR_CUPS+${SB_VAR_CUPS_LIB}/pkgconfig:}\
${SB_VAR_DBUS+${SB_VAR_DBUS_LIB}/pkgconfig:}\
${SB_VAR_FCPACKAGE+${SB_VAR_FCPACKAGE_LIB}/pkgconfig:}\
${SB_VAR_GETTEXT+${SB_VAR_GETTEXT_LIB}/pkgconfig:}\
${SB_VAR_JPEG+${SB_VAR_JPEG_LIB}/pkgconfig:}\
${SB_VAR_LIBATK+${SB_VAR_LIBATK_LIB}/pkgconfig:}\
${SB_VAR_LIBCAIRO+${SB_VAR_LIBCAIRO_LIB}/pkgconfig:}\
${SB_VAR_LIBGDKPIXBUF+${SB_VAR_LIBGDKPIXBUF_LIB}/pkgconfig:}\
${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/pkgconfig:}\
${SB_VAR_LIBICONV+${SB_VAR_LIBICONV_LIB}/pkgconfig:}\
${SB_VAR_LIBGLIB+${SB_VAR_LIBGLIB_LIB}/pkgconfig:}\
${SB_VAR_LIBPANGO+${SB_VAR_LIBPANGO_LIB}/pkgconfig:}\
${SB_VAR_LIBPNG+${SB_VAR_LIBPNG_LIB}/pkgconfig:}\
${SB_VAR_LIBSQLITE+${SB_VAR_LIBSQLITE_LIB}/pkgconfig:}\
${SB_VAR_LIBTIFF+${SB_VAR_LIBTIFF_LIB}/pkgconfig:}\
${SB_VAR_LIBTTF+${SB_VAR_LIBTTF_LIB}/pkgconfig:}\
${SB_VAR_LIBOPENSSL+${SB_VAR_LIBOPENSSL_LIB}/pkgconfig:}\
${SB_VAR_LIBZ+${SB_VAR_LIBZ_LIB}/pkgconfig}" \
${SHELL} ./configure -verbose -release -shared -no-separate-debug-info \
-qt-gif -system-zlib -system-libmng -system-libpng -system-libjpeg \
-system-sqlite -plugin-sql-sqlite -glib -stl -xrender -sm -dbus-linked \
-openssl-linked -no-3dnow -platform ${PLATFORM} \
-nomake demos -nomake docs -nomake translations \
${SB_VAR_CUPS+-I${SB_VAR_CUPS_INC}\
 -L${SB_VAR_CUPS_LIB} -R${SB_VAR_CUPS_LIB} }\
${SB_VAR_DBUS+-I${SB_VAR_DBUS_INC} \
 -L${SB_VAR_DBUS_LIB} -R${SB_VAR_DBUS_LIB} }\
${SB_VAR_FCPACKAGE+-I${SB_VAR_FCPACKAGE_INC}\
 -L${SB_VAR_FCPACKAGE_LIB} -R${SB_VAR_FCPACKAGE_LIB} }\
${SB_VAR_JPEG+-I${SB_VAR_JPEG_INC}\
 -L${SB_VAR_JPEG_LIB} -R${SB_VAR_JPEG_LIB} }\
${SB_VAR_LIBICONV+-I${SB_VAR_LIBICONV_INC}\
 -L${SB_VAR_LIBICONV_LIB} -R${SB_VAR_LIBICONV_LIB} }\
${SB_VAR_LIBGLIB+-I${SB_VAR_LIBGLIB_INC} \
 -I${SB_VAR_LIBGLIB_LIB}/include \
 -L${SB_VAR_LIBGLIB_LIB} \
 -R${SB_VAR_LIBGLIB_LIB} }\
${SB_VAR_LIBMNG+-I${SB_VAR_LIBMNG_INC}\
 -L${SB_VAR_LIBMNG_LIB} -R${SB_VAR_LIBMNG_LIB} }\
${SB_VAR_LIBPNG+-I${SB_VAR_LIBPNG_INC}\
 -L${SB_VAR_LIBPNG_LIB} -R${SB_VAR_LIBPNG_LIB} }\
${SB_VAR_LIBSQLITE+-I${SB_VAR_LIBSQLITE_INC}\
 -L${SB_VAR_LIBSQLITE_LIB} -R${SB_VAR_LIBSQLITE_LIB} }\
${SB_VAR_LIBTIFF+-I${SB_VAR_LIBTIFF_INC}\
 -L${SB_VAR_LIBTIFF_LIB} -R${SB_VAR_LIBTIFF_LIB} }\
${SB_VAR_LIBTTF+-I${SB_VAR_LIBTTF_INC} \
 -I${SB_VAR_LIBTTF_INC}/freetype2 \
 -L${SB_VAR_LIBTTF_LIB} -R${SB_VAR_LIBTTF_LIB} }\
${SB_VAR_MYSQL+-I${SB_VAR_MYSQL_INC}\
 -L${SB_VAR_MYSQL_LIB} -R${SB_VAR_MYSQL_LIB} }\
${SB_VAR_LIBOPENSSL+-I${SB_VAR_LIBOPENSSL_INC}\
 -L${SB_VAR_LIBOPENSSL_LIB} -R${SB_VAR_LIBOPENSSL_LIB} }\
${SB_VAR_PGSQL+-I${SB_VAR_PGSQL_INC}\
 -L${SB_VAR_PGSQL_LIB} -R${SB_VAR_PGSQL_LIB} }\
${SB_VAR_LIBZ+-I${SB_VAR_LIBZ_INC}\
 -L${SB_VAR_LIBZ_LIB} -R${SB_VAR_LIBZ_LIB} }\
${SB_VAR_GCC_RT+-L${SB_VAR_GCC_RT_LIB}\
 -R${SB_VAR_GCC_RT_LIB} }\
${ARGS+${ARGS}} \
-bindir ${SB_INSTALL_PREFIX}/bin/rtti \
-datadir "${_datadir}/rtti" -demosdir "${_datadir}/demos" \
-docdir ${_docdir} -headerdir ${SB_INSTALL_PREFIX}/include/rtti \
-libdir ${SB_INSTALL_PREFIX_LIB}/rtti \
-importdir "${SB_INSTALL_PREFIX_LIB}/rtti/imports" \
-plugindir ${SB_INSTALL_PREFIX_LIB}/rtti/plugins \
-prefix ${SB_INSTALL_PREFIX} \
-translationdir "${_datadir}/translations" \
-no-webkit
#### Webkit will be in a separate .sb file

# set path to dlopen libraries
${SB_PATH_SED} -i -e "\
s!@GLIB_PATH@!${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}/lib}/!; \
s!@GNOME_PATH@!${SB_VAR_GNOME+${SB_VAR_GNOME}/lib/lib}!; \
s!@KDE_PATH@!${SB_VAR_KDE+${SB_VAR_KDE}/lib/lib}!; \
s!@GTK_PATH@!${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/lib}!" \
src/3rdparty/phonon/gstreamer/artssink.cpp \
src/3rdparty/phonon/gstreamer/mediaobject.cpp \
src/gui/styles/qgtkstyle_p.cpp
]]>
      </configure>

      <build>
<![CDATA[
LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/lib \
LIBPATH=${SB_BUILD_PREFIX}/lib \
SHLIB_PATH=${SB_BUILD_PREFIX}/lib \
DOTQTDIR=${SB_BUILD_PREFIX} \
gmake
]]>
      </build>

      <install>
<![CDATA[
gmake install

# remove platform-specific link
rm -rf ${_datadir}/rtti/mkspecs/default

# Add rpath to .pc files
for _pc in ${SB_INSTALL_PREFIX_LIB}/rtti/pkgconfig/*.pc; do
  ${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" ${_pc}
done

# Remove extraneous search paths and libraries from .prl files
for _prl in ${SB_INSTALL_PREFIX_LIB}/rtti/*.prl; do
  ${SB_PATH_AWK} -v _var_printed=0 "\
/QMAKE_PRL_LIBS/ {
  for (i = 3; i <= NF; i++) {
    if (match (\$i, \"-L\") && !match (\$i, \"-L${SB_INSTALL_PREFIX}\"))
      continue
    if (\$i ~ /^-Wl|-R/)
      continue
    if (\$i ~ /^-l/ && \$i !~ /^-lQt/)
      continue

    if (\$i in _libs_printed)
      continue
    _libs_printed[\$i] = 1

    if (_var_printed == 0) {
      printf \"%s\", \"QMAKE_PRL_LIBS =\"
      _var_printed = 1
    }
    printf \" %s\", \$i
  }
  
  if (_var_printed == 1)
    printf \"\n\"

  next
}
{ print }" ${_prl} >${_prl}.new
  cp ${_prl}.new ${_prl}
  rm ${_prl}.new
done

# Remove runtime library path from .la files
${SB_PATH_SED} -i -e "\
s!${CC_LD_RT}[^ ][^ ]* !!g;" \
${SB_INSTALL_PREFIX_LIB}/rtti/*.la
]]>
      </install>
    </module>

    <module name="sip-2.6.7">
      <build-name>sip-4.12.3</build-name>

      <sources>
        <source checksum="d0f1fa60494db04b4d115d4c2d92f79e"
          checksum-type="md5" size="725415"
          path="src/sip-4.12.3.tar.gz"/>
        <patch checksum="c81ff754f2d58519a62164ea8a2ae574"
          checksum-type="md5" size="31648"
          path="src/sip-4.12.3.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="python" var="PYTHON" install-name="python26"
          add-path="prepend">v&gt;=2.6.7</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_pysubdir="python26"

_install_prefix="${SB_INSTALL_PREFIX_LIB}/${_pysubdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-blibpath:/usr/lib"

  PLATFORM=aix-g++  ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b,"

  PLATFORM=hpuxi-g++-32 ;;
*-hpux*)
  CC_LD_RT="-Wl,+b,"

  PLATFORM=hpux-g++ ;;
*-irix*)
  CC_LD_RT="-Wl,-rpath,"

  PLATFORM=irix-g++ ;;
x86_64-redhat-linuxe4)
  CC_LD_RT="-Wl,-rpath,"


  PLATFORM=linux-g++-64 ;;
x86_64*-linux*)
  CC_LD_RT="-Wl,-rpath,"


  PLATFORM=rhel5-g++-64 ;;
i?86-redhat-linuxe4)
  CC_LD_RT="-Wl,-rpath,"


  PLATFORM=linux-g++ ;;
i?86*-linux*)
  CC_LD_RT="-Wl,-rpath,"


  PLATFORM=rhel5-g++ ;;
*-osf*)
  CC_LD_RT="-Wl,-rpath,"

  PLATFORM=tru64-g++ ;;
i?86*-solaris*)
  CC_LD_RT="-Wl,-R,"

  PLATFORM=solarisx86-g++ ;;
*-solaris*)
  CC_LD_RT="-Wl,-R,"

  PLATFORM=solaris-g++ ;;
esac

QTDIR=${SB_VAR_LIBQT} \
${SB_VAR_PYTHON}/bin/python configure.py \
-b ${_install_prefix}/bin -d ${_install_prefix} \
-e ${_install_prefix}/include -p ${PLATFORM} \
-q ${_datadir} \
INCDIR=${_qt_inc:-${SB_VAR_LIBQT_INC}/${_gccsubdir}} \
LIBDIR=${_qt_lib:-${SB_VAR_LIBQT_LIB}/${_gccsubdir}} \
CXXFLAGS+="-DQT_NO_STL -fno-exceptions"

if [ "${SB_VAR_GCC_RT+set}" = set ]; then
  find ${SB_BUILD_PREFIX} -name Makefile | while read _makefile; do
    ${SB_PATH_SED} -i -e "\
s|^\(LFLAGS.*\)|\1 ${SB_VAR_GCC_RT+-L${SB_VAR_GCC_RT_LIB} \
${CC_LD_RT}${SB_VAR_GCC_RT_LIB}} ${LDFLAGS+${LDFLAGS}}|" \
    ${_makefile}
  done
fi
]]>
      </configure>

      <install>
<![CDATA[
gmake install

${SB_PATH_CHMOD} 644 ${_install_prefix}/sipdistutils.py

# install path for Python's include.paths.d
${SB_PATH_INSTALL} -m 755 -o root -g 0 -d \
${_install_prefix}/include.paths.d
cat >${_install_prefix}/include.paths.d/99-${SB_PROG_NAME} <<_EOT_
${_install_prefix}
_EOT_
]]>
      </install>

      <uninstall>
<![CDATA[
rm ${_install_prefix}/bin/sip ${_install_prefix}/include/sip.h \
${_install_prefix}/sip*

rmdir ${_install_prefix}/bin || :
rmdir ${_install_prefix}/include || :
rmdir ${_install_prefix} || :
]]>
      </uninstall>
    </module>

    <module name="generatorrunner">
      <build-name>generatorrunner-0.6.13</build-name>

      <sources>
        <source checksum="ca214a017404bb1f4775aebcb98e373e"
          checksum-type="md5" size="281209"
          path="src/generatorrunner-0.6.13.tar.bz2"/>
        <patch checksum="0aaf1030a9fe18f18cd166fde535399c"
          checksum-type="md5" size="5601"
          path="src/generatorrunner-0.6.13.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="cmake" install-name="cmake28"
          add-path="prepend" type="build">v&gt;=2.8.5</depend>
        <depend program="pkgconfig" install-name="pkgconfig02"
          add-path="prepend" type="build">v&gt;=0.25</depend>
        <depend program="qt" install-name="libqt47" module="gcc44"
          append="bin/gcc44" add-path="prepend"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          add-path="prepend"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="APIEXTRACTOR"
          module="apiextractor">v==4.7.4</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_gccsubdir="gcc44"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib"
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac

export ApiExtractor_DIR="${SB_VAR_APIEXTRACTOR}/lib/${_gccsubdir}/cmake"

CXX=${CXX-g++} CC=${CC-gcc} \
LDFLAGS="${LDFLAGS+${LDFLAGS}}" \
cmake . \
-DCMAKE_CXX_COMPILER:FILEPATH=${CXX-g++} \
-DCMAKE_C_COMPILER:FILEPATH=${CC-gcc} \
-DCMAKE_CXX_FLAGS:STRING="${CXXFLAGS--O2}" \
-DCMAKE_C_FLAGS:STRING="${CFLAGS--O2}" \
-DCMAKE_VERBOSE_MAKEFILE:BOOL=TRUE \
-DCMAKE_INSTALL_PREFIX:PATH=${SB_INSTALL_PREFIX} \
-DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=ON \
-DCMAKE_INSTALL_RPATH="${SB_VAR_LIBQT}/lib/${_gccsubdir}:\
${SB_VAR_GCC_RT_LIB}" \
-DLIB_INSTALL_DIR:PATH="${SB_INSTALL_PREFIX}/lib/${_gccsubdir}" \
-DMANDIR="${SB_INSTALL_PREFIX}/man" \
-DGENERATORRUNNER_INC_DIR:PATH="${SB_INSTALL_PREFIX}/include/${_gccsubdir}"

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" data/generatorrunner.pc
]]>
      </configure>

      <test auto-include="0">
<![CDATA[
LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/generators/qtdoc:${SB_BUILD_PREFIX} \
LIBPATH=${SB_BUILD_PREFIX}/generators/qtdoc:${SB_BUILD_PREFIX} \
SHLIB_PATH=${SB_BUILD_PREFIX}/generators/qtdoc:${SB_BUILD_PREFIX} \
gmake test
]]>
      </test>

      <uninstall>
<![CDATA[
rm -f \
${SB_INSTALL_PREFIX}/man/man1/generatorrunner.1 \
${SB_INSTALL_PREFIX}/man/man1/docgenerator.1 \
${SB_INSTALL_PREFIX}/include/${_gccsubdir}/generator.h \
${SB_INSTALL_PREFIX}/include/${_gccsubdir}/generatorrunnermacros.h \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/cmake/GeneratorRunner*.cmake \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/generatorrunner/qtdoc_generator.so \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/generatorrunner/libqtdoc_generator.so \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/libgenrunner.so* \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/pkgconfig/generatorrunner.pc \
${SB_INSTALL_PREFIX}/bin/docgenerator \
${SB_INSTALL_PREFIX}/bin/generatorrunner

rmdir ${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/pkgconfig || :
rmdir ${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/generatorrunner || :
rmdir ${SB_INSTALL_PREFIX}/man/man1 || :
rmdir ${SB_INSTALL_PREFIX}/man || :
rmdir ${SB_INSTALL_PREFIX}/bin || :
]]>
      </uninstall>
    </module>

    <module name="shiboken-2.7.2"
    systype="*-aix*|*-hpux*|*-irix*|*-linux*|*-osf*|*-solaris*">
      <build-name>shiboken-1.0.7</build-name>

      <sources>
        <source checksum="b932c66a49145894c0af556030ac90ac"
          checksum-type="md5" size="597317"
          path="src/shiboken-1.0.7.tar.bz2"/>
        <patch checksum="5838a091199dc7021a400672ce73dcd0"
          checksum-type="md5" size="9379"
          path="src/shiboken-1.0.7.tww.patch"/>
      </sources>

      <dependencies>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="cmake" install-name="cmake28"
          add-path="prepend" type="build">v&gt;=2.8.5</depend>
        <depend program="pkgconfig" install-name="pkgconfig02"
          add-path="prepend" type="build">v&gt;=0.25</depend>
        <depend program="qt" install-name="libqt47" module="gcc44"
          append="bin/gcc44" add-path="prepend"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          add-path="prepend"
          systype="hppa*-hpux*|*-osf*|*-solaris2.8">v&gt;=4.7.4</depend>
        <depend program="qt" var="LIBQT" install-name="libqt47"
          module="gcc44"
          systype="*-aix*|ia64*-hpux*|*-irix*|*-linux*|*-solaris2.[91]*">v&gt;=4.7.4</depend>
        <depend program="python" var="PYTHON" install-name="python27"
          add-path="prepend">v&gt;=2.7.2</depend>
        <depend program="qt" var="GENERATORRUNNER"
          module="generatorrunner">v==4.7.4</depend>
        <depend program="qt" var="APIEXTRACTOR"
          module="apiextractor">v==4.7.4</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_gccsubdir="gcc44"
_py_subdir="python27"

_install_prefix="${SB_INSTALL_PREFIX}/lib/${_py_subdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CFLAGS="-O0 -ftrapv"
  CXXFLAGS="-O0 -ftrapv"
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b," ;;
*-hpux*)
  CFLAGS="-O0 -ftrapv"
  CXXFLAGS="-O0 -ftrapv"
  _ext=".sl"
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*|*-linux*|*-osf*)
  CC_LD_RT="-Wl,-rpath," ;;
*-solaris*)
  CC_LD_RT="-R" ;;
esac

: ${_ext=".so"}

export GeneratorRunner_DIR="${SB_VAR_APIEXTRACTOR}/lib/${_gccsubdir}/cmake"
export ApiExtractor_DIR="${SB_VAR_APIEXTRACTOR}/lib/${_gccsubdir}/cmake"

CXX=${CXX-g++} CC=${CC-gcc} \
cmake . \
-DCMAKE_CXX_COMPILER:FILEPATH=${CXX-g++} \
-DCMAKE_C_COMPILER:FILEPATH=${CC-gcc} \
-DCMAKE_CXX_FLAGS:STRING="${CXXFLAGS--O2}" \
-DCMAKE_C_FLAGS:STRING="${CFLAGS--O2}" \
-DCMAKE_VERBOSE_MAKEFILE:BOOL=TRUE \
-DCMAKE_INSTALL_PREFIX:PATH=${_install_prefix} \
-DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=ON \
-DCMAKE_INSTALL_RPATH="${SB_VAR_LIBQT}/lib/${_gccsubdir}:\
${SB_VAR_GCC_RT_LIB}:${SB_VAR_PYTHON_LIB}/python2.7/config" \
-DPYTHON_INCLUDE_DIR:PATH="${SB_VAR_PYTHON_INC}/python2.7" \
-DPYTHON_LIBRARY:FILEPATH="${SB_VAR_PYTHON_LIB}/python2.7/config/libpython2.7${_ext}" \
-DPYTHON_EXECUTABLE:FILEPATH="${SB_VAR_PYTHON}/bin/python" \
-DLIB_INSTALL_DIR:PATH="${_install_prefix}/lib" \
-DMANDIR="${_install_prefix}/man" \
-DINCDIR:PATH="${_install_prefix}/include/shiboken"

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" data/shiboken.pc
]]>
      </configure>

      <test>
<![CDATA[
LD_LIBRARY_PATH=${SB_BUILD_PREFIX}/generator:\
${SB_BUILD_PREFIX}/tests:${SB_BUILD_PREFIX}/libshiboken \
LIBPATH=${SB_BUILD_PREFIX}/generator:\
${SB_BUILD_PREFIX}/tests:${SB_BUILD_PREFIX}/libshiboken \
SHLIB_PATH=${SB_BUILD_PREFIX}/generator:\
${SB_BUILD_PREFIX}/tests:${SB_BUILD_PREFIX}/libshiboken \
gmake test
]]>
      </test>

      <uninstall>
<![CDATA[
rm -rf ${_install_prefix}/include/shiboken
rm -f \
${_install_prefix}/lib/cmake/Shiboken-1.0.0/ShibokenConfigVersion.cmake \
${_install_prefix}/lib/cmake/Shiboken-1.0.0/ShibokenConfig.cmake \
${_install_prefix}/lib/libshiboken.so \
${_install_prefix}/lib/libshiboken.so.1.0 \
${_install_prefix}/lib/libshiboken.so.1.0.0 \
${_install_prefix}/lib/pkgconfig/shiboken.pc \
${_install_prefix}/man/man1/shiboken.1 \
${_install_prefix}/bin/shiboken \
${SB_INSTALL_PREFIX}/lib/${_gccsubdir}/generatorrunner/shiboken_generator.so

rmdir ${_install_prefix}/lib/pkgconfig || :
rmdir ${_install_prefix}/lib || :
rmdir ${_install_prefix}/man/man1 || :
rmdir ${_install_prefix}/man || :
rmdir ${_install_prefix}/bin || :
]]>
      </uninstall>
    </module>

    <licenses>
      <license path="lgpl-2.1.license"/>

      <license path="gpl-3.license"/>

      <license>
        <para>In addition, as a special exception, Nokia gives
permission to link the code of its release of Qt with the OpenSSL
project's "OpenSSL" library (or modified versions of it that use the
same license as the "OpenSSL" library), and distribute the linked
executables.  You must comply with the GNU General Public License
versions 2.0 or 3.0 in all respects for all of the code used other
than the "OpenSSL" code.  If you modify this file, you may extend this
exception to your version of the file, but you are not obligated to do
so.  If you do not wish to do so, delete this exception statement from
your version of this file.</para>
      </license>

      <license module="PyQt" path="gpl-2.license"/>

      <license module="PyQt" path="gpl-3.license"/>

      <license module="PyQt">
        <para>Riverbank GPL Exception version 1.1</para>
        <para>Additional rights granted beyond the GPL (the
"Exception").</para>
        <para>As a special exception to the terms and conditions of
version 2.0 of the GPL, Riverbank hereby grants you the rights
described below, provided you agree to the terms and conditions in
this Exception, including its obligations and restrictions on
use.</para>
        <para>Nothing in this Exception gives you or anyone else the
right to change the licensing terms of the PyQt Open Source
Edition.</para>
        <para>Below, "Licensed Software" shall refer to the software
licensed under the GPL and this exception.</para>
        <orderedlist>
          <item><para>The right to use Open Source Licenses not
compatible with the GNU General Public License: Your software
(hereafter referred to as "Your Software") may import the Licensed
Software and/or distribute binaries of Your Software that imports the
Licensed Software, provided that:</para>
          <orderedlist type="upper-alpha">
            <item><para>Your Software is licensed under one of the
following licenses:</para>
            <screen>
License name                            Version(s)/Copyright Date
Academic Free License                   2.0, 2.1, 3.0
Apache Software License                 1.0 or 1.1
Apache License                          2.0
Apple Public Source License             2.0
Artistic license                        From Perl 5.8.0
BSD license                             "July 22 1999"
Common Development and
  Distribution License (CDDL)           1.0
Common Public License                   1.0
Eclipse Public License                  1.0
GNU Library or "Lesser"
General Public License (LGPL)           2.0 or 2.1 
Jabber Open Source License              1.0
MIT License                             (as set forth in the addendum file)
Mozilla Public License (MPL)            1.0 or 1.1
Open Software License                   2.0, 3.0
OpenSSL license (with original
SSLeay license)                         "2003" ("1998")
PHP License                             3.0
Python license (CNRI Python License)    (as set forth in the addendum file)
Python Software Foundation License      2.1.1
Q Public License                        v1.0
Sleepycat License                       "1999"
W3C License                             "2001"
X11 License                             X11R6.6
Zlib/libpng License                     (as set forth in the addendum file)
Zope Public License                     2.0, 2.1

(Licenses without a specific version number or date are reproduced
in the file GPL_Exception_Addendum.txt in your source package).
            </screen>
            <para>and</para></item>
            <item><para>You must, on request, make a complete package
including the complete source code of Your Software (as defined in the
GNU General Public License version 2, section 3, but excluding
anything excluded by the special exception in the same section)
available to Riverbank under the same license as that granted to other
recipients of the source code of Your Software.</para>
            <para>and</para></item>
            <item><para>Your or any other contributor's rights
to:</para>
            <orderedlist type="lower-roman">
              <item><para>distribute the source code of Your Software to
anyone for any purpose;</para>
              <para>and</para></item>
              <item><para>publicly discuss the development project for Your Software and its goals in any form and in any forum</para></item>
            </orderedlist>
            <para>are not prohibited by any legal instrument,
including but not limited to contracts, non-disclosure agreements, and
employee contracts.</para></item>
          </orderedlist></item>
          <item><para>The right to link non-Open Source applications with
pre-installed versions of the Licensed Software: You may link
applications with binary pre-installed versions of the Licensed
Software, provided that such applications have been developed and are
deployed in accordance with the terms and conditions of the PyQt
Commercial License Agreement.</para></item>
        </orderedlist>
      </license>

      <license module="sip" path="gpl-2.license"/>

      <license module="sip" path="gpl-3.license"/>

      <license module="sip">
        <para>RIVERBANK COMPUTING LIMITED LICENSE AGREEMENT FOR
SIP</para>
        <orderedlist>
          <item><para>This LICENSE AGREEMENT is between Riverbank
Computing Limited ("Riverbank"), and the Individual or Organization
("Licensee") accessing and otherwise using SIP software in source or
binary form and its associated documentation.  SIP comprises a
software tool for generating Python bindings for software C and C++
libraries, and a Python extension module used at runtime by those
generated bindings.</para></item>
          <item><para>Subject to the terms and conditions of this
License Agreement, Riverbank hereby grants Licensee a nonexclusive,
royalty-free, world-wide license to reproduce, analyze, test, perform
and/or display publicly, prepare derivative works, distribute, and
otherwise use SIP alone or in any derivative version, provided,
however, that Riverbank's License Agreement and Riverbank's notice of
copyright, e.g., "Copyright (c) 2011 Riverbank Computing Limited; All
Rights Reserved" are retained in SIP alone or in any derivative
version prepared by Licensee.</para></item>
          <item><para>In the event Licensee prepares a derivative work
that is based on or incorporates SIP or any part thereof, and wants to
make the derivative work available to others as provided herein, then
Licensee hereby agrees to include in any such work a brief summary of
the changes made to SIP.</para></item>
          <item><para>Licensee may not use SIP to generate Python
bindings for any C or C++ library for which bindings are already
provided by Riverbank.</para></item>
          <item><para>Riverbank is making SIP available to Licensee on
an "AS IS" basis. RIVERBANK MAKES NO REPRESENTATIONS OR WARRANTIES,
EXPRESS OR IMPLIED.  BY WAY OF EXAMPLE, BUT NOT LIMITATION, RIVERBANK
MAKES NO AND DISCLAIMS ANY REPRESENTATION OR WARRANTY OF
MERCHANTABILITY OR FITNESS FOR ANY PARTICULAR PURPOSE OR THAT THE USE
OF SIP WILL NOT INFRINGE ANY THIRD PARTY RIGHTS.</para></item>
          <item><para>RIVERBANK SHALL NOT BE LIABLE TO LICENSEE OR ANY
OTHER USERS OF SIP FOR ANY INCIDENTAL, SPECIAL, OR CONSEQUENTIAL
DAMAGES OR LOSS AS A RESULT OF MODIFYING, DISTRIBUTING, OR OTHERWISE
USING SIP, OR ANY DERIVATIVE THEREOF, EVEN IF ADVISED OF THE
POSSIBILITY THEREOF.</para></item>
          <item><para>This License Agreement will automatically
terminate upon a material breach of its terms and
conditions.</para></item>
          <item><para>Nothing in this License Agreement shall be
deemed to create any relationship of agency, partnership, or joint
venture between Riverbank and Licensee.  This License Agreement does
not grant permission to use Riverbank trademarks or trade name in a
trademark sense to endorse or promote products or services of
Licensee, or any third party.</para></item>
          <item><para>By copying, installing or otherwise using SIP,
Licensee agrees to be bound by the terms and conditions of this
License Agreement.</para></item>
        </orderedlist>
      </license>

      <license module="generatorrunner" path="gpl-2.license"/>

      <license module="apiextractor" path="gpl-2.license"/>

      <license module="shiboken" path="gpl-2.license"/>

      <license module="pyside-tools" path="gpl-2.license"/>

      <license module="pyside-tools">
        <para>Copyright (c) 2005,2006 Torsten Marek
shlomme@gmx.net.</para>
        <para>All rights reserved.</para>
        <para>The software module is double-licensed under the revised
BSD and GPL licenses.</para>
        <para>Redistribution and use in source and binary forms, with
or without modification, are permitted provided that the following
conditions are met:</para>
        <orderedlist>
          <item><para>Redistributions of source code must retain the
above copyright notice, this list of conditions and the following
disclaimer.</para></item>
          <item><para>Redistributions in binary form must reproduce
the above copyright notice, this list of conditions and the following
disclaimer in the documentation and/or other materials provided with
the distribution.</para></item>
          <item><para>Neither the name of the University nor the names
of its contributors may be used to endorse or promote products derived
from this software without specific prior written
permission.</para></item>
        </orderedlist>

        <para>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS
IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</para>
      </license>

      <license module="pyside-qt4" path="lgpl-2.1.license"/>
    </licenses>

    <notes>
      <note type="build">
        <para>On HP-UX/IA64, IRIX 6.5, RHEL, Solaris 9 and 10, Qt is
built with the vendor C++ compiler. Versions of the library compiled
with v4.4.6 of the GNU C++ compiler are available in the
<command>${SB_INSTALL_PREFIX}/lib/gcc44</command> directory.</para>
      </note>

      <note type="usage">
        <para>The PyQt, apiextractor, generatorrunner, shiboken,
pyside, and sip Python modules are available in the following
directories:</para>
        <screen>
${SB_INSTALL_PREFIX}/lib/python26    # Python 2.6.7
${SB_INSTALL_PREFIX}/lib/python27    # Python 2.7.2
        </screen>

        <para>The directory is automatically added to the correct
Python include.paths.d directory by the postinstall script.</para>
      </note>
    </notes>
  </program>
</programs>

<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="hoe" version="2.12.3" revision="1">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <sources>
      <source checksum="4b6d74a9f2f1a32c4ca90534a8d49011"
        checksum-type="md5" size="122368"
        path="src/hoe-2.12.3.gem"
        noop="1" var="GEMFILE"/>
      <patch checksum="445ae9a54437e9a001541e74da6ca9bf"
        checksum-type="md5" size="528"
        path="src/fc-rdoctask-rescue.patch"
        noop="1" var="RDOCTASK_RESCUE"/>
      <patch checksum="2ef751a789bf14fdf4e856a69bc3e6e5"
        checksum-type="md5" size="423"
        path="src/fc-rescue-missing-Manifest.patch"
        noop="1" var="RESCUE_MANIFEST"/>
    </sources>

    <dependencies>
      <depend program="patch" install-name="patch26"
        add-path="prepend" type="build">v&gt;=2.6.1</depend>
    </dependencies>

    <script-header>
<![CDATA[
_bindir="${SB_INSTALL_PREFIX}/bin"
_prefixdir="${SB_INSTALL_PREFIX}/vendor/lib"
]]>
    </script-header>

    <build>
<![CDATA[
# Extract to build_prefix for testing
gem install --local -V --force --no-rdoc --no-ri \
--install-dir=${SB_BUILD_PREFIX} ${SB_SRC_GEMFILE}
]]>
    </build>

    <install>
<![CDATA[
gem install --local -V --rdoc --ri --bindir=${_bindir} \
--install-dir="${_prefixdir}/${_rbsubdir}" ${SB_SRC_GEMFILE}

# apply paches
(cd ${_prefixdir}/${_rbsubdir}/gems/${SB_PROG_NAME}-${SB_PROG_VER}
 gpatch -p0 < ${SB_SRC_RDOCTASK_RESCUE}
 gpatch -p0 < ${SB_SRC_RESCUE_MANIFEST})
]]>
    </install>

    <uninstall>
<![CDATA[
rm ${_bindir}/sow
rmdir ${_bindir} 2>/dev/null || :

(cd ${_prefixdir}/${_rbsubdir}
 rm bin/sow
 rmdir bin 2>/dev/null || :
 rm cache/${SB_PROG_NAME}-${SB_PROG_VER}.gem
 rmdir cache 2>/dev/null || :
 rm -rf doc/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir doc 2>/dev/null || :
 rm -rf gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir gems 2>/dev/null || :
 rm specifications/${SB_PROG_NAME}-${SB_PROG_VER}.gemspec
 rmdir specifications 2>/dev/null || :)
]]>
    </uninstall>

    <module name="1.9.2">
      <install-name>ruby19p</install-name>

      <dependencies replace="0">
        <depend program="ruby" var="RUBY" install-name="ruby19"
          add-path="prepend">v&gt;=1.9.2</depend>
        <depend program="rubygems" module="1.9.2"
          add-path="prepend">v&gt;=1.8.10</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_rbsubdir=1.9.1
]]>
      </script-header>

      <build>
<![CDATA[
# Extract to build_prefix for testing
gem install --local -V --force --no-rdoc --no-ri \
--install-dir=${SB_BUILD_PREFIX} ${SB_SRC_GEMFILE}
]]>
      </build>

      <test>
        <dependencies replace="0">
          <depend program="graphviz" install-name="graphviz228"
            add-path="prepend">v&gt;=2.28.0</depend>
          <depend program="minitest" module="1.9.2">v&gt;=2.6.1</depend>
          <depend program="rake" module="1.9.2">v&gt;=0.9.2</depend>
          <depend program="rdoc" module="1.9.2">v&gt;=3.11</depend>
        </dependencies>
<![CDATA[
export RUBYLIB="$(pwd)/gems/${SB_PROG_NAME}-${SB_PROG_VER}/lib:\
${SB_INSTALL_PREFIX}/vendor/lib/1.9.1/gems/rdoc-3.11/lib"

(cd gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rake test)
]]>
      </test>

      <install>
<![CDATA[
gem install --local -V --rdoc --ri --bindir=${_bindir} \
--install-dir="${_prefixdir}/${_rbsubdir}" ${SB_SRC_GEMFILE}

# apply paches
(cd ${_prefixdir}/${_rbsubdir}/gems/${SB_PROG_NAME}-${SB_PROG_VER}
 gpatch -p0 < ${SB_SRC_RDOCTASK_RESCUE}
 gpatch -p0 < ${SB_SRC_RESCUE_MANIFEST})
]]>
      </install>

      <uninstall>
<![CDATA[
rm ${_bindir}/sow
rmdir ${_bindir} 2>/dev/null || :

(cd ${_prefixdir}/${_rbsubdir}
 rm bin/sow
 rmdir bin 2>/dev/null || :
 rm cache/${SB_PROG_NAME}-${SB_PROG_VER}.gem
 rmdir cache 2>/dev/null || :
 rm -rf doc/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir doc 2>/dev/null || :
 rm -rf gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir gems 2>/dev/null || :
 rm specifications/${SB_PROG_NAME}-${SB_PROG_VER}.gemspec
 rmdir specifications 2>/dev/null || :)
]]>
      </uninstall>
    </module>

    <module name="1.8.7">
      <install-name>ruby18p</install-name>

      <dependencies replace="0">
        <depend program="ruby" var="RUBY" install-name="ruby18"
          add-path="prepend">v&gt;=1.8.7</depend>
        <depend program="rubygems" module="1.8.7"
          add-path="prepend">v&gt;=1.8.10</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_rbsubdir=1.8
]]>
      </script-header>

      <build>
<![CDATA[
# Extract to build_prefix for testing
gem install --local -V --force --no-rdoc --no-ri \
--install-dir=${SB_BUILD_PREFIX} ${SB_SRC_GEMFILE}
]]>
      </build>

      <test>
        <dependencies replace="0">
          <depend program="graphviz" install-name="graphviz228"
            add-path="prepend">v&gt;=2.28.0</depend>
          <depend program="minitest" module="1.8.7">v&gt;=2.6.1</depend>
          <depend program="rake" module="1.8.7">v&gt;=0.9.2</depend>
          <depend program="rdoc" module="1.8.7">v&gt;=3.11</depend>
        </dependencies>
<![CDATA[
export RUBYLIB="$(pwd)/gems/${SB_PROG_NAME}-${SB_PROG_VER}/lib"

(cd gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rake test)
]]>
      </test>

      <install>
<![CDATA[
gem install --local -V --rdoc --ri --bindir=${_bindir} \
--install-dir="${_prefixdir}/${_rbsubdir}" ${SB_SRC_GEMFILE}

# apply paches
(cd ${_prefixdir}/${_rbsubdir}/gems/${SB_PROG_NAME}-${SB_PROG_VER}
 gpatch -p0 < ${SB_SRC_RDOCTASK_RESCUE}
 gpatch -p0 < ${SB_SRC_RESCUE_MANIFEST})
]]>
      </install>

      <uninstall>
<![CDATA[
rm ${_bindir}/sow
rmdir ${_bindir} 2>/dev/null || :

(cd ${_prefixdir}/${_rbsubdir}
 rm bin/sow
 rmdir bin 2>/dev/null || :
 rm cache/${SB_PROG_NAME}-${SB_PROG_VER}.gem
 rmdir cache 2>/dev/null || :
 rm -rf doc/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir doc 2>/dev/null || :
 rm -rf gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir gems 2>/dev/null || :
 rm specifications/${SB_PROG_NAME}-${SB_PROG_VER}.gemspec
 rmdir specifications 2>/dev/null || :)
]]>
      </uninstall>
    </module>
  </program>
</programs>

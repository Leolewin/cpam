<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="ZenTest" version="4.6.2" revision="1">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <sources>
      <source checksum="2b68fd806c44ad086d5bbaf55a4d869a"
        checksum-type="md5" size="68096"
        path="src/ZenTest-4.6.2.gem"
        noop="1" var="GEMFILE"/>
    </sources>

    <dependencies>
      <depend program="diffutils" var="DIFFUTILS"
        install-name="diffutils32">v&gt;=3.2</depend>
    </dependencies>

    <script-header>
<![CDATA[
_prefixdir="${SB_INSTALL_PREFIX}/vendor/lib"
_bindir="${SB_INSTALL_PREFIX}/bin"
]]>
    </script-header>

    <build>
<![CDATA[
# Extract to build_prefix purely for testing
gem install --local -V --force --no-rdoc --no-ri \
--install-dir=${SB_BUILD_PREFIX} ${SB_SRC_GEMFILE}
]]>
    </build>

    <install>
<![CDATA[
gem install --local -V --rdoc --bindir=${_bindir} \
--install-dir="${_prefixdir}/${_rbsubdir}" ${SB_SRC_GEMFILE}

# Fix path to GNU diff
${SB_PATH_SED} -i -e "\
s!gdiff!gnudiff!" \
${_prefixdir}/${_rbsubdir}/gems/ZenTest-4.6.2/lib/unit_diff.rb
]]>
    </install>

    <uninstall>
<![CDATA[
(cd ${SB_INSTALL_PREFIX}/bin
 rm autotest multigem multiruby multiruby_setup unit_diff zentest
 rmdir bin 2>/dev/null || :

 cd ${_prefixdir}/${_rbsubdir}
 rm cache/${SB_PROG_NAME}-${SB_PROG_VER}.gem
 rmdir cache 2>/dev/null || :
 rm -rf doc/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir doc 2>/dev/null || :
 rm -rf gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir gems 2>/dev/null || :
 rm specifications/${SB_PROG_NAME}-${SB_PROG_VER}.gemspec
 rmdir specifications 2>/dev/null || :)
]]>
    </uninstall>

    <module name="1.9.2">
      <install-name>ruby19p</install-name>

      <dependencies replace="0">
        <depend program="ruby" var="RUBY" install-name="ruby19"
          add-path="prepend">v&gt;=1.9.2</depend>
        <depend program="rubygems" module="1.9.2"
          add-path="prepend">v&gt;=1.8.10</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_rbsubdir=1.9.1
]]>
      </script-header>

      <build>
<![CDATA[
# Extract to build_prefix purely for testing
gem install --local -V --force --no-rdoc --no-ri \
--install-dir=${SB_BUILD_PREFIX} ${SB_SRC_GEMFILE}
]]>
      </build>

      <test>
        <dependencies replace="0">
          <depend program="graphviz" install-name="graphviz228"
            add-path="prepend">v&gt;=2.28.0</depend>
          <depend program="hoe" module="1.9.2">v&gt;=2.12.3</depend>
          <depend program="minitest" module="1.9.2">v&gt;=2.6.1</depend>
          <depend program="rake" module="1.9.2">v&gt;=0.9.2</depend>
        </dependencies>
<![CDATA[
export RUBYLIB="$(pwd)/gems/${SB_PROG_NAME}-${SB_PROG_VER}/lib"

(cd gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rake test)
]]>
      </test>

      <install>
<![CDATA[
gem install --local -V --rdoc --bindir=${_bindir} \
--install-dir="${_prefixdir}/${_rbsubdir}" ${SB_SRC_GEMFILE}

# Fix path to GNU diff
${SB_PATH_SED} -i -e "\
s!gdiff!gnudiff!" \
${_prefixdir}/${_rbsubdir}/gems/ZenTest-4.6.2/lib/unit_diff.rb
]]>
      </install>

      <uninstall>
<![CDATA[
(cd ${SB_INSTALL_PREFIX}/bin
 rm autotest multigem multiruby multiruby_setup unit_diff zentest
 rmdir bin 2>/dev/null || :

 cd ${_prefixdir}/${_rbsubdir}
 rm cache/${SB_PROG_NAME}-${SB_PROG_VER}.gem
 rmdir cache 2>/dev/null || :
 rm -rf doc/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir doc 2>/dev/null || :
 rm -rf gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir gems 2>/dev/null || :
 rm specifications/${SB_PROG_NAME}-${SB_PROG_VER}.gemspec
 rmdir specifications 2>/dev/null || :)
]]>
      </uninstall>
    </module>

    <module name="1.8.7">
      <install-name>ruby18p</install-name>

      <dependencies replace="0">
        <depend program="ruby" var="RUBY" install-name="ruby18"
          add-path="prepend">v&gt;=1.8.7</depend>
        <depend program="rubygems" module="1.8.7"
          add-path="prepend">v&gt;=1.8.10</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_rbsubdir=1.8
]]>
      </script-header>

      <build>
<![CDATA[
# Extract to build_prefix purely for testing
gem install --local -V --force --no-rdoc --no-ri \
--install-dir=${SB_BUILD_PREFIX} ${SB_SRC_GEMFILE}
]]>
      </build>

      <test>
        <dependencies replace="0">
          <depend program="graphviz" install-name="graphviz228"
            add-path="prepend">v&gt;=2.28.0</depend>
          <depend program="hoe" module="1.8.7">v&gt;=2.12.3</depend>
          <depend program="minitest" module="1.8.7">v&gt;=2.6.1</depend>
          <depend program="rake" module="1.8.7">v&gt;=0.9.2</depend>
        </dependencies>
<![CDATA[
export RUBYLIB="$(pwd)/gems/${SB_PROG_NAME}-${SB_PROG_VER}/lib"

(cd gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rake test)
]]>
      </test>

      <install>
<![CDATA[
gem install --local -V --rdoc --bindir=${_bindir} \
--install-dir="${_prefixdir}/${_rbsubdir}" ${SB_SRC_GEMFILE}

# Fix path to GNU diff
${SB_PATH_SED} -i -e "\
s!gdiff!gnudiff!" \
${_prefixdir}/${_rbsubdir}/gems/ZenTest-4.6.2/lib/unit_diff.rb
]]>
      </install>

      <uninstall>
<![CDATA[
(cd ${SB_INSTALL_PREFIX}/bin
 rm autotest multigem multiruby multiruby_setup unit_diff zentest
 rmdir bin 2>/dev/null || :

 cd ${_prefixdir}/${_rbsubdir}
 rm cache/${SB_PROG_NAME}-${SB_PROG_VER}.gem
 rmdir cache 2>/dev/null || :
 rm -rf doc/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir doc 2>/dev/null || :
 rm -rf gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir gems 2>/dev/null || :
 rm specifications/${SB_PROG_NAME}-${SB_PROG_VER}.gemspec
 rmdir specifications 2>/dev/null || :)
]]>
      </uninstall>
    </module>
  </program>
</programs>

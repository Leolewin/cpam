<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="libnotify" version="0.4.5" revision="4">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <install-name>${SB_PROG_NAME}04</install-name>

    <sources>
      <source checksum="6a8388f93309dbe336bbe5fc0677de6b"
        checksum-type="md5" size="289217"
        path="src/libnotify-0.4.5.tar.bz2"/>
      <patch checksum="570e007d62e6d85caaa639c87e458c9c"
        checksum-type="md5" size="1027"
        path="src/libnotify-0.4.5.tww.patch"/>
      <patch checksum="3fe1920e21857cf0e510400efef8b35a"
        checksum-type="md5" size="1753742"
        path="src/libnotify-0.4.5.auto.patch"/>
    </sources>

    <dependencies>
      <depend program="dbus" var="DBUS" install-name="dbus12"
        module="glib">v&gt;=1.2.26</depend>
      <depend program="pkgconfig" install-name="pkgconfig02"
        add-path="prepend" type="build">v&gt;=0.25</depend>
      <depend program="atk" var="LIBATK"
        install-name="libatk132">v&gt;=1.32.0</depend>
      <depend program="cairo" var="LIBCAIRO"
        install-name="libcairo110">v&gt;=1.10.2</depend>
      <depend program="fcpackage" var="FCPACKAGE"
        install-name="fcpackage28">v&gt;=2.8</depend>
      <depend program="freetype" var="LIBTTF" install-name="libttf24"
        add-path="prepend">v&gt;=2.4.6</depend>
      <depend program="gettext" var="GETTEXT"
        install-name="gettext018"
        add-path="prepend">v&gt;=0.18.1.1</depend>
      <depend program="glib" var="LIBGLIB" install-name="libglib226"
        add-path="prepend">v&gt;=2.26.1</depend>
      <depend program="gtk+" var="LIBGTK"
        install-name="libgtk+222">v&gt;=2.22.1</depend>
      <depend program="gdk-pixbuf" var="LIBGDKPIXBUF"
        install-name="libgdkpixbuf222">v&gt;=2.22.1</depend>
      <depend program="libffi" var="LIBFFI"
        install-name="libffi30">v&gt;=3.0.10</depend>
      <depend program="libiconv" var="LIBICONV"
        install-name="libiconv113"
        add-path="prepend">v&gt;=1.13.1</depend>
      <depend program="libpng" var="LIBPNG"
        install-name="libpng14">v&gt;=1.4.4</depend>
      <depend program="pango" var="LIBPANGO"
        install-name="libpango128">v&gt;=1.28.4</depend>
      <depend program="zlib" var="LIBZ"
        install-name="libz12">v&gt;=1.2.5</depend>
      <depend program="perl" add-path="prepend"
        type="build">v==5.12.2</depend>
    </dependencies>

    <script-header>
<![CDATA[
_docdir="${SB_INSTALL_PREFIX}/doc"
_datadir="${SB_INSTALL_PREFIX}/share"
]]>
    </script-header>

    <module name="default">
      <dependencies replace="0">
        <depend program="glib" var="LIBGLIB" install-name="libglib226"
          add-path="prepend">v&gt;=2.26.1</depend>
      </dependencies>

      <validate>
        <depend program="libnotify"
          module="python-2.6.7">v==0.4.5</depend>
        <depend program="libnotify"
          module="python-2.7.2">v==0.4.5</depend>
      </validate>

      <script-header>
<![CDATA[
_docdir="${SB_INSTALL_PREFIX}/doc"
_datadir="${SB_INSTALL_PREFIX}/share"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC=xlc CFLAGS="-O2 -qro -qroconst -qmaxmem=-1 -qarch=ppc"
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib" ;;
ia64*-hpux*)
  CC=cc CFLAGS="+O2 -z +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+b," ;;
*-hpux11.[01]*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b," ;;
*-hpux*)
  CC=cc CFLAGS="+O2 -z +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1009,1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CC_LD_RT="-Wl,-rpath," ;;
*-linux*)
  CC_LD_RT="-Wl,-rpath," ;;
*-osf*)
  CC=cc CFLAGS="-O2 -arch ev5 -msym -readonly_strings"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=pentium4"
  CC_LD_RT="-R" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-xarch=v8plusa"
  CC_LD_RT="-R" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-m32 -xarch=sparcvis"
  CC_LD_RT="-R" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CFLAGS="${CFLAGS:--O2}" \
LDFLAGS="${LDFLAGS+${LDFLAGS}}" \
PKG_CONFIG_PATH="\
${SB_VAR_LIBGLIB+${SB_VAR_LIBGLIB_LIB}/pkgconfig:}\
${SB_VAR_LIBFFI+${SB_VAR_LIBFFI_LIB}/pkgconfig:}\
${SB_VAR_LIBICONV+${SB_VAR_LIBICONV_LIB}/pkgconfig:}\
${SB_VAR_FCPACKAGE+${SB_VAR_FCPACKAGE_LIB}/pkgconfig:}\
${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/pkgconfig:}\
${SB_VAR_LIBGDKPIXBUF+${SB_VAR_LIBGDKPIXBUF_LIB}/pkgconfig:}\
${SB_VAR_LIBATK+${SB_VAR_LIBATK_LIB}/pkgconfig:}\
${SB_VAR_LIBPANGO+${SB_VAR_LIBPANGO_LIB}/pkgconfig:}\
${SB_VAR_LIBTTF+${SB_VAR_LIBTTF_LIB}/pkgconfig:}\
${SB_VAR_LIBCAIRO+${SB_VAR_LIBCAIRO_LIB}/pkgconfig:}\
${SB_VAR_GETTEXT+${SB_VAR_GETTEXT_LIB}/pkgconfig:}\
${SB_VAR_LIBPNG+:${SB_VAR_LIBPNG_LIB}/pkgconfig:}\
${SB_VAR_LIBZ+:${SB_VAR_LIBZ_LIB}/pkgconfig:}\
${SB_VAR_DBUS+${SB_VAR_DBUS_LIB}/pkgconfig}" \
--datadir=${_datadir} --disable-dependency-tracking  \
--prefix=${SB_INSTALL_PREFIX}

gmake configure

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!" libnotify.pc
]]>
      </configure>
    </module>

    <module name="python-2.6.7">
      <build-name>notify-python-0.1.1</build-name>

      <sources>
        <source checksum="d247cf79b46cef7495deb0a76334f81d"
          checksum-type="md5" size="214514"
          path="src/notify-python-0.1.1.tar.bz2"/>
        <patch checksum="4691a8787bc325b5c30d4a3e908c2802"
          checksum-type="md5" size="311"
          path="src/notify-python-0.1.1.tww.patch"/>
        <patch checksum="68fab702da34843ffa36efc76afa8df4"
          checksum-type="md5" size="1551669"
          path="src/notify-python-0.1.1.auto.patch"/>
      </sources>

      <dependencies replace="0">
        <depend program="gcc" install-name="gcc44" add-path="prepend"
          type="build">v&gt;=4.4.6</depend>
        <depend program="python" var="PYTHON" install-name="python26"
          type="build">v&gt;=2.6.7</depend>
        <depend program="glib" var="LIBGLIB" install-name="libglib226"
          module="gcc44" add-path="prepend">v&gt;=2.26.1</depend>
        <depend program="gtk+" install-name="libgtk+222"
          module="pygtk-2.6.7" append="lib/python26/bin"
          add-path="prepend">v&gt;=2.22.1</depend>
        <depend program="glib" var="PYGOBJECT"
          module="pygobject-2.6.7">v&gt;=2.26.1</depend>
        <depend program="gtk+" var="PYGTK"
          module="pygtk-2.6.7">v&gt;=2.22.1</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_gccsubdir="gcc44"

_pysubdir="python26"

_install_prefix="${SB_INSTALL_PREFIX_LIB}/${_pysubdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib" ;;
esac

${SHELL} ./configure LDFLAGS="${LDFLAGS+${LDFLAGS}}" \
PYTHON="${SB_VAR_PYTHON}/bin/python" \
PKG_CONFIG_PATH="${SB_INSTALL_PREFIX_LIB}/pkgconfig:\
${SB_VAR_PYGTK_LIB}/${_pysubdir}/lib/pkgconfig:\
${SB_VAR_PYGOBJECT_LIB}/${_pysubdir}/lib/pkgconfig:\
${SB_VAR_LIBGLIB+${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}/pkgconfig:}\
${SB_VAR_LIBFFI+${SB_VAR_LIBFFI_LIB}/pkgconfig:}\
${SB_VAR_GETTEXT+${SB_VAR_GETTEXT_LIB}/pkgconfig:}\
${SB_VAR_LIBICONV+${SB_VAR_LIBICONV_LIB}/pkgconfig:}\
${SB_VAR_FCPACKAGE+${SB_VAR_FCPACKAGE_LIB}/pkgconfig:}\
${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/pkgconfig:}\
${SB_VAR_LIBGDKPIXBUF+${SB_VAR_LIBGDKPIXBUF_LIB}/pkgconfig:}\
${SB_VAR_LIBATK+${SB_VAR_LIBATK_LIB}/pkgconfig:}\
${SB_VAR_LIBPANGO+${SB_VAR_LIBPANGO_LIB}/pkgconfig:}\
${SB_VAR_LIBTTF+${SB_VAR_LIBTTF_LIB}/pkgconfig:}\
${SB_VAR_LIBCAIRO+${SB_VAR_LIBCAIRO_LIB}/pkgconfig:}\
${SB_VAR_LIBPNG+:${SB_VAR_LIBPNG_LIB}/pkgconfig:}\
${SB_VAR_LIBZ+:${SB_VAR_LIBZ_LIB}/pkgconfig:}\
${SB_VAR_DBUS+${SB_VAR_DBUS_LIB}/pkgconfig}" \
--disable-dependency-tracking \
am_cv_python_pyexecdir=${_install_prefix} \
--prefix=${_install_prefix}

gmake configure
]]>
      </configure>

      <install>
<![CDATA[
gmake install

# install path for Python's include.paths.d
${SB_PATH_INSTALL} -m 755 -o root -g 0 -d \
${_install_prefix}/include.paths.d
cat >${_install_prefix}/include.paths.d/99-${SB_PROG_NAME} <<_EOT_
${_install_prefix}/gtk-2.0
_EOT_
]]>
      </install>

      <uninstall>
<![CDATA[
rm -rf ${_install_prefix}
]]>
      </uninstall>
    </module>

    <module name="python-2.7.2">
      <build-name>notify-python-0.1.1</build-name>

      <sources>
        <source checksum="d247cf79b46cef7495deb0a76334f81d"
          checksum-type="md5" size="214514"
          path="src/notify-python-0.1.1.tar.bz2"/>
        <patch checksum="4691a8787bc325b5c30d4a3e908c2802"
          checksum-type="md5" size="311"
          path="src/notify-python-0.1.1.tww.patch"/>
        <patch checksum="68fab702da34843ffa36efc76afa8df4"
          checksum-type="md5" size="1551669"
          path="src/notify-python-0.1.1.auto.patch"/>
      </sources>

      <dependencies replace="0">
        <depend program="gcc" install-name="gcc44" add-path="prepend"
          type="build">v&gt;=4.4.6</depend>
        <depend program="python" var="PYTHON" install-name="python27"
          type="build">v&gt;=2.7.2</depend>
        <depend program="glib" var="LIBGLIB" install-name="libglib226"
          module="gcc44" add-path="prepend">v&gt;=2.26.1</depend>
        <depend program="gtk+" install-name="libgtk+222"
          module="pygtk-2.7.2" append="lib/python27/bin"
          add-path="prepend">v&gt;=2.22.1</depend>
        <depend program="glib" var="PYGOBJECT"
          module="pygobject-2.7.2">v&gt;=2.26.1</depend>
        <depend program="gtk+" var="PYGTK"
          module="pygtk-2.7.2">v&gt;=2.22.1</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_gccsubdir="gcc44"

_pysubdir="python27"

_install_prefix="${SB_INSTALL_PREFIX_LIB}/${_pysubdir}"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib" ;;
esac

${SHELL} ./configure LDFLAGS="${LDFLAGS+${LDFLAGS}}" \
PYTHON="${SB_VAR_PYTHON}/bin/python" \
PKG_CONFIG_PATH="${SB_INSTALL_PREFIX_LIB}/pkgconfig:\
${SB_VAR_PYGTK_LIB}/${_pysubdir}/lib/pkgconfig:\
${SB_VAR_PYGOBJECT_LIB}/${_pysubdir}/lib/pkgconfig:\
${SB_VAR_LIBGLIB+${SB_VAR_LIBGLIB_LIB}/${_gccsubdir}/pkgconfig:}\
${SB_VAR_LIBFFI+${SB_VAR_LIBFFI_LIB}/pkgconfig:}\
${SB_VAR_GETTEXT+${SB_VAR_GETTEXT_LIB}/pkgconfig:}\
${SB_VAR_LIBICONV+${SB_VAR_LIBICONV_LIB}/pkgconfig:}\
${SB_VAR_FCPACKAGE+${SB_VAR_FCPACKAGE_LIB}/pkgconfig:}\
${SB_VAR_LIBGTK+${SB_VAR_LIBGTK_LIB}/pkgconfig:}\
${SB_VAR_LIBGDKPIXBUF+${SB_VAR_LIBGDKPIXBUF_LIB}/pkgconfig:}\
${SB_VAR_LIBATK+${SB_VAR_LIBATK_LIB}/pkgconfig:}\
${SB_VAR_LIBPANGO+${SB_VAR_LIBPANGO_LIB}/pkgconfig:}\
${SB_VAR_LIBTTF+${SB_VAR_LIBTTF_LIB}/pkgconfig:}\
${SB_VAR_LIBCAIRO+${SB_VAR_LIBCAIRO_LIB}/pkgconfig:}\
${SB_VAR_LIBPNG+:${SB_VAR_LIBPNG_LIB}/pkgconfig:}\
${SB_VAR_LIBZ+:${SB_VAR_LIBZ_LIB}/pkgconfig:}\
${SB_VAR_DBUS+${SB_VAR_DBUS_LIB}/pkgconfig}" \
--disable-dependency-tracking \
am_cv_python_pyexecdir=${_install_prefix} \
--prefix=${_install_prefix}

gmake configure
]]>
      </configure>

      <install>
<![CDATA[
gmake install

# install path for Python's include.paths.d
${SB_PATH_INSTALL} -m 755 -o root -g 0 -d \
${_install_prefix}/include.paths.d
cat >${_install_prefix}/include.paths.d/99-${SB_PROG_NAME} <<_EOT_
${_install_prefix}/gtk-2.0
_EOT_
]]>
      </install>

      <uninstall>
<![CDATA[
rm -rf ${_install_prefix}
]]>
      </uninstall>
    </module>

    <licenses>
      <license path="lgpl-2.1.license"/>
    </licenses>

    <notes>
      <note type="usage">
        <para>The pynotify Python module is available in the following
directories:</para>
        <screen>
${SB_INSTALL_PREFIX}/lib/python26    # Python 2.6.7
${SB_INSTALL_PREFIX}/lib/python27    # Python 2.7.2
        </screen>

        <para>The directory is automatically added to the correct
Python include.paths.d directory by the postinstall script.</para>
      </note>
    </notes>

    <changelog>
      <change date="2011 October 14" revision="4"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Update freetype dependency from 2.4.4 to
2.4.6</para></item>
        <item><para>Update gcc dependency from 4.4.5 to
4.4.6</para></item>
      </change>

      <change date="2011 March 21" revision="3"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Update atk dependency from 1.22.0 to
1.32.0</para></item>
        <item><para>Update cairo dependency from 1.6.4 to
1.10.2</para></item>
        <item><para>Update dbus dependency from 1.2.12 to
1.2.26</para></item>
        <item><para>Update fcpackage dependency from 2.6 to
2.8</para></item>
        <item><para>Update freetype dependency from 2.3.7 to
2.4.4</para></item>
        <item><para>Update gcc dependency from 4.2.4 to
4.4.5</para></item>
        <item><para>Update gettext dependency from 0.17 to
0.18.1.1</para></item>
        <item><para>Update glib dependency from 2.16.5 to
2.26.1</para></item>
        <item><para>Update gtk+ dependency from 2.12.11 to
2.22.1</para></item>
        <item><para>Update libiconv dependency from 1.12 to
1.13.1</para></item>
        <item><para>Update pango dependency from 1.20.5 to
1.28.4</para></item>
        <item><para>Update perl dependency from 5.8.8 to
5.12.2</para></item>
        <item><para>Update pkgconfig dependency from 0.23 to
0.25</para></item>
        <item><para>Update python dependency from 2.5.2 to
2.6.6</para></item>
        <item><para>Add gdk-pixbuf dependency</para></item>
        <item><para>Add zlib dependency</para></item>
        <item><para>Add libpng dependency</para></item>
        <item><para>Add support for AIX 7.1</para></item>
      </change>

      <change date="2010 November 5" revision="2"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Add support for RHEL 6</para></item>
      </change>
    </changelog>
  </program>
</programs>

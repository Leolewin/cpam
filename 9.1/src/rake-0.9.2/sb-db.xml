<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="rake" version="0.9.2" revision="1">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <sources>
      <source checksum="53e95232c3ba141e8cb10e2540af09eb"
        checksum-type="md5" size="113152"
        path="src/rake-0.9.2.gem"
        noop="1" var="GEMFILE"/>
    </sources>

    <script-header>
<![CDATA[
_bindir="${SB_INSTALL_PREFIX}/bin"
_prefixdir="${SB_INSTALL_PREFIX}/vendor/lib"
]]>
    </script-header>

    <build>
<![CDATA[
# Extract to build_prefix purely for testing
gem install --local -V --force --no-rdoc --no-ri \
--install-dir=${SB_BUILD_PREFIX} ${SB_SRC_GEMFILE}
]]>
    </build>

    <install>
<![CDATA[
# Install directly from the gem file, which takes care of bindir
# automatically.
gem install --local -V --rdoc --ri --bindir=${_bindir} \
--install-dir="${_prefixdir}/${_rbsubdir}" ${SB_SRC_GEMFILE}
]]>
    </install>

    <uninstall>
<![CDATA[
rm ${_bindir}/rake
rmdir ${_bindir} 2>/dev/null || :

(cd ${_prefixdir}/${_rbsubdir}
 rm bin/rake
 rmdir bin 2>/dev/null || :
 rm cache/${SB_PROG_NAME}-${SB_PROG_VER}.gem
 rmdir cache 2>/dev/null || :
 rm -rf doc/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir doc 2>/dev/null || :
 rm -rf gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir gems 2>/dev/null || :
 rm specifications/${SB_PROG_NAME}-${SB_PROG_VER}.gemspec
 rmdir specifications 2>/dev/null || :)
]]>
    </uninstall>

    <module name="1.9.2">
      <install-name>ruby19p</install-name>

      <dependencies>
        <depend program="ruby" var="RUBY" install-name="ruby19"
          add-path="prepend">v&gt;=1.9.2</depend>
        <depend program="rubygems" module="1.9.2"
          add-path="prepend">v&gt;=1.8.10</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_rbsubdir=1.9.1
]]>
      </script-header>

      <build>
<![CDATA[
# Extract to build_prefix purely for testing
gem install --local -V --force --no-rdoc --no-ri \
--install-dir=${SB_BUILD_PREFIX} ${SB_SRC_GEMFILE}
]]>
      </build>

      <test>
        <dependencies replace="0">
          <depend program="flexmock" module="1.9.2">v&gt;=0.9.0</depend>
          <depend program="minitest" module="1.9.2">v&gt;=2.6.1</depend>
          <depend program="rdoc" module="1.9.2">v&gt;=3.11</depend>
          <depend program="session" module="1.9.2">v&gt;=3.1.0</depend>
        </dependencies>
<![CDATA[
export RUBYLIB="$(pwd)/gems/${SB_PROG_NAME}-${SB_PROG_VER}/lib"

(cd gems/${SB_PROG_NAME}-${SB_PROG_VER}
 bin/rake test)
]]>
      </test>

      <install>
<![CDATA[
# Install directly from the gem file, which takes care of bindir
# automatically.
gem install --local -V --rdoc --ri --bindir=${_bindir} \
--install-dir="${_prefixdir}/${_rbsubdir}" ${SB_SRC_GEMFILE}
]]>
      </install>

      <uninstall>
<![CDATA[
rm ${_bindir}/rake
rmdir ${_bindir} 2>/dev/null || :

(cd ${_prefixdir}/${_rbsubdir}
 rm bin/rake
 rmdir bin 2>/dev/null || :
 rm cache/${SB_PROG_NAME}-${SB_PROG_VER}.gem
 rmdir cache 2>/dev/null || :
 rm -rf doc/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir doc 2>/dev/null || :
 rm -rf gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir gems 2>/dev/null || :
 rm specifications/${SB_PROG_NAME}-${SB_PROG_VER}.gemspec
 rmdir specifications 2>/dev/null || :)
]]>
      </uninstall>
    </module>

    <module name="1.8.7">
      <install-name>ruby18p</install-name>

      <dependencies>
        <depend program="ruby" var="RUBY" install-name="ruby18"
          add-path="prepend">v&gt;=1.8.7</depend>
        <depend program="rubygems" module="1.8.7"
          add-path="prepend">v&gt;=1.8.10</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_rbsubdir=1.8
]]>
      </script-header>

      <build>
<![CDATA[
# Extract to build_prefix purely for testing
gem install --local -V --force --no-rdoc --no-ri \
--install-dir=${SB_BUILD_PREFIX} ${SB_SRC_GEMFILE}
]]>
      </build>

      <test>
        <dependencies replace="0">
          <depend program="flexmock" module="1.8.7">v&gt;=0.9.0</depend>
          <depend program="minitest" module="1.8.7">v&gt;=2.6.1</depend>
          <depend program="rdoc" module="1.8.7">v&gt;=3.11</depend>
          <depend program="session" module="1.8.7">v&gt;=3.1.0</depend>
        </dependencies>
<![CDATA[
export RUBYLIB="$(pwd)/gems/${SB_PROG_NAME}-${SB_PROG_VER}/lib"

(cd gems/${SB_PROG_NAME}-${SB_PROG_VER}
 bin/rake test)
]]>
      </test>

      <install>
<![CDATA[
# Install directly from the gem file, which takes care of bindir
# automatically.
gem install --local -V --rdoc --ri --bindir=${_bindir} \
--install-dir="${_prefixdir}/${_rbsubdir}" ${SB_SRC_GEMFILE}
]]>
      </install>

      <uninstall>
<![CDATA[
rm ${_bindir}/rake
rmdir ${_bindir} 2>/dev/null || :

(cd ${_prefixdir}/${_rbsubdir}
 rm bin/rake
 rmdir bin 2>/dev/null || :
 rm cache/${SB_PROG_NAME}-${SB_PROG_VER}.gem
 rmdir cache 2>/dev/null || :
 rm -rf doc/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir doc 2>/dev/null || :
 rm -rf gems/${SB_PROG_NAME}-${SB_PROG_VER}
 rmdir gems 2>/dev/null || :
 rm specifications/${SB_PROG_NAME}-${SB_PROG_VER}.gemspec
 rmdir specifications 2>/dev/null || :)
]]>
      </uninstall>
    </module>
  </program>
</programs>

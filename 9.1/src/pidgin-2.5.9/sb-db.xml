<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="pidgin" version="2.5.9" revision="3">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <install-name>${SB_PROG_NAME}25</install-name>

    <sources>
      <source checksum="811760c620f84c190f35ff4544738ea7"
        checksum-type="md5" size="8404331"
        path="src/pidgin-2.5.9.tar.bz2"/>
      <patch checksum="4ecdcab4bc896dff44f7d427cf5688a2"
        checksum-type="md5" size="716"
        path="src/pidgin-2.5.9.CVE-2009-2703.patch"/>
      <patch checksum="251b373df009d9b7931111b4384c20dc"
        checksum-type="md5" size="1272"
        path="src/pidgin-2.5.9.CVE-2009-3026.patch"/>
      <patch checksum="684eea3b5b41e6dbab7ed060143f808e"
        checksum-type="md5" size="826"
        path="src/pidgin-2.5.9.CVE-2009-3083.patch"/>
      <patch checksum="81ea33d48e1349348005a978e6385f6c"
        checksum-type="md5" size="763"
        path="src/pidgin-2.5.9.CVE-2009-3085.patch"/>
      <patch checksum="b22455a3605f27e8ab8e9db5a5a74e78"
        checksum-type="md5" size="2828"
        path="src/pidgin-2.5.9.CVE-2009-3615.patch"/>
      <patch checksum="a577cfe42f8fa263d2d9dc784876ca0d"
        checksum-type="md5" size="5474"
        path="src/pidgin-2.5.9.CVE-2010-0013.patch"/>
      <patch checksum="cbc8d7920c3b32d4560c40c09d5ab769"
        checksum-type="md5" size="3445"
        path="src/pidgin-2.5.9.CVE-2010-0277.patch"/>
      <patch checksum="2339aa233a50b18429f31ba154bf3fc0"
        checksum-type="md5" size="4475"
        path="src/pidgin-2.5.9.CVE-2010-0420.patch"/>
      <patch checksum="6145eb71cce8c1d8a8a0db1e4420f3f4"
        checksum-type="md5" size="4106"
        path="src/pidgin-2.5.9.CVE-2010-0423.patch"/>
      <patch checksum="f90416e7b5f6a1124e660b52a6a0b718"
        checksum-type="md5" size="1163"
        path="src/pidgin-2.5.9.CVE-2010-1624.patch"/>
      <patch checksum="b3a5b2f361e44eaadfaf2d35900e5ef8"
        checksum-type="md5" size="4967"
        path="src/pidgin-2.5.9.CVE-2010-3711.patch"/>
      <patch checksum="daf988254b81f4c80005afdfe82f9ade"
        checksum-type="md5" size="406"
        path="src/pidgin-2.5.9.CVE-2011-3184.patch"/>
      <patch checksum="777a1ddb9080fbccefb36414c0deecd4"
        checksum-type="md5" size="946"
        path="src/pidgin-2.5.9.CVE-2011-3594.patch"/>
      <patch checksum="9bfa59dbac62ff338a23d1fe5c3e15de"
        checksum-type="md5" size="85478"
        path="src/pidgin-2.5.9.tww.patch"/>
      <patch checksum="7841cdf68e2211f974e44d4ec60028ab"
        checksum-type="md5" size="228561"
        path="src/pidgin-2.5.9.include_config_h.patch"/>
      <patch checksum="458d2f4bdcf5e3779986e9c31ed73e23"
        checksum-type="md5" size="682510"
        path="src/pidgin-2.5.9.gnulib.patch"/>
      <patch checksum="e36b9d8739f6ceeed43c0fb9b943f6c1"
        checksum-type="md5" size="3343851"
        path="src/pidgin-2.5.9.auto.patch"/>
      <patch checksum="fd4d67ea7a2401fd85cf0cb5187704a6"
        checksum-type="md5" size="562865"
        path="src/irix-dbus-bindings.patch"
        systype="*-irix*"/>
    </sources>

    <dependencies>
      <depend program="doxygen" install-name="doxygen17"
        add-path="prepend" type="build">v&gt;=1.7.4</depend>
      <depend program="graphviz" install-name="graphviz228"
        add-path="prepend" type="build">v&gt;=2.28.0</depend>
      <depend program="intltool" install-name="intltool041"
        add-path="prepend" type="build">v&gt;=0.41.1</depend>
      <depend program="pkgconfig" install-name="pkgconfig02"
        add-path="prepend" type="build">v&gt;=0.25</depend>
      <depend program="atk" var="LIBATK"
        install-name="libatk132">v&gt;=1.32.0</depend>
      <depend program="cairo" var="LIBCAIRO"
        install-name="libcairo110">v&gt;=1.10.2</depend>
      <depend program="dbus" var="LIBDBUS" install-name="dbus12"
        module="glib">v&gt;=1.2.26</depend>
      <depend program="fcpackage" var="FCPACKAGE"
        install-name="fcpackage28">v&gt;=2.8</depend>
      <depend program="freetype" var="LIBTTF"
        install-name="libttf24">v&gt;=2.4.6</depend>
      <depend program="gdk-pixbuf" var="LIBGDKPIXBUF"
        install-name="libgdkpixbuf222">v&gt;=2.22.1</depend>
      <depend program="gettext" var="GETTEXT"
        install-name="gettext018"
        add-path="prepend">v&gt;=0.18.1.1</depend>
      <depend program="glib" var="LIBGLIB"
        install-name="libglib226">v&gt;=2.26.1</depend>
      <depend program="gnome" install-name="gnome232" module="GConf"
        add-path="prepend">v&gt;=2.32</depend>
      <depend program="gnutls" var="LIBGNUTLS"
        install-name="libgnutls210">v&gt;=2.10.5</depend>
      <depend program="gtk+" var="LIBGTK"
        install-name="libgtk+222">v&gt;=2.22.1</depend>
      <depend program="gtkspell" var="LIBGTKSPELL"
        install-name="libgtkspell20">v&gt;=2.0.16</depend>
      <depend program="libiconv" var="LIBICONV"
        install-name="libiconv113"
        add-path="prepend">v&gt;=1.13.1</depend>
      <depend program="libpng" var="LIBPNG"
        install-name="libpng14">v&gt;=1.4.4</depend>
      <depend program="libxml" var="LIBXML"
        install-name="libxml27">v&gt;=2.7.8</depend>
      <depend program="libxslt" install-name="libxslt11"
        add-path="prepend">v&gt;=1.1.26</depend>
      <depend program="ncurses" var="LIBNCURSES"
        install-name="ncurses57">v==5.7</depend>
      <depend program="pango" var="LIBPANGO"
        install-name="libpango128">v&gt;=1.28.4</depend>
      <depend program="python" var="PYTHON" install-name="python26"
        add-path="prepend">v&gt;=2.6.7</depend>
      <depend program="zlib" var="LIBZ"
        install-name="libz12">v&gt;=1.2.5</depend>
      <depend program="perl" add-path="prepend"
        type="build">v==5.12.2</depend>
    </dependencies>

    <script-header>
<![CDATA[
_datadir="${SB_INSTALL_PREFIX}/share"
_sysconfdir="${SB_INSTALL_PREFIX}/etc"

_pyver=$(python -c "import sys; print sys.version[:3];")
_pylibdir="${SB_VAR_PYTHON_LIB}/python${_pyver}/config"
]]>
    </script-header>

    <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC=xlc CFLAGS="-O2 -qro -qroconst -qmaxmem=-1 -qarch=ppc"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib"
  CC_LD_RT="-Wl,-blibpath:"

  ARGS="ac_cv_header_arpa_nameser_compat_h=no" ;;
ia64*-hpux*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+b,"

  ARGS="--disable-screensaver" ;;
*-hpux11.[01]*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b,"

  ARGS="--disable-screensaver" ;;
*-hpux*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b,"

  ARGS="--disable-screensaver" ;;
*-irix*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1009,1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CC_LD_RT="-Wl,-rpath,"

  ARGS="--disable-screensaver" ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CC_LD_RT="-Wl,-rpath," ;;
*-linux*)
  CC_LD_RT="-Wl,-rpath," ;;
*-osf*)
  CC=cc CFLAGS="-O2 -arch ev5 -msym -readonly_strings"
  CPPFLAGS="-D_OSF_SOURCE"  # needed for a u_char definition
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=pentium4"
  CC_LD_RT="-R" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-xarch=v8plusa"
  CC_LD_RT="-R" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-m32 -xarch=sparcvis"
  CC_LD_RT="-R" ;;
esac

case "${SB_SYSTYPE}" in
*-irix*|*-osf*|*-solaris*)
  # Needed to get cchar_t definition from ncursesw.h!
  CPPFLAGS="${CPPFLAGS+${CPPFLAGS}} -D_XOPEN_SOURCE_EXTENDED" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CFLAGS="${CFLAGS:--O2}" \
CPPFLAGS="${SB_VAR_GETTEXT+-I${SB_VAR_GETTEXT_INC}}\
 ${SB_VAR_FCPACKAGE+-I${SB_VAR_FCPACKAGE_INC}}\
 ${CPPFLAGS+${CPPFLAGS}}" \
LDFLAGS="${SB_VAR_GETTEXT+-L${SB_VAR_GETTEXT_LIB}}\
 ${SB_VAR_FCPACKAGE+-L${SB_VAR_FCPACKAGE_LIB}}\
 ${SB_VAR_LIBNCURSES+-L${SB_VAR_LIBNCURSES_LIB}}\
 ${SB_VAR_LIBPANGO+-L${SB_VAR_LIBPANGO_LIB}}\
 ${SB_VAR_PYTHON+${CC_LD_RT}$_pylibdir}\
 ${LDFLAGS+${LDFLAGS}}" \
PKG_CONFIG_PATH="${SB_VAR_LIBGNUTLS_LIB}/pkgconfig\
${SB_VAR_LIBDBUS+:${SB_VAR_LIBDBUS_LIB}/pkgconfig}\
${SB_VAR_LIBGDKPIXBUF+:${SB_VAR_LIBGDKPIXBUF_LIB}/pkgconfig}\
${SB_VAR_LIBGLIB+:${_libglib_lib:-${SB_VAR_LIBGLIB_LIB}}/pkgconfig}\
${SB_VAR_LIBGTK+:${SB_VAR_LIBGTK_LIB}/pkgconfig}\
${SB_VAR_LIBPANGO+:${SB_VAR_LIBPANGO_LIB}/pkgconfig}\
${SB_VAR_LIBCAIRO+:${SB_VAR_LIBCAIRO_LIB}/pkgconfig}\
${SB_VAR_LIBATK+:${SB_VAR_LIBATK_LIB}/pkgconfig}\
${SB_VAR_FCPACKAGE+:${SB_VAR_FCPACKAGE_LIB}/pkgconfig}\
${SB_VAR_LIBTTF+:${SB_VAR_LIBTTF_LIB}/pkgconfig}\
${SB_VAR_GETTEXT+:${SB_VAR_GETTEXT_LIB}/pkgconfig}\
${SB_VAR_LIBPNG+:${SB_VAR_LIBPNG_LIB}/pkgconfig}\
${SB_VAR_LIBXML+:${SB_VAR_LIBXML_LIB}/pkgconfig}\
${SB_VAR_LIBICONV+:${SB_VAR_LIBICONV_LIB}/pkgconfig}\
${SB_VAR_LIBGTKSPELL+:${SB_VAR_LIBGTKSPELL_LIB}/pkgconfig}\
${SB_VAR_LIBZ+:${SB_VAR_LIBZ_LIB}/pkgconfig}" \
${SB_VAR_LIBNCURSES+--with-ncurses-headers=${SB_VAR_LIBNCURSES_INC}} \
${SB_VAR_PYTHON+--with-python=${SB_VAR_PYTHON}/bin/python} \
--enable-nss=no --enable-gnutls=yes ${ARGS+${ARGS}} \
--disable-dependency-tracking --disable-perl --disable-tcl \
--disable-tk --disable-startup-notification --disable-mono \
--enable-dot --enable-consoleui --enable-dbus --disable-nm \
--disable-gevolution --disable-gstreamer --disable-meanwhile \
--disable-avahi --disable-screensaver --datadir=${_datadir} \
--sysconfdir=${_sysconfdir} --libdir=${SB_INSTALL_PREFIX_LIB} \
--mandir="${SB_INSTALL_PREFIX}/man" --prefix=${SB_INSTALL_PREFIX}

gmake configure

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" \
finch/libgnt/gnt.pc libpurple/purple.pc
]]>
    </configure>

    <licenses>
      <license path="gpl-2.license"/>
    </licenses>

    <changelog>
      <change date="2012 January 21" revision="3"
      author="Gary V. Vaughan" email="gary@thewrittenword.com">
        <item><para>Remove support for RHEL 3 and SLED</para></item>
        <item><para>Remove support for solaris 2.6 and 7</para></item>
        <item><para>Append --disable-screensaver configuration
flag</para></item>
        <item><para>Add gdk-pixbuf 2.22.1 dependency</para></item>
        <item><para>Add intltool 0.41.1 dependency</para></item>
        <item><para>Add libpng 1.4.4 dependency</para></item>
        <item><para>Upgrade atk dependency from 1.22.0 to
1.32.0</para></item>
        <item><para>Upgrade cairo dependency from 1.6.4 to
1.10.2</para></item>
        <item><para>Upgrade dbus dependency from 1.2.12 to
1.2.26</para></item>
        <item><para>Upgrade doxygen dependency from 1.5.8 to
1.7.4</para></item>
        <item><para>Upgrade fcpackage dependency from 2.6 to
2.8</para></item>
        <item><para>Upgrade freetype dependency from 2.3.7 to
2.4.6</para></item>
        <item><para>Upgrade gettext dependency from 0.17 to
0.18.1.1</para></item>
        <item><para>Upgrade glib dependency from 2.16.5 to
2.26.1</para></item>
        <item><para>Upgrade gnome dependency from 2.22 to
2.32</para></item>
        <item><para>Upgrade gnutls dependency from 2.4.2 to
2.10.5</para></item>
        <item><para>Upgrade graphviz dependency from 2.24.0 to
2.28.0</para></item>
        <item><para>Upgrade gtk+ dependency from 2.12.11 to
2.22.1</para></item>
        <item><para>Upgrade gtkspell dependency from 2.0.11 to
2.0.16</para></item>
        <item><para>Upgrade libiconv dependency from 1.12 to
1.13.1</para></item>
        <item><para>Upgrade libxml dependency from 2.6.32 to
2.7.8</para></item>
        <item><para>Upgrade libxslt dependency from 1.1.24 to
1.1.26</para></item>
        <item><para>Upgrade ncurses dependency from 5.6 to
5.7</para></item>
        <item><para>Upgrade pango dependency from 1.20.5 to
1.28.4</para></item>
        <item><para>Upgrade perl dependency from 5.8.8 to
5.12.2</para></item>
        <item><para>Upgrade pkgconfig dependency from 0.23 to
0.25</para></item>
        <item><para>Upgrade python dependency from 2.5.2 to
2.6.7</para></item>
        <item><para>Upgrade zlib dependency from 1.2.3 to
1.2.5</para></item>
      </change>

      <change date="2012 January 5" revision="2"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Apply patch for CVE-2009-2703 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-2703">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-2703</ulink>).
<command>libpurple/protocols/irc/msgs.c</command> in the IRC protocol
plugin in libpurple in Pidgin allows remote IRC servers to cause a
denial of service (NULL pointer dereference and application crash) via
a TOPIC message that lacks a topic string.</para></item>
        <item><para>Apply patch for CVE-2009-3026 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-3026">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-3026</ulink>).
<command>protocols/jabber/auth.c</command> in libpurple in Pidgin does
not follow the "require TLS/SSL" preference when connecting to older
Jabber servers that do not follow the XMPP specification, which causes
libpurple to connect to the server without the expected encryption and
allows remote attackers to sniff sessions.</para></item>
        <item><para>Apply patch for CVE-2009-3083 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-3083">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-3083</ulink>).
The <command>msn_slp_sip_recv</command> function in
<command>libpurple/protocols/msn/slp.c</command> in the MSN protocol
plugin in libpurple in Pidgin allows remote attackers to cause a
denial of service (NULL pointer dereference and application crash) via
an SLP invite message that lacks certain required fields, as
demonstrated by a malformed message from a KMess client.</para></item>
        <item><para>Apply patch for CVE-2009-3085 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-3085">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-3085</ulink>).
The XMPP protocol plugin in libpurple in Pidgin does not properly
handle an error IQ stanza during an attempted fetch of a custom
smiley, which allows remote attackers to cause a denial of service
(application crash) via XHTML-IM content with cid:
images.</para></item>
        <item><para>Apply patch for CVE-2009-3615 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-3615">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-3615</ulink>).
The OSCAR protocol plugin in libpurple in Pidgin allows remote
attackers to cause a denial of service (application crash) via crafted
contact-list data for (1) ICQ and possibly (2) AIM, as demonstrated by
the SIM IM client.</para></item>
        <item><para>Apply patch for CVE-2010-0013 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0013">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0013</ulink>).
Directory traversal vulnerability in <command>slp.c</command> in the
MSN protocol plugin in libpurple allows remote attackers to read
arbitrary files via a .. (dot dot) in an application/x-msnmsgrp2p MSN
emoticon (aka custom smiley) request, a related issue to
CVE-2004-0122. NOTE: it could be argued that this is resultant from a
vulnerability in which an emoticon download request is processed even
without a preceding text/x-mms-emoticon message that announced
availability of the emoticon.</para></item>
        <item><para>Apply patch for CVE-2010-0277 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0277">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0277</ulink>).
<command>slp.c</command> in the MSN protocol plugin in libpurple
allows remote attackers to cause a denial of service (memory
corruption and application crash) or possibly have unspecified other
impact via a malformed MSNSLP INVITE request in an SLP message, a
different issue than CVE-2010-0013.</para></item>
        <item><para>Apply patch for CVE-2010-0420 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0420">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0420</ulink>).
libpurple, when an XMPP multi-user chat (MUC) room is used, does not
properly parse nicknames containing &lt;br&gt; sequences, which allows
remote attackers to cause a denial of service (application crash) via
a crafted nickname.</para></item>
        <item><para>Apply patch for CVE-2010-0423 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0423">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0423</ulink>).
<command>gtkimhtml.c</command> in Pidgin allows remote attackers to
cause a denial of service (CPU consumption and application hang) by
sending many smileys in a (1) IM or (2) chat.</para></item>
        <item><para>Apply patch for CVE-2010-1624 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1624">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1624</ulink>).
The <command>msn_emoticon_msg</command> function in
<command>slp.c</command> in the MSN protocol plugin in libpurple
allows remote authenticated users to cause a denial of service (NULL
pointer dereference and application crash) via a custom emoticon in a
malformed SLP message.</para></item>
        <item><para>Apply patch for CVE-2010-3711 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3711">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3711</ulink>).
libpurple in Pidgin does not properly validate the return value of the
<command>purple_base64_decode</command> function, which allows remote
authenticated users to cause a denial of service (NULL pointer
dereference and application crash) via a crafted message, related to
the plugins for MSN, MySpaceIM, XMPP, and Yahoo! and the NTLM
authentication support.</para></item>
        <item><para>Apply patch for CVE-2011-3184 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-3184">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-3184</ulink>).
The <command>msn_httpconn_parse_data</command> function in
<command>httpconn.c</command> in the MSN protocol plugin in libpurple
does not properly handle HTTP 100 responses, which allows remote
attackers to cause a denial of service (incorrect memory access and
application crash) via vectors involving a crafted server
message.</para></item>
        <item><para>Apply patch for CVE-2011-3594 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-3594">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-3594</ulink>).
The <command>g_markup_escape_text</command> function in the SILC
protocol plug-in in libpurple allows remote attackers to cause a
denial of service (crash) via invalid UTF-8 sequences that trigger use
of invalid pointers and an out-of-bounds read, related to interactions
with certain versions of glib2.</para></item>
      </change>
    </changelog>
  </program>
</programs>

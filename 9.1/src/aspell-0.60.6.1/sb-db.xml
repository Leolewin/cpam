<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="aspell" version="0.60.6.1" revision="1">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <install-name>${SB_PROG_NAME}06</install-name>

    <dependencies>
      <depend program="aspell" install-name="aspell06"
        add-path="prepend">v&gt;=0.60.6.1</depend>
    </dependencies>

    <script-header>
<![CDATA[
_datadir="${SB_INSTALL_PREFIX}/share"
_docdir="${SB_INSTALL_PREFIX}/doc"
_sysconfdir="${SB_INSTALL_PREFIX}/etc"

_gcc_subdir="gcc44"
]]>
    </script-header>

    <configure>
<![CDATA[
${SHELL} ./configure
]]>
    </configure>

    <module name="default">
      <sources>
        <source checksum="e66a9c9af6a60dc46134fdacf6ce97d7"
          checksum-type="md5" size="1878163"
          path="src/aspell-0.60.6.1.tar.gz"/>
        <patch checksum="ae2d0a3421683e4927e61cef0ac35b3e"
          checksum-type="md5" size="12517"
          path="src/aspell-0.60.6.1.tww.patch"/>
        <patch checksum="eb3f600d99f88d3a4bb8a4b24d794ebf"
          checksum-type="md5" size="2037523"
          path="src/aspell-0.60.6.1.auto.patch"/>
      </sources>

      <dependencies>
        <depend program="bison" install-name="bison24"
          add-path="prepend" type="build">v&gt;=2.4.3</depend>
        <depend program="gcc" install-name="gcc44" add-path="prepend"
          systype="*-aix*|*-hpux*|*-irix*|*-osf*">v&gt;=4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"
          systype="*-aix*|*-hpux*|*-irix*|*-osf*"/>
        <depend program="ncurses" var="NCURSES"
          install-name="ncurses57"
          systype="*-hpux11.00|*-solaris2.6">v&gt;=5.7</depend>
        <depend program="ncurses" var="NCURSES"
          install-name="ncurses57" module="widec"
          systype="*-aix*|*-hpux11.11|*-hpux11.[23]*|*-irix*|*-linux*|*-osf*|*-solaris*">v&gt;=5.7</depend>
        <depend program="perl" add-path="prepend"
          type="build">v==5.12.2</depend>
      </dependencies>

      <validate>
        <depend program="aspell" module="gcc44"
          systype="*-linux*|*-solaris*">v==0.60.6.1</depend>
        <depend program="aspell" module="dict-da">v==0.60.6.1</depend>
        <depend program="aspell" module="dict-de">v==0.60.6.1</depend>
        <depend program="aspell" module="dict-en">v==0.60.6.1</depend>
        <depend program="aspell" module="dict-fr">v==0.60.6.1</depend>
        <depend program="aspell" module="dict-it">v==0.60.6.1</depend>
        <depend program="aspell" module="dict-nl">v==0.60.6.1</depend>
        <depend program="aspell" module="dict-no">v==0.60.6.1</depend>
        <depend program="aspell" module="dict-ru">v==0.60.6.1</depend>
        <depend program="aspell" module="dict-sv">v==0.60.6.1</depend>
      </validate>

      <script-header>
<![CDATA[
_datadir="${SB_INSTALL_PREFIX}/share"
_docdir="${SB_INSTALL_PREFIX}/doc"
_sysconfdir="${SB_INSTALL_PREFIX}/etc"

_gcc_subdir="gcc44"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CFLAGS="-O2 -mcpu=powerpc"
  CXXFLAGS="-O2 -mcpu=powerpc"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib"
  CC_LD_RT="-Wl,-blibpath:"

  _ncurses_lib="ncursesw" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b,"

  _ncurses_lib="ncursesw" ;;
*-hpux11.11|*-hpux11.[23]*)
  CC_LD_RT="-Wl,+s,+b,"

  _ncurses_lib="ncursesw" ;;
*-hpux*)
  CFLAGS="-O2 -march=1.1" CXXFLAGS="-O2 -march=1.1"
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*)
  CFLAGS="-O2" CXXFLAGS="-O2"
  CC_LD_RT="-Wl,-rpath,"

  _ncurses_lib="ncursesw" ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CXXFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CC_LD_RT="-Wl,-rpath,"

  _ncurses_lib="ncursesw"
  _libdir=${SB_INSTALL_PREFIX_LIB} ;;
*-linux*)
  CC_LD_RT="-Wl,-rpath,"

  _ncurses_lib="ncursesw"
  _libdir=${SB_INSTALL_PREFIX_LIB} ;;
*-osf*)
  CFLAGS="-O2 -mcpu=ev5 -pthread"
  CXXFLAGS="-O2 -mcpu=ev5 -pthread"
  CC_LD_RT="-Wl,-rpath,"

  _ncurses_lib="ncursesw" ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=pentium4"
  CXX=CC CXXFLAGS="-xO2 -xtarget=pentium4"
  CC_LD_RT="-R"

  _ncurses_lib="ncursesw"
  _libdir=${SB_INSTALL_PREFIX_LIB}

  # libaspell.so needs -lm but can't test for it in autoconf unless
  # we created a shared library. -lm automatically added when
  # creating an executable program.
  _libs="-lm" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-xarch=v8plusa"
  CXX=CC CXXFLAGS="-xO2 -xtarget=ultra2 -xarch=v8plusa"
  CC_LD_RT="-R"

  _ncurses_lib="ncursesw"
  _libdir=${SB_INSTALL_PREFIX_LIB} 

  # libaspell.so needs -lm but can't test for it in autoconf unless
  # we created a shared library. -lm automatically added when
  # creating an executable program.
  _libs="-lm" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-m32 -xarch=sparcvis"
  CXX=CC CXXFLAGS="-xO2 -xtarget=ultra2 -m32 -xarch=sparcvis"

  # libaspell.so needs -lm but can't test for it in autoconf unless
  # we created a shared library. -lm automatically added when
  # creating an executable program.
  _libs="-lm"
  CC_LD_RT="-R"

  _ncurses_lib="ncursesw"
  _libdir=${SB_INSTALL_PREFIX_LIB} ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CXX="${CXX:-g++}" \
CFLAGS="${CFLAGS:--O2}" CXXFLAGS="${CXXFLAGS:--O2}" \
LDFLAGS="${SB_VAR_GCC_RT+-L${SB_VAR_GCC_RT_LIB} \
${CC_LD_RT}${SB_VAR_GCC_RT_LIB}} \
${LDFLAGS+${LDFLAGS}}" LIBS="${_libs+${_libs}}" \
--disable-dependency-tracking --enable-docdir=${_docdir} \
--datarootdir=${_datadir} --datadir=${_datadir} \
--sysconfdir=${_sysconfdir} \
--enable-curses-include="${SB_VAR_NCURSES+-I${SB_VAR_NCURSES_INC} }\
-I${SB_VAR_NCURSES_INC-/usr/include}/${_ncurses_lib:-ncurses}" \
--enable-curses="${SB_VAR_NCURSES+-L${SB_VAR_NCURSES_LIB} }\
${SB_VAR_NCURSES+${CC_LD_RT}${SB_VAR_NCURSES_LIB} }\
-l${_ncurses_lib:-ncurses}" \
--infodir="${SB_INSTALL_PREFIX}/info" \
--mandir="${SB_INSTALL_PREFIX}/man" \
--libdir=${_libdir:-"${SB_INSTALL_PREFIX_LIB}/${_gcc_subdir}"} \
--prefix=${SB_INSTALL_PREFIX}

# Fix path to config file
${SB_PATH_SED} -i -e "\
s!/etc/aspell.conf!${_sysconfdir}/aspell.conf!g;" manual/aspell.1
]]>
      </configure>

      <build>
<![CDATA[
gmake pkgdatadir=${_datadir} \
pkglibdir="${SB_INSTALL_PREFIX_LIB}/aspell"
]]>
      </build>

      <install>
<![CDATA[
gmake install pkgdatadir=${_datadir} \
pkglibdir="${SB_INSTALL_PREFIX_LIB}/aspell"

# Path to config files and dictionaries
${SB_PATH_INSTALL} -m 755 -o root -g 0 -d ${_sysconfdir} \
${SB_INSTALL_PREFIX_LIB}
${SB_PATH_INSTALL} -m 644 -o root -g 0 /dev/null \
${_sysconfdir}/aspell.conf

# Install Texinfo files
${SB_PATH_INSTALL} -m 755 -o root -g 0 -d ${_docdir}/texinfo
(cd manual
 ${SB_PATH_INSTALL} -m 644 -o root -g 0 aspell.texi aspell-dev.texi \
 crubadan.texi lang-supported.texi fdl.texi lang-unsupported.texi \
 lgpl.texi mksrc.texi readme.texi ${_docdir}/texinfo)
]]>
      </install>
    </module>

    <module name="dict-nl">
      <build-name>${SB_PROG_NAME}-nl-0.50-2</build-name>

      <sources>
        <source checksum="c3ef9fd7dc4c47d816eee9ef5149c76a"
          checksum-type="md5" size="428365"
          path="src/aspell-nl-0.50-2.tar.bz2"/>
      </sources>
    </module>

    <module name="dict-no">
      <build-name>${SB_PROG_NAME}-no-0.50-2</build-name>

      <sources>
        <source checksum="b24b20ad02ce2a569f71f949b48823cc"
          checksum-type="md5" size="286696"
          path="src/aspell-no-0.50-2.tar.bz2"/>
      </sources>
    </module>

    <module name="dict-da">
      <build-name>new_aspell-da-1.7.15</build-name>

      <sources>
        <source checksum="0bede61677802822ecc0d029a88c379c"
          checksum-type="md5" size="229216"
          path="src/new_aspell-da-1.7.15.tar.bz2"/>
      </sources>
    </module>

    <module name="dict-fr">
      <build-name>${SB_PROG_NAME}-fr-0.50-3</build-name>

      <sources>
        <source checksum="53a2d05c4e8f7fabd3cefe24db977be7"
          checksum-type="md5" size="283086"
          path="src/aspell-fr-0.50-3.tar.bz2"/>
      </sources>
    </module>

    <module name="dict-it">
      <build-name>${SB_PROG_NAME}-it-0.53-0</build-name>

      <sources>
        <source checksum="ab3cce02bf8bfdf4116f9f7e602cf4b7"
          checksum-type="md5" size="262636"
          path="src/aspell-it-0.53-0.tar.bz2"/>
      </sources>
    </module>

    <module name="dict-sv">
      <build-name>${SB_PROG_NAME}-sv-0.51-0</build-name>

      <sources>
        <source checksum="d180c781f8986ea0f65b6b18f02a494e"
          checksum-type="md5" size="93942"
          path="src/aspell-sv-0.51-0.tar.bz2"/>
      </sources>
    </module>

    <module name="gcc44"
    systype="*-linux*|*-solaris*">
      <sources>
        <source checksum="e66a9c9af6a60dc46134fdacf6ce97d7"
          checksum-type="md5" size="1878163"
          path="src/aspell-0.60.6.1.tar.gz"/>
        <patch checksum="ae2d0a3421683e4927e61cef0ac35b3e"
          checksum-type="md5" size="12517"
          path="src/aspell-0.60.6.1.tww.patch"/>
        <patch checksum="eb3f600d99f88d3a4bb8a4b24d794ebf"
          checksum-type="md5" size="2037523"
          path="src/aspell-0.60.6.1.auto.patch"/>
      </sources>

      <dependencies>
        <depend program="bison" add-path="prepend"
          type="build">v==2.4.3</depend>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v==4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
        <depend program="ncurses" var="NCURSES"
          install-name="ncurses57" module="widec">v&gt;=5.7</depend>
        <depend program="perl" add-path="prepend">v==5.12.2</depend>
      </dependencies>

      <script-header>
<![CDATA[
_datadir="${SB_INSTALL_PREFIX}/share"
_docdir="${SB_INSTALL_PREFIX}/doc"
_sysconfdir="${SB_INSTALL_PREFIX}/etc"

_gcc_subdir="gcc44"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CXXFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CC_LD_RT="-Wl,-rpath,"

  _ncurses_lib="ncursesw" ;;
*-linux*)
  CC_LD_RT="-Wl,-rpath,"

  _ncurses_lib="ncursesw" ;;
i?86*-solaris*)
  CFLAGS="-O2 -mtune=pentium4 -march=pentium4"
  CXXFLAGS="-O2 -mtune=pentium4 -march=pentium4"
  CC_LD_RT="-R"

  _ncurses_lib="ncursesw" ;;
*-solaris*)
  CFLAGS="-O2 -mcpu=ultrasparc -mvis"
  CXXFLAGS="-O2 -mcpu=ultrasparc -mvis"
  CC_LD_RT="-R"

  _ncurses_lib="ncursesw" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CXX="${CXX:-g++}" \
CFLAGS="${CFLAGS:--O2}" CXXFLAGS="${CXXFLAGS:--O2}" \
LDFLAGS="-L${SB_VAR_GCC_RT_LIB} ${CC_LD_RT}${SB_VAR_GCC_RT_LIB} \
${LDFLAGS+${LDFLAGS}}" --disable-dependency-tracking \
--enable-docdir=${_docdir} --datarootdir=${_datadir} \
--datadir=${_datadir} --sysconfdir=${_sysconfdir} \
--enable-curses-include="-I${SB_VAR_NCURSES_INC} \
-I${SB_VAR_NCURSES_INC}/${_ncurses_lib:-ncurses}" \
--enable-curses="-L${SB_VAR_NCURSES_LIB} \
${CC_LD_RT}${SB_VAR_NCURSES_LIB} -l${_ncurses_lib:-ncurses}" \
--infodir="${SB_INSTALL_PREFIX}/info" \
--mandir="${SB_INSTALL_PREFIX}/man" \
--libdir="${SB_INSTALL_PREFIX_LIB}/${_gcc_subdir}" \
--prefix=${SB_INSTALL_PREFIX}
]]>
      </configure>

      <build>
<![CDATA[
gmake pkgdatadir=${_datadir} \
pkglibdir="${SB_INSTALL_PREFIX_LIB}/aspell"
]]>
      </build>

      <install>
<![CDATA[
gmake install-libLTLIBRARIES
]]>
      </install>

      <uninstall>
<![CDATA[
rm -rf ${SB_INSTALL_PREFIX_LIB}/${_gcc_subdir}
]]>
      </uninstall>
    </module>

    <module name="dict-de">
      <build-name>aspell6-de-20030222-1</build-name>

      <sources>
        <source checksum="5950c5c8a36fc93d4d7616591bace6a6"
          checksum-type="md5" size="274407"
          path="src/aspell6-de-20030222-1.tar.bz2"/>
      </sources>
    </module>

    <module name="dict-ru">
      <build-name>aspell6-ru-0.99f7-1</build-name>

      <sources>
        <source checksum="c4c98eaa5e77ad3adccbc5c96cb57cb3"
          checksum-type="md5" size="427312"
          path="src/aspell6-ru-0.99f7-1.tar.bz2"/>
      </sources>
    </module>

    <module name="dict-en">
      <build-name>${SB_PROG_NAME}6-en-6.0-0</build-name>

      <sources>
        <source checksum="16449e0a266e1ecc526b2f3cd39d4bc2"
          checksum-type="md5" size="182442"
          path="src/aspell6-en-6.0-0.tar.bz2"/>
      </sources>
    </module>

    <notes>
      <change from="0.60.6" to="0.60.6.1">
        <item><para>Update to Automake 1.10.3</para></item>
        <item><para>Fix a bug which caused a race condition (leading
to a likely crash) when two threads try to update the dictionary cache
at the same time</para></item>
        <item><para>Numerous other minor updates and bug
fixes</para></item>
      </change>

      <change from="0.60.5" to="0.60.6">
        <item><para>Minor tweak to suggestion code which improved 
suggestion results in certain cases</para></item>
        <item><para>Always line buffer stdout and stderr in the Aspell 
utility when there is the potential for it to be used interactively
through a pipe</para></item>
        <item><para>Removed debug output in aspell 
munch-list</para></item>
        <item><para>Other minor updates and bug fixes</para></item>
      </change>

      <change from="0.60.4" to="0.60.5">
        <item><para>Compile fix for gcc 4.1</para></item>
        <item><para>Updated to Gettext 0.16.1, Libtool 1.5.22,
Automake 1.10, * Autoconf 2.61</para></item>
        <item><para>Documentation improvements, including an updated
`man' page</para></item>
        <item><para>Complain if more than one file is specified when
checking files using the `aspell check' command, rather than ignoring
the other files</para></item>
        <item><para>Large number of bug fixes</para></item>
      </change>

      <change from="0.60.3" to="0.60.4">
        <item><para>a bug that caused Aspell to crash when checking
certain Russian words, this bug likely affected other languages as
well</para></item>
        <item><para>to Gettext 0.14.5 which is required for AMD64,
also updated to to Libtool 1.5.20</para></item>
        <item><para>Fixed an alignment bug which causes mmap to always
fail when reading in dictionaries</para></item>
        <item><para>Added note about how `make clean' will remove the
HTML manuals</para></item>
        <item><para>Added manual page for prezip-bin and enhanced
word-list-compress manual page</para></item>
        <item><para>Other minor updates and bug fixes</para></item>
      </change>

      <change from="0.60.2" to="0.60.3">
        <item><para>Fixed bugs involving several of the C API
functions</para></item>
        <item><para>Fixed bug where `ultra' or `fast' mode will not
return any suggestions when soundslike lookup is not
used</para></item>
        <item><para>Made a minor, yet significant, optimization to the
suggestion code. This speed things up by an order of magnitude in some
cases.</para></item>
        <item><para>Avoid using the slow ngram scan except when the
`sug-mode' is `slow' or `bad-speller'</para></item>
        <item><para>Fixed a bug in curses mode which causes word-wrap
to not work correctly in some cases</para></item>
        <item><para>Fixed a bug in pipe mode with a missing
newline</para></item>
        <item><para>Fixed the `spell' compatibility
script</para></item>
        <item><para>Several other minor bugs fixed</para></item>
        <item><para>Made note about the change in behavior of the
`-l' command line switch</para></item>
        <item><para> Other manual update/fixes</para></item>
        <item><para>Updated to Libtool 1.5.18, Automake 1.9.6, and
Makeinfo 4.8</para></item>
      </change>

      <note type="usage">
        <para>Versions of the library for the vendor C++ compiler and
GCC 4.4.6 is available in the following directories:</para>
        <screen>
${SB_INSTALL_PREFIX}/lib            # Vendor C++ compiler
${SB_INSTALL_PREFIX}/lib/gcc44      # GCC 4.4.x
        </screen>

        <para>The following language dictionaries are available:
Danish (da), German (de), English (en), French (fr), Italian (it),
Dutch (nl), Norwegian (no), Russian (ru), Swedish (sv). They can be
selected with the <command>--lang=&lt;lang&gt;</command> command-line
option.</para>
      </note>
    </notes>

    <changelog>
      <change date="2011 February 15" revision="3"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Update bison dependency from 2.3 to
2.4.3</para></item>
        <item><para>Update gcc dependency from 4.2.4 to
4.4.5</para></item>
        <item><para>Update ncurses dependency from 5.6 to
5.7</para></item>
        <item><para>Replace gcc42 module with gcc44
module</para></item>
        <item><para>Add support for AIX 6.1</para></item>
      </change>

      <change date="2010 October 29" revision="2"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Add support for RHEL 6</para></item>
      </change>
    </changelog>
  </program>
</programs>

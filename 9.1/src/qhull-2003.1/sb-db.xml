<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="qhull" version="2003.1" revision="5">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <install-name>lib${SB_PROG_NAME}2003</install-name>

    <sources>
      <source checksum="48228e26422bff85ef1f45df5b6e3314"
        checksum-type="md5" size="724313"
        path="src/qhull-2003.1.tar.gz"/>
      <patch checksum="5f607eae26686c0ae6ebb60f8812c68f"
        checksum-type="md5" size="693"
        path="src/qhull-2003.1.tww.patch"/>
      <patch checksum="8230a5e4b5c67dbb2dc47b8d9e05c55e"
        checksum-type="md5" size="1435670"
        path="src/qhull-2003.1.auto.patch"/>
    </sources>

    <script-header>
<![CDATA[
_docdir="${SB_INSTALL_PREFIX}/doc"
]]>
    </script-header>

    <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC=xlc CFLAGS="-O2 -qro -qroconst -qmaxmem=-1 -qarch=ppc"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib"
  CC_LD_RT="-Wl,-blibpath:" ;;
ia64*-hpux*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+b," ;;
*-hpux11.[01]*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b," ;;
*-hpux*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b," ;;
*-irix*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1009,1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CC_LD_RT="-Wl,-rpath," ;;
*-redhat-linuxe6)
  # Octave testsuite segfaults if built at -O2
  CFLAGS="-O"
  CC_LD_RT="-Wl,-rpath," ;;
*-linux*)
  CC_LD_RT="-Wl,-rpath," ;;
*-osf*)
  CC=cc CFLAGS="-O2 -arch ev5 -msym -readonly_strings"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=pentium4"
  CC_LD_RT="-R" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-xarch=v8plusa"
  CC_LD_RT="-R" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-m32 -xarch=sparcvis"
  CC_LD_RT="-R" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CFLAGS="${CFLAGS:--O2}" \
LDFLAGS="${LDFLAGS+${LDFLAGS}}" --disable-dependency-tracking \
--libdir=${SB_INSTALL_PREFIX_LIB} \
--mandir="${SB_INSTALL_PREFIX}/man" --prefix=${SB_INSTALL_PREFIX}
]]>
    </configure>

    <build>
<![CDATA[
gmake docdir=${_docdir}
]]>
    </build>

    <install>
<![CDATA[
gmake install docdir=${_docdir}
]]>
    </install>

    <licenses>
      <license>
        <para align="center">Qhull, Copyright (c) 1993-2003</para>
        <para align="center">The National Science and Technology
Research Center for Computation and Visualization of Geometric
Structures</para>
        <para align="center" skip="0">(The Geometry Center)</para>
        <para align="center" skip="0">University of Minnesota</para>
        <para align="center">email: qhull@qhull.org</para>
        <para>This software includes Qhull from The Geometry Center.
Qhull is copyrighted as noted above. Qhull is free software and may be
obtained via http from www.qhull.org. It may be freely copied,
modified, and redistributed under the following conditions:</para>
        <orderedlist>
          <item><para>All copyright notices must remain intact in all
files.</para></item>
          <item><para>A copy of this text file must be distributed
along with any copies of Qhull that you redistribute; this includes
copies that you have modified, or copies of programs or other software
products that include Qhull.</para></item>
          <item><para>If you modify Qhull, you must include a notice
giving the name of the person performing the modification, the date of
modification, and the reason for such modification.</para></item>
          <item><para>When distributing modified versions of Qhull, or
other software products that include Qhull, you must provide notice
that the original source code may be obtained as noted
above.</para></item>
          <item><para>There is no warranty or other guarantee of
fitness for Qhull, it is provided solely "as is". Bug reports or fixes
may be sent to qhull_bug@qhull.org; the authors may or may not act on
them as they desire.</para></item>
        </orderedlist>
      </license>
    </licenses>

    <changelog>
      <change date="2012 January 12" revision="5"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Add support for AIX 7.1</para></item>
        <item><para>Remove support for Solaris 6 and 7, RHEL 3,
SLES</para></item>
      </change>

      <change date="2010 November 1" revision="4"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Add support for RHEL 6</para></item>
      </change>

      <change date="2009 April 23" revision="3"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Add support for SLES 10</para></item>
        <item><para>Add support for HP-UX 11.31</para></item>
        <item><para>Add support for AIX 6.1</para></item>
      </change>

      <change date="2008 May 15" revision="2"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Update <command>ltmain.sh</command> so library
extension added to library filenames</para></item>
      </change>
    </changelog>
  </program>
</programs>

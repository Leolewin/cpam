<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="automake" version="1.7.9" revision="11">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <install-name>${SB_PROG_NAME}17</install-name>

    <sources>
      <source checksum="571fd0b0598eb2a27dcf68adcfddfacb"
        checksum-type="md5" size="577705"
        path="src/automake-1.7.9.tar.bz2"/>
      <patch checksum="df557bbcceb5d3d18807c4836b1d2ac8"
        checksum-type="md5" size="1868"
        path="src/automake-1.7.9.CVE-2009-4029.patch"/>
      <patch checksum="94a197d4e598586b9aaa6b90db08e1c4"
        checksum-type="md5" size="579"
        path="src/automake-1.7.9.CVE-2012-3386.patch"/>
      <patch checksum="b0abbf4766a3b6f27d4fef1fe4fd4b3a"
        checksum-type="md5" size="2239"
        path="src/automake-1.7.9.tww.patch"/>
      <patch checksum="289ce282180e4d846bb6ec2b0045b7eb"
        checksum-type="md5" size="58272"
        path="src/automake-1.7.9.auto.patch"/>
    </sources>

    <dependencies>
      <depend program="autoconf" install-name="autoconf25"
        add-path="prepend">v&gt;=2.59</depend>
      <depend program="perl" var="PERL"
        add-path="prepend">v==5.12.2</depend>
    </dependencies>

    <script-header>
<![CDATA[
_datadir="${SB_INSTALL_PREFIX}/share"
_docdir="${SB_INSTALL_PREFIX}/doc"
]]>
    </script-header>

    <configure>
<![CDATA[
./configure --datadir="${_datadir}" --prefix=${SB_INSTALL_PREFIX}
]]>
    </configure>

    <build>
<![CDATA[
gmake m4datadir=${_datadir} pkgdatadir=${_datadir} \
pkgvdatadir=${_datadir}
]]>
    </build>

    <test>
      <dependencies replace="0">
        <depend program="libtool" install-name="libtool15"
          add-path="prepend">v&gt;=1.5</depend>
      </dependencies>
<![CDATA[
PERL=${SB_VAR_PERL}/bin/perl MAKE=gmake gmake check

:
]]>
    </test>

    <install>
<![CDATA[
gmake install m4datadir=${_datadir} pkgdatadir=${_datadir} \
pkgvdatadir=${_datadir}

${SB_PATH_INSTALL} -m 755 -o root -g 0 -d ${_docdir}
${SB_PATH_INSTALL} -m 644 -o root -g 0 automake.texi \
version.texi ${_docdir}
]]>
    </install>

    <notes>
      <change from="1.7.8" to="1.7.9">
        <item><para>Fix install-strip to work with nobase_
binaries</para></item>
        <item><para>Fix renaming of #line directives in
ylwrap</para></item>
        <item><para>Rebuild with Autoconf 2.59 (1.7.8 was not
installable with pdksh)</para></item>
      </change>
    </notes>

    <changelog>
      <change date="2012 July 13" revision="11"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Apply patch for CVE-2012-3386 (<ulink url="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-3386">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-3386</ulink>).
A race condition in automake (<command>lib/am/distdir.am</command>)
could allow a local attacker to run arbitrary code with the privileges
of the user running make distcheck.</para></item>
      </change>

      <change date="2012 January 30" revision="10"
      author="Gary V. Vaughan" email="gary@thewrittenword.com">
        <item><para>Update perl dependency from 5.8.8 to
5.12.2.</para></item>
        <item><para>Make libtool a test only dependency.</para></item>
      </change>

      <change date="2009 December 9" revision="9"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Apply patch for CVE-2009-4029 (<ulink url="http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-4029">http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-4029</ulink>).
The (1) dist or (2) distcheck rules in GNU Automake, when producing a
distribution tarball for a package that uses Automake, assign insecure
permissions (777) to directories in the build tree, which introduces a
race condition that allows local users to modify the contents of
package files, introduce Trojan horse programs, or conduct other
attacks before the build is complete.</para></item>
      </change>

      <change date="2009 June 17" revision="8"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Upgrade Perl dependency from 5.8.6 to
5.8.8</para></item>
      </change>

      <change date="2008 September 12" revision="7"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Add support for AIX 6.1</para></item>
      </change>

      <change date="2005 August 9" revision="6"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Removed texinfo dependency as now part of 
sbutils</para></item>
      </change>

      <change date="2005 May 4" revision="5"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Upgrade perl dependency from 5.8.2 to
5.8.6</para></item>
      </change>

      <change date="2004 November 1" revision="4"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Upgrade texinfo dependency from 4.6 to
4.7</para></item>
      </change>

      <change date="2004 September 15" revision="3"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Ignore failed tests</para></item>
      </change>

      <change date="2004 August 22" revision="2"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Upgrade libtool dependency from 1.4.2 to
1.5</para></item>
      </change>
    </changelog>
  </program>
</programs>

<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="GraphicsMagick" version="1.3.6" revision="5">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <install-name>graphicsmagick13</install-name>

    <sources>
      <source checksum="3df30799df3b567df98bab7f5b2cc68e"
        checksum-type="md5" size="6556163"
        path="src/GraphicsMagick-1.3.6.tar.bz2"/>
      <patch checksum="7d3d7cafc59fa2270401a006db78fd70"
        checksum-type="md5" size="11025"
        path="src/GraphicsMagick-1.3.6.tww.patch"/>
      <patch checksum="69feed9ed89855514ee1980f66ff1324"
        checksum-type="md5" size="462"
        path="src/GraphicsMagick-1.3.6.newpng.patch"/>
      <patch checksum="e577ade991eb3d766508d394d5beaed4"
        checksum-type="md5" size="1023865"
        path="src/GraphicsMagick-1.3.6.libtool.patch"/>
      <patch checksum="028c549fbd7912d9c88b8af261642356"
        checksum-type="md5" size="4547"
        path="src/GraphicsMagick-1.3.6.added_deps.patch"/>
      <patch checksum="53e673535fdce783acf2656d43e98a08"
        checksum-type="md5" size="244"
        path="src/GraphicsMagick-1.3.6.perl_typemap.patch"/>
      <patch checksum="8e4f544364c4c1ef5fabd2a8add85a75"
        checksum-type="md5" size="3255713"
        path="src/GraphicsMagick-1.3.6.auto.patch"/>
    </sources>

    <dependencies>
      <depend program="bzip2" var="BZIP2"
        install-name="bzip210">v&gt;=1.0.6</depend>
      <depend program="ghostscript" var="GHOSTSCRIPT"
        install-name="ghostscript90"
        add-path="prepend">v&gt;=9.01</depend>
      <depend program="gnuplot" var="GNUPLOT"
        install-name="gnuplot44"
        add-path="prepend">v&gt;=4.4.4</depend>
      <depend program="transfig" var="TRANSFIG"
        install-name="transfig32"
        add-path="prepend">v&gt;=3.2.5</depend>
      <depend program="fonts" var="FONTS" install-name="fonts11"
        module="urw">v&gt;=1.1</depend>
      <depend program="freetype" var="LIBTTF" install-name="libttf24"
        add-path="prepend">v&gt;=2.4.6</depend>
      <depend program="jpeg" var="JPEG"
        install-name="libjpeg8">v&gt;=8b</depend>
      <depend program="lcms" var="LIBLCMS"
        install-name="liblcms11">v&gt;=1.19</depend>
      <depend program="libiconv" var="LIBICONV"
        install-name="libiconv113">v&gt;=1.13.1</depend>
      <depend program="libpng" var="LIBPNG"
        install-name="libpng14">v&gt;=1.4.4</depend>
      <depend program="libxml" var="LIBXML" install-name="libxml27"
        add-path="prepend">v&gt;=2.7.8</depend>
      <depend program="libwmf" var="LIBWMF" install-name="libwmf02"
        add-path="prepend">v&gt;=0.2.8</depend>
      <depend program="tiff" var="LIBTIFF"
        install-name="libtiff39">v&gt;=3.9.5</depend>
      <depend program="xpm" var="XPM"
        install-name="xpm">v&gt;=3.4k</depend>
      <depend program="zlib" var="LIBZ"
        install-name="libz12">v&gt;=1.2.5</depend>
    </dependencies>

    <validate>
      <depend program="GraphicsMagick" module="perl-5.12.2"
        systype="!*-aix*">v==1.3.6</depend>
    </validate>

    <script-header>
<![CDATA[
_datadir="${SB_INSTALL_PREFIX}/share"
_docdir="${SB_INSTALL_PREFIX}/doc"
_urw_fonts="${SB_VAR_FONTS}/share/urw"
]]>
    </script-header>

    <module name="default">
      <script-header>
<![CDATA[
_datadir="${SB_INSTALL_PREFIX}/share"
_docdir="${SB_INSTALL_PREFIX}/doc"
_urw_fonts="${SB_VAR_FONTS}/share/urw"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC=xlc_r CFLAGS="-O2 -qro -qroconst -qmaxmem=-1 -qarch=ppc"
  CXX=xlC_r CXXFLAGS="-O2 -qro -qroconst -qmaxmem=-1 -qarch=ppc"
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib"

  ARGS="--with-threads" ;;
ia64*-hpux*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+b,"

  ARGS="--x-includes=/usr/include/X11R6 --x-libraries=/usr/lib/X11R6 \
--with-threads" ;;
*-hpux11.[01]*)
  CC=cc CFLAGS="+O2 -Ae -z +Ofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch +Onolimit"
  CXX=aCC CXXFLAGS="+O2 -AA -z +Ofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b,"

  ARGS="--x-includes=/usr/include/X11R6 --x-libraries=/usr/lib/X11R6 \
--with-threads" ;;
*-hpux*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CXX=aCC CXXFLAGS="-AA -z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b,"

  ARGS="--x-includes=/usr/include/X11R6 --x-libraries=/usr/lib/X11R6 \
--with-threads" ;;
*-irix*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1009,1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CXX=CC CXXFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1009,1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CXXCPP="CC -E"
  CC_LD_RT="-Wl,-rpath,"

  ARGS="--with-threads" ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CXXFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CC_LD_RT="-Wl,-rpath,"

  ARGS="--with-threads" ;;
*-linux*)
  CC_LD_RT="-Wl,-rpath,"

  ARGS="--with-threads" ;;
*-osf*)
  CC=cc CFLAGS="-O2 -ieee -arch ev5 -msym -readonly_strings"
  CXX=cxx CXXFLAGS="-O2 -ieee -arch ev5 -msym -readonly_strings"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=pentium4"
  CXX=CC CXXFLAGS="-xO2 -xtarget=pentium4"
  CC_LD_RT="-R"

  ARGS="--with-threads" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-xarch=v8plusa"
  CXX=CC CXXFLAGS="-xO2 -xtarget=ultra2 -xarch=v8plusa"
  CC_LD_RT="-R"

  ARGS="--with-threads" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-m32 -xarch=sparcvis"
  CXX=CC CXXFLAGS="-xO2 -xtarget=ultra2 -m32 -xarch=sparcvis"
  CC_LD_RT="-R"

  ARGS="--with-threads" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" \
CPPFLAGS="-I${SB_VAR_XPM_INC} -I${SB_VAR_JPEG_INC} \
-I${SB_VAR_LIBLCMS_INC} -I${SB_VAR_LIBTIFF_INC} \
-I${SB_VAR_LIBPNG_INC} -I${SB_VAR_LIBZ_INC} \
-I${SB_VAR_BZIP2_INC} -I${SB_VAR_LIBTTF_INC} \
-I${SB_VAR_LIBWMF_INC} -I${SB_VAR_LIBXML_INC} \
${CPPFLAGS+${CPPFLAGS}}" CFLAGS="${CFLAGS:--O2}" \
${CXX+CXX="${CXX}"} CXXFLAGS="${CXXFLAGS:--O2}" \
CXXCPP="${CXXCPP+${CXXCPP}}" \
LDFLAGS="-L${SB_VAR_XPM_LIB} -L${SB_VAR_JPEG_LIB} \
-L${SB_VAR_LIBLCMS_LIB} -L${SB_VAR_LIBTIFF_LIB} \
-L${SB_VAR_LIBPNG_LIB} -L${SB_VAR_LIBZ_LIB} \
-L${SB_VAR_BZIP2_LIB} -L${SB_VAR_LIBTTF_LIB} \
-L${SB_VAR_LIBWMF_LIB} -L${SB_VAR_LIBXML_LIB} \
${CC_LD_RT}${SB_VAR_XPM_LIB}:${SB_VAR_JPEG_LIB}:${SB_VAR_LIBLCMS_LIB}:\
${SB_VAR_LIBTIFF_LIB}:${SB_VAR_LIBPNG_LIB}:${SB_VAR_LIBZ_LIB}:\
${SB_VAR_BZIP2_LIB}:${SB_VAR_LIBTTF_LIB}:${SB_VAR_LIBWMF_LIB}:\
${SB_VAR_LIBXML_LIB}${SB_VAR_LIBICONV+:${SB_VAR_LIBICONV_LIB}} \
${LDFLAGS+${LDFLAGS}}" \
--without-frozenpaths --enable-static --enable-shared \
--without-perl --without-dps --without-gslib --without-jbig \
--with-modules --disable-dependency-tracking \
--datarootdir=${_datadir} --datadir=${_datadir} \
--docdir=${_docdir} --mandir=${SB_INSTALL_PREFIX}/man \
--enable-libtool-verbose --with-quantum-depth=16 \
--with-gs-font-dir=${_urw_fonts} --disable-openmp \
${ARGS+${ARGS}} --prefix=${SB_INSTALL_PREFIX}

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!" \
magick/GraphicsMagick-config \
Magick++/bin/GraphicsMagick++-config

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" magick/GraphicsMagick.pc
]]>
      </configure>

      <build>
<![CDATA[
gmake pkgdocdir=${_docdir} \
pkgincludedir="${SB_INSTALL_PREFIX}/include"
]]>
      </build>

      <test>
<![CDATA[
gmake check
]]>
      </test>

      <install>
<![CDATA[
gmake install pkgdocdir=${_docdir} \
pkgincludedir="${SB_INSTALL_PREFIX}/include"
]]>
      </install>
    </module>

    <module name="perl-5.12.2"
    systype="!*-aix*">
      <dependencies replace="0">
        <depend program="GraphicsMagick">v==1.3.6</depend>
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v&gt;=4.4.6</depend>
        <depend program="perl" var="PERL"
          add-path="prepend">v==5.12.2</depend>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_install_prefix="${SB_INSTALL_PREFIX_LIB}/perl5122"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CFLAGS="-O2 -mcpu=powerpc"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib"
  CC_LD_RT="-Wl,-blibpath:"

  ARGS="--with-threads" ;;
ia64*-hpux*)
  CC_LD_RT="-Wl,+b,"

  ARGS="--x-includes=/usr/include/X11R6 --x-libraries=/usr/lib/X11R6 \
--with-threads" ;;
*-hpux*)
  CC_LD_RT="-Wl,+s,+b,"

  ARGS="--x-includes=/usr/include/X11R6 --x-libraries=/usr/lib/X11R6 \
--without-threads" ;;
*-irix*)
  CC_LD_RT="-Wl,-rpath,"

  ARGS="--with-threads" ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CC_LD_RT="-Wl,-rpath,"

  ARGS="--with-threads" ;;
*-linux*)
  CC_LD_RT="-Wl,-rpath,"

  ARGS="--with-threads" ;;
*-osf*)
  CFLAGS="-O2 -mcpu=ev5"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-solaris*)
  CFLAGS="-O2 -mtune=pentium4 -march=pentium4"
  CC_LD_RT="-R"

  ARGS="--with-threads" ;;
*-solaris*)
  CFLAGS="-O2 -mcpu=ultrasparc -mvis"
  CC_LD_RT="-R"

  ARGS="--with-threads" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" \
CPPFLAGS="-I${SB_VAR_XPM_INC} -I${SB_VAR_JPEG_INC} \
-I${SB_VAR_LIBLCMS_INC} -I${SB_VAR_LIBTIFF_INC} \
-I${SB_VAR_LIBPNG_INC} -I${SB_VAR_LIBZ_INC} \
-I${SB_VAR_BZIP2_INC} -I${SB_VAR_LIBTTF_INC} \
-I${SB_VAR_LIBWMF_INC} -I${SB_VAR_LIBXML_INC} \
${CPPFLAGS+${CPPFLAGS}}" CFLAGS="${CFLAGS:--O2}" \
${CXX+CXX="${CXX}"} CXXFLAGS="${CXXFLAGS:--O2}" \
CXXCPP="${CXXCPP+${CXXCPP}}" \
LDFLAGS="-L${SB_VAR_XPM_LIB} -L${SB_VAR_JPEG_LIB} \
-L${SB_VAR_LIBLCMS_LIB} -L${SB_VAR_LIBTIFF_LIB} \
-L${SB_VAR_LIBPNG_LIB} -L${SB_VAR_LIBZ_LIB} \
-L${SB_VAR_BZIP2_LIB} -L${SB_VAR_LIBTTF_LIB} \
-L${SB_VAR_LIBWMF_LIB} -L${SB_VAR_LIBXML_LIB} \
${CC_LD_RT}${SB_VAR_XPM_LIB}:${SB_VAR_JPEG_LIB}:${SB_VAR_LIBLCMS_LIB}:\
${SB_VAR_LIBTIFF_LIB}:${SB_VAR_LIBPNG_LIB}:${SB_VAR_LIBZ_LIB}:\
${SB_VAR_BZIP2_LIB}:${SB_VAR_LIBTTF_LIB}:${SB_VAR_LIBWMF_LIB}:\
${SB_VAR_LIBXML_LIB}${SB_VAR_LIBICONV+:${SB_VAR_LIBICONV_LIB}} \
${LDFLAGS+${LDFLAGS}}" \
--without-frozenpaths --enable-static --enable-shared \
--with-perl --without-dps --without-gslib --without-jbig \
--with-modules --without-magick-plus-plus \
--disable-dependency-tracking --datadir=${_datadir} \
--enable-libtool-verbose --with-quantum-depth=16 \
--with-gs-font-dir=${_urw_fonts} --disable-openmp \
${ARGS+${ARGS}} --prefix=${SB_INSTALL_PREFIX}

(cd PerlMagick
 ${SB_VAR_PERL}/bin/perl Makefile.PL PREFIX=${_install_prefix})
]]>
      </configure>

      <build>
<![CDATA[
gmake -C PerlMagick
]]>
      </build>

      <test>
<![CDATA[
gmake -C PerlMagick test

: ignore test failures
]]>
      </test>

      <install>
<![CDATA[
gmake -C PerlMagick install INSTALLPRIVLIB=${_install_prefix} \
INSTALLSITEARCH=${_install_prefix} \
INSTALLSITEMAN3DIR="${SB_INSTALL_PREFIX}/man/man3"

rm -rf ${_install_prefix}/lib

# install path for Perl's include.paths.d
${SB_PATH_INSTALL} -m 755 -o root -g 0 -d \
${_install_prefix}/include.paths.d
cat >${_install_prefix}/include.paths.d/99-${SB_PROG_NAME} <<_EOT_
${_install_prefix}
_EOT_
]]>
      </install>

      <uninstall>
<![CDATA[
rm -rf ${_install_prefix} ${SB_INSTALL_PREFIX}/man/man3
]]>
      </uninstall>
    </module>

    <module name="gcc44">
      <dependencies replace="0">
        <depend program="gcc" install-name="gcc44"
          add-path="prepend">v==4.4.6</depend>
        <depend var="GCC_RT" install-name="gcc44r"/>
      </dependencies>

      <script-header replace="0">
<![CDATA[
_gccsubdir="gcc44"
]]>
      </script-header>

      <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CFLAGS="-O2 -mcpu=powerpc"
  CXX=g++ CXXFLAGS="-O2 -mcpu=powerpc"
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib"

  ARGS="--with-magick-plus-plus --with-threads" ;;
ia64*-hpux*)
  CXX=g++
  CC_LD_RT="-Wl,+b,"

  ARGS="--x-includes=/usr/include/X11R6 --x-libraries=/usr/lib/X11R6 \
--with-threads" ;;
*-hpux11.[01]*)
  CXX=g++
  CC_LD_RT="-Wl,+s,+b,"

  ARGS="--x-includes=/usr/include/X11R6 --x-libraries=/usr/lib/X11R6 \
--with-threads" ;;
*-hpux*)
  CXX=g++
  CC_LD_RT="-Wl,+s,+b,"

  ARGS="--x-includes=/usr/include/X11R6 --x-libraries=/usr/lib/X11R6 \
--with-threads" ;;
*-irix*)
  CXX=g++
  CC_LD_RT="-Wl,-rpath,"

  ARGS="--with-threads" ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CXX=g++ CXXFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CC_LD_RT="-Wl,-rpath,"

  ARGS="--with-threads" ;;
*-linux*)
  CFLAGS="-O2"
  CXX=g++ CXXFLAGS="-O2"
  CC_LD_RT="-Wl,-rpath,"

  ARGS="--with-threads" ;;
*-osf*)
  CFLAGS="-O2 -mcpu=ev4"
  CXX=g++ CXXFLAGS="-O2 -mcpu=ev4"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-solaris*)
  CFLAGS="-O2 -mtune=pentium4 -march=pentium4"
  CXX=g++ CXXFLAGS="-O2 -mtune=pentium4 -march=pentium4"
  CC_LD_RT="-R"

  ARGS="--with-threads" ;;
*-solaris*)
  CFLAGS="-O2 -mcpu=ultrasparc -mvis"
  CXX=g++ CXXFLAGS="-O2 -mcpu=ultrasparc -mvis"
  CC_LD_RT="-R"

  ARGS="--with-threads" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" \
CPPFLAGS="-I${SB_VAR_XPM_INC} -I${SB_VAR_JPEG_INC} \
-I${SB_VAR_LIBLCMS_INC} -I${SB_VAR_LIBTIFF_INC} \
-I${SB_VAR_LIBPNG_INC} -I${SB_VAR_LIBZ_INC} \
-I${SB_VAR_BZIP2_INC} -I${SB_VAR_LIBTTF_INC} \
-I${SB_VAR_LIBWMF_INC} -I${SB_VAR_LIBXML_INC} \
${CPPFLAGS+${CPPFLAGS}}" CFLAGS="${CFLAGS:--O2}" \
${CXX+CXX="${CXX}"} CXXFLAGS="${CXXFLAGS:--O2}" \
CXXCPP="${CXXCPP+${CXXCPP}}" \
LDFLAGS="-L${SB_VAR_XPM_LIB} -L${SB_VAR_JPEG_LIB} \
-L${SB_VAR_LIBLCMS_LIB} -L${SB_VAR_LIBTIFF_LIB} \
-L${SB_VAR_LIBPNG_LIB} -L${SB_VAR_LIBZ_LIB} \
-L${SB_VAR_BZIP2_LIB} -L${SB_VAR_LIBTTF_LIB} \
-L${SB_VAR_LIBWMF_LIB} -L${SB_VAR_LIBXML_LIB} \
-L${SB_VAR_GCC_RT_LIB} \
${CC_LD_RT}${SB_VAR_XPM_LIB}:${SB_VAR_JPEG_LIB}:${SB_VAR_LIBLCMS_LIB}:\
${SB_VAR_LIBTIFF_LIB}:${SB_VAR_LIBPNG_LIB}:${SB_VAR_LIBZ_LIB}:\
${SB_VAR_BZIP2_LIB}:${SB_VAR_LIBTTF_LIB}:${SB_VAR_LIBWMF_LIB}:\
${SB_VAR_LIBXML_LIB}${SB_VAR_LIBICONV+:${SB_VAR_LIBICONV_LIB}}\
:${SB_VAR_GCC_RT_LIB} ${LDFLAGS+${LDFLAGS}}" \
--without-frozenpaths --enable-static --enable-shared \
--without-perl --without-dps --without-gslib --without-jbig \
--with-modules --disable-dependency-tracking \
--datarootdir=${_datadir} --datadir=${_datadir} \
--docdir=${_docdir} --mandir=${SB_INSTALL_PREFIX}/man \
--enable-libtool-verbose --with-quantum-depth=16 \
--with-gs-font-dir=${_urw_fonts} --disable-openmp \
${ARGS+${ARGS}} --libdir="${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}" \
--prefix=${SB_INSTALL_PREFIX}

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!" \
magick/GraphicsMagick-config \
Magick++/bin/GraphicsMagick++-config

${SB_PATH_SED} -i -e "\
s!-L\(\${libdir}\)!-L\1 ${CC_LD_RT}\1!;" magick/GraphicsMagick.pc
]]>
      </configure>

      <build>
<![CDATA[
gmake pkgdocdir=${_docdir} \
pkgincludedir="${SB_INSTALL_PREFIX}/include"
]]>
      </build>

      <test>
<![CDATA[
gmake check
]]>
      </test>

      <install>
<![CDATA[
gmake install-libLTLIBRARIES \
install-codersLTLIBRARIES \
install-filtersLTLIBRARIES \
install-configlibDATA \
install-pkgconfigDATA
]]>
      </install>

      <uninstall>
<![CDATA[
rm -rf ${SB_INSTALL_PREFIX_LIB}/${_gccsubdir}
]]>
      </uninstall>
    </module>

    <licenses>
      <license>
        <para>In November 2002, the GraphicsMagick Group created
GraphicsMagick from ImageMagick Studio's ImageMagick and applied this
license:</para>
        <para>Copyright (C) 2002 GraphicsMagick Group, an organization
dedicated to making software imaging solutions freely
available.</para>
        <para>Permission is hereby granted, free of charge, to any
person obtaining a copy of this software and associated documentation
files ("GraphicsMagick"), to deal in GraphicsMagick without
restriction, including without limitation the rights to use, copy,
modify, merge, publish, distribute, sublicense, and/or sell copies of
GraphicsMagick, and to permit persons to whom GraphicsMagick is
furnished to do so, subject to the following conditions:</para>
        <para>The above copyright notice and this permission notice
shall be included in all copies or substantial portions of
GraphicsMagick.</para>
        <para>The software is provided "as is", without warranty of
any kind, express or implied, including but not limited to the
warranties of merchantability, fitness for a particular purpose and
noninfringement. In no event shall GraphicsMagick Group be liable for
any claim, damages or other liability, whether in an action of
contract, tort or otherwise, arising from, out of or in connection
with GraphicsMagick or the use or other dealings in
GraphicsMagick.</para>
        <para>Except as contained in this notice, the name of the
GraphicsMagick Group shall not be used in advertising or otherwise to
promote the sale, use or other dealings in GraphicsMagick without
prior written authorization from the GraphicsMagick Group.</para>
      </license>

      <license>
        <para>In August 1999, ImageMagick Studio assumed the
responsibility for the development of ImageMagick and applied a new
license:</para>
        <para>Copyright (C) 2002 ImageMagick Studio, a non-profit
organization dedicated to making software imaging solutions freely
available.</para>
        <para>Permission is hereby granted, free of charge, to any
person obtaining a copy of this software and associated documentation
files ("ImageMagick"), to deal in ImageMagick without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, sublicense, and/or sell copies of ImageMagick,
and to permit persons to whom the ImageMagick is furnished to do so,
subject to the following conditions:</para>
        <para>The above copyright notice and this permission notice
shall be included in all copies or substantial portions of
ImageMagick.</para>
        <para>The software is provided "as is", without warranty of
any kind, express or implied, including but not limited to the
warranties of merchantability, fitness for a particular purpose and
noninfringement.  In no event shall ImageMagick Studio be liable for
any claim, damages or other liability, whether in an action of
contract, tort or otherwise, arising from, out of or in connection
with ImageMagick or the use or other dealings in ImageMagick.</para>
        <para>Except as contained in this notice, the name of the
ImageMagick Studio shall not be used in advertising or otherwise to
promote the sale, use or other dealings in ImageMagick without prior
written authorization from the ImageMagick Studio.</para>
      </license>

      <license>
        <para>From 1991 to August 1999, ImageMagick was developed and
distributed by E. I. du Pont de Nemours and Company:</para>
        <para>Copyright 1999 E. I. du Pont de Nemours and
Company</para>
        <para>Permission is hereby granted, free of charge, to any
person obtaining a copy of this software and associated documentation
files ("ImageMagick"), to deal in ImageMagick without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, sublicense, and/or sell copies of ImageMagick,
and to permit persons to whom the ImageMagick is furnished to do so,
subject to the following conditions:</para>
        <para>The above copyright notice and this permission notice
shall be included in all copies or substantial portions of
ImageMagick.</para>
        <para>The software is provided "as is", without warranty of
any kind, express or implied, including but not limited to the
warranties of merchantability, fitness for a particular purpose and
noninfringement. In no event shall E. I. du Pont de Nemours and
Company be liable for any claim, damages or other liability, whether
in an action of contract, tort or otherwise, arising from, out of or
in connection with ImageMagick or the use or other dealings in
ImageMagick.</para>
        <para>Except as contained in this notice, the name of the E.
I. du Pont de Nemours and Company shall not be used in advertising or
otherwise to promote the sale, use or other dealings in ImageMagick
without prior written authorization from the E. I. du Pont de Nemours
and Company.</para>
      </license>

      <license>
        <para>This copyright is limited to some code (for locating an
installed Ghostscript under Windows) in the file magick/nt_base.c
which was incorporated from the gsview package:</para>
        <para>Copyright (C) 2000-2002, Ghostgum Software Pty Ltd.  All
rights reserved.</para>
        <para>Permission is hereby granted, free of charge, to any
person obtaining a copy of this file ("Software"), to deal in the
Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or
sell copies of this Software, and to permit persons to whom this file
is furnished to do so, subject to the following conditions:</para>
        <para>This Software is distributed with NO WARRANTY OF ANY
KIND.  No author or distributor accepts any responsibility for the
consequences of using it, or for whether it serves any particular
purpose or works at all, unless he or she says so in writing.</para>
        <para>The above copyright notice and this permission notice
shall be included in all copies or substantial portions of the
Software.</para>
      </license>

      <license>
        <para>The GraphicsMagick Base64Decode() and Base64Encode()
functions are based on source code obtained from OpenSSH. This source
code is distributed under the following license.</para>
        <para>Copyright (c) 2000 Markus Friedl.  All rights
reserved.</para>
        <para>Redistribution and use in source and binary forms, with
or without modification, are permitted provided that the following
conditions are met:</para>
        <orderedlist>
          <item><para>Redistributions of source code must retain the
above copyright notice, this list of conditions and the following
disclaimer.</para></item>
          <item><para>Redistributions in binary form must reproduce
the above copyright notice, this list of conditions and the following
disclaimer in the documentation and/or other materials provided with
the distribution.</para></item>
        </orderedlist>

        <para>THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</para>
      </license>

      <license>
        <para>Many of the pattern images in coders/logo.c are derived
from XFig, which is distributed under the following license:</para>
        <para>FIG : Facility for Interactive Generation of
figures</para>
        <para>Copyright (c) 1985-1988 by Supoj Sutanthavibul</para>
        <para>Parts Copyright (c) 1989-2000 by Brian V. Smith</para>
        <para>Parts Copyright (c) 1991 by Paul King</para>
        <para>Any party obtaining a copy of these files is granted,
free of charge, a full and unrestricted irrevocable, world-wide, paid
up, royalty-free, nonexclusive right and license to deal in this
software and documentation files (the "Software"), including without
limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons who receive copies from any such party to do so, with
the only requirement being that this copyright notice remain
intact.</para>
      </license>

      <license>
        <para>The documentation for the composition operators is
copied from the rlecomp manual page, which is authored by Rod Bogart
and John W. Peterson. Rlecomp is part of the Utah Raster Toolkit
distributed by the University of Michigan and the University of Utah.
The copyright for this manual page is as follows:</para>
        <para>Copyright (c) 1986, University of Utah</para>
        <para>This software is copyrighted as noted below.  It may be
freely copied, modified, and redistributed, provided that the
copyright notice is preserved on all copies.</para>
        <para>There is no warranty or other guarantee of fitness for
this software, it is provided solely "as is".  Bug reports or fixes
may be sent to the author, who may or may not act on them as he
desires.</para>
        <para>You may not include this software in a program or other
software product without supplying the source, or without informing
the end-user that the source is available for no extra charge.</para>
        <para>If you modify this software, you should include a notice
giving the name of the person performing the modification, the date of
modification, and the reason for such modification.</para>
      </license>

      <license>
        <para>The C++ API known as "Magick++", and which resides in
the Magick++ directory, is distributed under the following
license:</para>
        <para>Copyright 1999 - 2003 Bob Friesenhahn
&lt;bfriesen@simple.dallas.tx.us&gt;</para>
        <para>Permission is hereby granted, free of charge, to any
person obtaining a copy of the source files and associated
documentation files ("Magick++"), to deal in Magick++ without
restriction, including without limitation of the rights to use, copy,
modify, merge, publish, distribute, sublicense, and/or sell copies of
Magick++, and to permit persons to whom the Magick++ is furnished to
do so, subject to the following conditions:</para>
        <para>This copyright notice shall be included in all copies or
substantial portions of Magick++. The copyright to Magick++ is
retained by its author and shall not be subsumed or replaced by any
other copyright.</para>
        <para>The software is provided "as is", without warranty of
any kind, express or implied, including but not limited to the
warranties of merchantability, fitness for a particular purpose and
noninfringement. In no event shall Bob Friesenhahn be liable for any
claim, damages or other liability, whether in an action of contract,
tort or otherwise, arising from, out of or in connection with Magick++
or the use or other dealings in Magick++.</para>
      </license>

      <license>
        <para>GraphicsMagick makes use of third-party "delegate"
libraries to support certain optional features. These libraries bear
their own copyrights and licenses, which may be more or less
restrictive than the GraphicsMagick license. For convenience, when
GraphicsMagick is bundled with (or compiled with) "delegate"
libraries, a copy of the licenses for these libraries is provided in a
"licenses" directory.</para>
      </license>
    </licenses>

    <notes>
      <change from="1.2.x" to="1.3.x">
        <items name="Security fixes:">
          <item><para>AVI reader: Re-worked to be more robust against
crash or DOS.</para></item>
          <item><para>AVS reader: Re-worked to be more robust against
crash or DOS.</para></item>
          <item><para>DCM reader: Re-worked to be more robust against
crash or DOS.</para></item>
          <item><para>EPT reader: Re-worked to be more robust against
crash or DOS.</para></item>
          <item><para>FITS reader: Re-worked to be more robust against
crash or DOS.</para></item>
          <item><para>MTV reader: Re-worked to be more robust against
crash or DOS.</para></item>
          <item><para>PALM reader: Re-worked to be more robust against
crash or DOS.</para></item>
          <item><para>RLA reader: Re-worked to be more robust against
crash or DOS.</para></item>
          <item><para>TGA reader: Re-worked to be more robust against
crash or DOS.</para></item>
          <item><para>Avoid possible crash in
GetImageCharacteristics() when substituting text in comment read from
file.</para></item>
          <item><para>Cineon reader: Fixed crash with broken file from
Sami Liedes.</para></item>
          <item><para>Palm reader: Fixed crash with broken files from
Sami Liedes.</para></item>
          <item><para>PICT reader: Fixed crash with broken files from
Sami Liedes.</para></item>
          <item><para>DPX reader: Validate file data better to avoid
improper operation with intentionally (or accidentally) defective
files.</para></item>
          <item><para>XCF reader: Fixed crash with broken files from
Sami Liedes.</para></item>
        </items>

        <items name="Bug fixes:">
          <item><para>Libbz2 is now detected for MinGW.</para></item>
          <item><para>Install documentation under
/usr/local/share/doc/GraphicsMagick by default, according to GNU
conventions.</para></item>
          <item><para>In PerlMagick, Dissolve composition was not
working right.</para></item>
          <item><para>FITS: Ensure that written format conforms to
specification.</para></item>
          <item><para>TIFF:</para>
          <unorderedlist>
            <item><para>Don't accidentially convert CMYK images to
RGB.</para></item>
            <item><para>Eliminated a memory leak in the codec
support detection code.</para></item>
          </unorderedlist></item>
          <item><para>JPEG: Removed over-write of
image-&gt;client_data.</para></item>
          <item><para>PDF: Try to properly deal with reading rotated
PDFs.</para></item>
          <item><para>PNG: Fixed crash when writing PNG images with
transparency and either optimize is requested, or the image is
colormapped.</para></item>
          <item><para>Configure: Fixed the --enable-magick-compat
configure option, which had stopped working.</para></item>
          <item><para>Configure: Fixed --without-magick-plus-plus so
that it works again. This stopped working in the 1.2 release
cycle.</para></item>
          <item><para>Configure: Fixed MagickLibVersion text string
generation so that it is now correct when a component of the release
number exceeds '9'. Now components can safely count up to '99' before
there is a problem.</para></item>
        </items>

        <items name="Performance Improvements:">
          <item><para>OpenMP (parallel processing) improvements for
these functions:</para>
          <unorderedlist>
            <item><para>Affine transform (-affine
-transform)</para></item>
            <item><para>Average images (-average)</para></item>
            <item><para>Add noise (+noise)</para></item>
            <item><para>Black threshold
(-black-threshold)</para></item>
            <item><para>Blur (-blur)</para></item>
            <item><para>Border (-border)</para></item>
            <item><para>Channel import, export, and depth-setting
(-channel, -depth)</para></item>
            <item><para>Clip path</para></item>
            <item><para>Coalesce (-coalesce)</para></item>
            <item><para>Colorize (-colorize)</para></item>
            <item><para>Colorspace transformation
(-colorspace)</para></item>
            <item><para>Compare images ('compare'
command)</para></item>
            <item><para>Composition ('composite'
command)</para></item>
            <item><para>Convolution (-convolve, -edge, -emboss,
-gaussian, -sharpen)</para></item>
            <item><para>Contrast adjust (-contrast)</para></item>
            <item><para>Crop (-crop)</para></item>
            <item><para>CycleColormap (-cycle)</para></item>
            <item><para>Depth setting (-depth, -operator
depth)</para></item>
            <item><para>Despeckle (-despeckle)</para></item>
            <item><para>Enhance (-enhance)</para></item>
            <item><para>Equalize (-equalize)</para></item>
            <item><para>Flatten (-flatten)</para></item>
            <item><para>Flip (-flip)</para></item>
            <item><para>Flop (-flop)</para></item>
            <item><para>Frame (-frame)</para></item>
            <item><para>Gamma adjust (-gamma, -operator
gamma)</para></item>
            <item><para>Gradient</para></item>
            <item><para>Implode (-implode)</para></item>
            <item><para>Levels adjust image (-level)</para></item>
            <item><para>Local adaptive threshold
(-lat)</para></item>
            <item><para>Median filter (-median)</para></item>
            <item><para>Minify image (-minify)</para></item>
            <item><para>Modulate image (-modulate)</para></item>
            <item><para>Morph image (-morph)</para></item>
            <item><para>Mosiac (-mosaic)</para></item>
            <item><para>Motion blur (-motion-blur)</para></item>
            <item><para>Negate image (-negate)</para></item>
            <item><para>Noise filter (-noise)</para></item>
            <item><para>Normalize image (-normalize)</para></item>
            <item><para>Oil Paint (-paint)</para></item>
            <item><para>Opaque (-opaque)</para></item>
            <item><para>Ordered dither
(-ordered-dither)</para></item>
            <item><para>Operators (-operator)</para></item>
            <item><para>Profile adjust (ICC)
(-profile)</para></item>
            <item><para>Random threshold
(-random-threshold)</para></item>
            <item><para>Resize image (-resize)</para></item>
            <item><para>Raise image (-raise)</para></item>
            <item><para>Roll image (-roll)</para></item>
            <item><para>Rotate image (-rotate)</para></item>
            <item><para>Shade image (-shade)</para></item>
            <item><para>Shear image (-shear)</para></item>
            <item><para>Shave (-shave)</para></item>
            <item><para>Solarize image (-solarize)</para></item>
            <item><para>Spread image (-spread)</para></item>
            <item><para>Statistics computation (identify
-verbose)</para></item>
            <item><para>Swirl (-swirl)</para></item>
            <item><para>Threshold channel (-threshold, -operator
threshold)</para></item>
            <item><para>Threshold image (-threshold)</para></item>
            <item><para>Transparent (-transparent)</para></item>
            <item><para>Trim image (-trim)</para></item>
            <item><para>UnsharpMaskImage (-unsharp)</para></item>
            <item><para>Wave (-wave)</para></item>
            <item><para>White threshold
(-white-threshold)</para></item>
          </unorderedlist></item>
          <item><para>Improved coder management
performance.</para></item>
          <item><para>XCF (GIMP) reader is much faster.</para></item>
        </items>

        <items name="New Features:">
          <item><para>Use MAGICK_CODER_STABILITY environment variable
to enable a subset of the coders based on their stability
classification.</para></item>
          <item><para>Use MAGICK_IO_FSYNC environment variable to
cause written file to be synchronized to disk to avoid possible data
loss on power fail.</para></item>
          <item><para>Added 'compare' command to statistically or
visually compare two image files.</para></item>
          <item><para>Added new channel operators
(-operator):</para>
          <unorderedlist>
            <item><para>Assign</para></item>
            <item><para>Gamma</para></item>
            <item><para>Depth</para></item>
            <item><para>Negate</para></item>
            <item><para>Noise-Gaussian</para></item>
            <item><para>Noise-Impulse</para></item>
            <item><para>Noise-Laplacian</para></item>
            <item><para>Noise-Multiplicative</para></item>
            <item><para>Noise-Poisson</para></item>
            <item><para>Noise-Uniform</para></item>
            <item><para>Threshold</para></item>
            <item><para>ThresholdBlack</para></item>
            <item><para>ThresholdWhite</para></item>
          </unorderedlist></item>
          <item><para>New composition operators
(-compose):</para>
          <unorderedlist>
            <item><para>CopyBlack</para></item>
            <item><para>CopyCyan</para></item>
            <item><para>CopyMagenta</para></item>
            <item><para>CopyYellow</para></item>
            <item><para>Divide</para></item>
          </unorderedlist></item>
          <item><para>Added -motion-blur to motion blur the
image.</para></item>
          <item><para>Mogrify and convert now support -black-threshold
and -white-threshold.</para></item>
          <item><para>MAT: Now supports reading compressed
files.</para></item>
          <item><para>FITS: Now supports 8, 16, 32 bit integer, float,
and double images and writes correct FITS format.</para></item>
          <item><para>DCRAW: Coder proxy module allows reading digital
camera files as if they were natively supported.</para></item>
          <item><para>New C API functions:</para>
          <unorderedlist>
            <item><para>AddNoiseImageChannel(), add noise to an
image channel.</para></item>
            <item><para>BlurImageChannel(), blur an image
channel.</para></item>
            <item><para>GaussianBlurImageChannel(), gaussian blur an
image channel.</para></item>
            <item><para>ImportImageChannelsMasked(), import selected
image channels.</para></item>
            <item><para>SharpenImageChannel(), sharpen an image
channel.</para></item>
            <item><para>UnsharpMaskImageChannel(), unsharpmask an
image channel.</para></item>
            <item><para>New cache view interfaces to correct
shortcommings of original ones. New interfaces are
AcquireCacheViewPixels(), AcquireOneCacheViewPixel(),
AcquireCacheViewIndexes(), GetCacheViewPixels(), SetCacheViewPixels(),
and SyncCacheViewPixels(). The deprecated functions are
AcquireCacheView(), GetCacheView(), SetCacheView(), and
SyncCacheView().</para></item>
            <item><para>GetCacheViewRegion() reports region bounded
by a cache view.</para></item>
            <item><para>GetCacheViewArea() reports area bounded by a
cache view.</para></item>
            <item><para>ExportViewPixelArea() exports a cache view
as formatted pixels.</para></item>
            <item><para>ImportViewPixelArea imports formatted pixels
into a cache view.</para></item>
          </unorderedlist></item>
          <item><para>Removed C API functions:</para>
          <unorderedlist>
            <item><para>ReadStream()</para></item>
            <item><para>WriteStream()</para></item>
          </unorderedlist></item>
          <item><para>Magick++ C++ API improvements</para>
          <unorderedlist>
            <item><para>Color class no longer considers transparent
black to be an invalid color.</para></item>
            <item><para>New Image methods addNoiseChannel(),
blurChannel(), gaussianBlurChannel(), motionBlur(),
randomThresholdChannel(), randomThresholdChannel(), sharpenChannel(),
unsharpmaskChannel().</para></item>
          </unorderedlist></item>
        </items>

        <items name="Feature improvements:">
          <item><para>-ordered-dither and -random-threshold may now be
used to individually dither any named channel.</para></item>
          <item><para>Mogrify and convert now support -minify to halve
the image size.</para></item>
          <item><para>Mogrify and convert now support -magnify to
double the image size.</para></item>
        </items>
      </change>

      <change from="1.1.x" to="1.2.x">
        <items name="   Security fixes:">
          <item><para>Fixes for CERT security alert TA04-217A
described at
"http://www.us-cert.gov/cas/techalerts/TA04-217A.html".</para></item>
          <item><para>AVI, BMP, &amp; DIB security
fixes.</para></item>
          <item><para>PSD security fixes.</para></item>
          <item><para>P7 format security fix.</para></item>
          <item><para>Fix EXIF IFD stack overflow
vulnerability.</para></item>
          <item><para>SGI security fix for RLE encoding
(CVE-2006-4144)</para></item>
          <item><para>XCF security fix (CVE-2006-3743)</para></item>
          <item><para>PALM heap overflow fix
(CVE-2006-5456)</para></item>
          <item><para>DCM security fix (CVE-2006-5456)</para></item>
          <item><para>Fix for shell command injection in delegate code
via file names) (CVE-2005-4601). Delegate execution is much more
secure now.</para></item>
          <item><para>Don't use filenames as printf specifications
(CVE-2006-0082).</para></item>
          <item><para>Fix integer overflow in DCM coder
(CVE-2007-1797).</para></item>
          <item><para>XWD integer overflow fix
(CVE-2007-1797).</para></item>
          <item><para>Implementation has replaced usage of strcpy,
strcat, and strncat with the more security conscious strlcat and
strlcpy.</para></item>
          <item><para>DCM, DIB, XCF, XBM, and XWD security fix for
integer overflow vulnerability (IDefense 09.19.07).</para></item>
          <item><para>Do not access X11 or invoke convenience or
stealth delegate programs based on the file extension. In particular,
these file extensions are rejected for consideration as a format
specifier: 'autotrace', 'browse', 'dcraw', 'edit', 'gs-color',
'gs-color+alpha', 'gs-gray', 'gs-mono', 'launch', 'mpeg-encode',
'print', 'scan', 'show', 'win', 'xc', and 'x'.</para></item>
        </items>

        <items name="Bug fixes:">
          <item><para>The configure script now searches for a web
browser in the order mozilla, firefox, and finally
netscape.</para></item>
          <item><para>When the user specifies the -units option, the
current image resolution values are now re-scaled to match the new
units.</para></item>
          <item><para>Properly determine Ghostscript font location for
Ghostscript 8.0 and later.</para></item>
          <item><para>GraphicsMagick now successfully builds and
passes all tests under Digital Unix 5.1, using the vendor
compiler.</para></item>
          <item><para>Ghostscript sometimes displays an error message
and fails, yet it returns a success error code to GraphicsMagick.
Verify that Ghostscript has updated the output file before attempting
to use it.</para></item>
          <item><para>Fixed a configure script syntax error when
testing for trio.</para></item>
          <item><para>When requesting a list of formats, all of the
modules in the module search path are considered. Previously only the
modules in the same directory as the LOGO module were
listed.</para></item>
          <item><para>Ensure that an image clip mask is respected by
the negate algorithm.</para></item>
          <item><para>The BMP writer was sometimes writing incorrect
BMP v4 files.</para></item>
          <item><para>Support reading and writing large PCX
files.</para></item>
          <item><para>The Red Hat source RPM was failing to install
the -config scripts with execute permissions.</para></item>
          <item><para>Fixed a bug which could cause possible
truncation while cloning the image cache.</para></item>
          <item><para>Ensure that MIFF files indicate the compression
which was actually used.</para></item>
          <item><para>Properly handle errors from libtiff so that
corrupted images are not output.</para></item>
          <item><para>Fix for stripped-TIFF reader. Discard extra
samples beyond alpha in scanline TIFFs.</para></item>
          <item><para>Endian option now controls TIFF byte-order
rather than bit-order.</para></item>
          <item><para>TIFF writer can now write to pipes and other
non-seekable output destinations.</para></item>
          <item><para>JBIG writer was writing empty files for some
libjbig releases.</para></item>
          <item><para>Improved handling of corrupt GIF
files.</para></item>
          <item><para>Handle large SUN format images.</para></item>
          <item><para>Properly compute image depth for 16-bit SGI
image files.</para></item>
          <item><para>For the gmdisplay program, ensure that only RGB
data is sent to Windows.</para></item>
          <item><para>Many memory leak fixes.</para></item>
          <item><para>PDF writer is fixed so that Ghoscript 8.5
doesn't warn about the output.</para></item>
          <item><para>PDF writer now writes proper output with CCITT
compression.</para></item>
          <item><para>Properly use fseeko() and ftello() if they are
available.</para></item>
          <item><para>Fixed a infinite loop bug in the XWD
reader.</para></item>
          <item><para>Fix minor memory leak in
ProfileImage().</para></item>
          <item><para>Fixed -level command parsing when a percent
symbol is supplied within the argument rather than at the
end.</para></item>
          <item><para>Fix pixel scaling problem caused by floating
point rounding error (noticed under AIX).</para></item>
          <item><para>Fixed a memory leak in the GIF coder in the
error return path.</para></item>
          <item><para>Fix for SourceForge bug id 1353744
"MagickGetQuantumDepth doesn't work".</para></item>
          <item><para>Fix for SourceForge bug id 1315109 "segfault in
InitializeMagick(NULL)".</para></item>
          <item><para>Fix for SourceForge bug id 1391421 "problem
doing resize on 273x1 JPEG".</para></item>
          <item><para>Fix for SourceForge bug id 1510075 "Failed to
write PDF with JPEG compression".</para></item>
          <item><para>Fix for SourceForge bug id 1572357 "GetOnePixel
definition appears incorrect".</para></item>
          <item><para>Fix for SourceForge bug id 1576616 Fix
includedir variable in pkg-config files".</para></item>
          <item><para>Fix for SourceForge bug id 1173713 "segfault in
ModifyCache".</para></item>
          <item><para>Fix for SourceForge bug id 1431805 "clip art wpg
files cause access violation in graphics magick".</para></item>
          <item><para>Fix for SourceForge bug id 1743141 "Affine
matrix option parsing".</para></item>
          <item><para>Fix for SourceForge bug id 1625477 "Memory leak
reading layered PSD Image".</para></item>
          <item><para>Fix for SourceForge bug id 1878992 "literal
square brackets in file name cause large delay and bug id 1783209
"converting runs slowly when subimage is specified".</para></item>
          <item><para>Fix for SourceForge bug id 1883527 "compression
of tiff-file has no effect".</para></item>
          <item><para>Successfully read files in the form
"file".</para></item>
          <item><para>Fix reading 12-bit grayscale JPEG.</para></item>
          <item><para>Set image depth appropriately when importing
image from X11 display.</para></item>
          <item><para>Fix map resource tracking.</para></item>
          <item><para>Fix reading recent variants of ImageMagick's
MIFF format.</para></item>
          <item><para>Output bilevel TIFF meeting the TIFF Class F
specification.</para></item>
        </items>

        <items name="New Utilities:">
          <item><para>A 'benchmark' subcommand is now available to
benchmark the performance of any other arbitrary subcommand (e.g.
'convert').</para></item>
        </items>

        <items name="Feature improvements:">
          <item><para>LZW compression is now enabled by
default.</para></item>
          <item><para>Support industry-standard subsampling notation
like "4:2:2".</para></item>
          <item><para>If gm is executed under a traditional alternate
name (e.g. convert), it will invoke the appropriate sub-command. This
allows use of hard links, symbolic links, or just copying 'gm' to the
desired sub-command name in order to achieve 100% ImageMagick 5.5.2
utility compatibility.</para></item>
          <item><para>Provide the --enable-magick-compat option when
configuring to install ImageMagick utilities compatibility
links.</para></item>
          <item><para>Identify -verbose output includes normalized
(0.0-1.0) statistics.</para></item>
          <item><para>Identify and convert now print "pixels per
second" rates to help evaluate performance.</para></item>
          <item><para>Added the identify +ping option to force reading
the complete file.</para></item>
          <item><para>The display program now supports the +progress
option to disable any visual progress indication (and hourglass
cursor) while loading images.</para></item>
          <item><para>Support writing grayscale TGA
files.</para></item>
          <item><para>Provide explicit support for Rec 601 and Rec 709
grayscale spaces.</para></item>
          <item><para>Include some support for a log RGB space based
on the 2.048 density range as defined for the Cineon Digital Film
System.</para></item>
          <item><para>Added utilities command-line support for
industry standard subsampling notation like 4:4:4 and
4:2:2.</para></item>
          <item><para>Use MAGICK_IOBUF_SIZE to tune the size of the
I/O buffer.</para></item>
          <item><para>Use -type Bilevel, Grayscale, TrueColor, or
TrueColorMatte to influence the type of image that Ghostscript
returns.</para></item>
          <item><para>Use '-define tiff:fill-order={msb2lsb|lsb2msb}'
to control TIFF bit fill order.</para></item>
          <item><para>The -version option now dumps a feature list as
well as the build options.</para></item>
          <item><para>The -endian option now supports the option
'native'.</para></item>
          <item><para>A -monitor is added to enable progress
monitoring for the command line utilities.</para></item>
          <item><para>Use the -output-directory option to 'mogrify' to
send output files to the specified directory.</para></item>
          <item><para>Use the -create-directories option in
conjunction with -output-directory and 'mogrify' to create any
necessary subdirectories.</para></item>
          <item><para>A Pixels resource limit is added. Use '-limit
Pixels value' to limit the maximum number of pixels in an image to
'value'.</para></item>
          <item><para>The already supported option '-type Optimize' is
now honored by formats that need to choose a subformat based on the
properties of the image. Grueling tests of many/all pixels are not
performed unless '-type Optimize' is supplied.</para></item>
          <item><para>Added a a -set option to the composite, convert,
display, mogrify, import commands in order to allow setting an image
attribute.</para></item>
          <item><para>Display utility no longer defaults to reading
from standard input if stdin is not a tty.</para></item>
          <item><para>May now be configured to use the umem memory
allocation library available in Solaris 9, Update 3 and later, or from
the portable umem project.</para></item>
        </items>

        <items name="Coder additions/improvements:">
          <item><para>Replaced existing DPX "support" with all-new DPX
support conforming to the SMPTE 268M-2003 standard.</para></item>
          <item><para>Cineon reader completely
rewritten.</para></item>
          <item><para>TIFF coder is completely re-written. Now
supports reading and writing RGB, CMYK, and grayscale,
scanline-oriented TIFF images with arbitrary (1 to 32 bits) depth.
Includes support for tiled TIFF, floating point TIFF, LogLuv TIFF,
BigTIFF, arbitrary depths, and associated alpha.</para></item>
          <item><para>TIFF coder now supports retrieving and saving
XMP profiles.</para></item>
          <item><para>MATLAB support is much improved and supports
writing as well.</para></item>
          <item><para>WPG reader now supports CTM
translations.</para></item>
          <item><para>ART format now supports writing.</para></item>
          <item><para>Support 32-bit raw RGB images.</para></item>
          <item><para>Support 32-bit raw CMYK images.</para></item>
          <item><para>Support 32-bit raw gray images.</para></item>
          <item><para>JP2 coder reads images in YCbCr colorspace and
retrieves an embedded ICC ICM color profile if present.</para></item>
        </items>

        <items name="API enhancements:">
          <item><para>Added ExportImageChannel() and
ImportImageChannel() APIs to support exporting and importing pixel
regions with an arbitary range of (1 to 32) bits per
quantum.</para></item>
          <item><para>Added image leveling methods for
Magick++.</para></item>
          <item><para>Generalized GetImageAttribute() support for
retrieving wildcarded attributes so that an identify -format
specification like "%[dpx:*]" works as expected.</para></item>
          <item><para>Incorporated changes changes necessary so that
GraphicsMagick can work with the Ch C/C++ interpreter from
SoftIntegration at http://www.softintegration.com/.</para></item>
          <item><para>Added MagickAllocFunctions() to allow the API
user to replace the underlying memory allocator
functions.</para></item>
          <item><para>Added MagickMalloc() and deprecated
AcquireMemory().</para></item>
          <item><para>Added MagickCloneMemory() and deprecated
CloneMemory().</para></item>
          <item><para>Added MagickMallocArray() to safely allocate N
items of size S.</para></item>
          <item><para>Added MagickRealloc() and deprecated
ReacquireMemory().</para></item>
          <item><para>Added MagickFree() and deprecated
LiberateMemory().</para></item>
        </items>

        <items name="Performance improvments:">
          <item><para>The DispatchImage() and ConstituteImage()
functions incorporate special case code for BGR, BGRO, BGRP, RGB,
RGBO, and I formats (8 bit only) in order to improve performance
dramatically.</para></item>
          <item><para>When writing very large JPEG images, don't
enable Huffman compression since doing so requires libjpeg to buffer
the entire image in memory.</para></item>
          <item><para>When using the 'identify' -verbose option,
-verbose must be specified twice in order to obtain the color count.
This makes normal use of -verbose much faster.</para></item>
          <item><para>Significantly improved read/write speed for
bilevel and gray images.</para></item>
          <item><para>TIFF I/O is considerably faster.</para></item>
          <item><para>Postscript writer is 10-15X
faster.</para></item>
          <item><para>PNM formats writer is 10-100X
faster.</para></item>
          <item><para>Rotate by 90 or 270 degrees is 2-9X
faster.</para></item>
        </items>

        <items name="Windows-specific improvements/changes:">
          <item><para>For the MinGW and Cygwin builds, the Magick++
library is forced to build as a static library since otherwise C++
exceptions don't work.</para></item>
          <item><para>MinGW cross-build is available from a Linux or
FreeBSD host.</para></item>
          <item><para>Determine location of Ghostscript fonts only
once in order to improve performance.</para></item>
          <item><para>Updated bzip2 to 1.0.4.</para></item>
          <item><para>Updated Jasper library to version
1.900.1.</para></item>
          <item><para>Updated jbigkit to 1.6</para></item>
          <item><para>Updated lcms to 1.17</para></item>
          <item><para>Updated libpng to 1.2.27.</para></item>
          <item><para>Updated libtiff to 3.8.2</para></item>
          <item><para>Updated zlib to 1.2.3.</para></item>
          <item><para>Libtiff supports LZW compression.</para></item>
          <item><para>X11 is no longer part of the default build and
will not be included in the distributed install packages (but can
still be built).</para></item>
          <item><para>Find latest Ghostscript which idenfies itself as
"GPL Ghostscript".</para></item>
          <item><para>Use GlobalMemoryStatusEx(), if available, to
determine how much physical memory is available. Important for
large-memory machines.</para></item>
          <item><para>Fixed NTreaddir() so that it does not write
beyond its buffer.</para></item>
          <item><para>Fixed opendir() emulation function so it can't
overwrite the stack.</para></item>
          <item><para>FlashPIX library sources are no longer
distributed in the Windows source package and building FlashPIX is
disabled by default. FlashPIX may still be built by adding the library
(separately distributed).</para></item>
          <item><para>Fix bitmap handle leak in CropImageToHBITMAP()
and ImageToHBITMAP().</para></item>
        </items>
      </change>

      <note type="usage">
        <para>The Magick++ C++ interface to the GraphicsMagick library
is available for AIX, HP-UX 11.x, IRIX 6.5, RHEL, Solaris, and Tru64
UNIX using the vendor C++ compiler.</para>
        <para>The Graphics::Magick Perl binding is available in the
following directory:</para>
        <screen>
${SB_INSTALL_PREFIX}/lib/perl5122    # Perl 5.12.2
        </screen>

        <para>The directory is automatically added to the Perl
include.paths.d directory by the postinstall script.</para>
      </note>

      <platform name="HP-UX 11.00">
        <para>Patch <command>PHSS_22543</command> providing the
<command>libstd_v2</command> Standard C++ library is required as the
HP C++ compiler was used.</para>
      </platform>

      <platform name="Tru64 UNIX">
        <para>The latest C++ runtime library is required due to the
usage of the latest Compaq C++ compiler. It is available from the
following locations:</para>
        <unorderedlist>
          <item><para>package CXXREDIST651V37.tar in the support
directory of the CD</para></item>
          <item><para>online support directory <ulink url="ftp://support.thewrittenword.com/dists">ftp://support.thewrittenword.com/dists</ulink></para></item>
          <item><para>directly from Compaq at <ulink url="ftp://ftp.compaq.com/pub/products/C-CXX/Tru64/cxx/cxxredist.htm">ftp://ftp.compaq.com/pub/products/C-CXX/Tru64/cxx/cxxredist.htm</ulink></para></item>
        </unorderedlist>
      </platform>
    </notes>

    <changelog>
      <change date="2012 January 21" revision="5"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Update bzip2 dependency from 1.0.5 to
1.0.6</para></item>
        <item><para>Update freetype dependency from 2.3.7 to
2.4.6</para></item>
        <item><para>Update gcc dependency from 4.2.4 to
4.4.6</para></item>
        <item><para>Update ghostscript dependency from 8.63 to
9.01</para></item>
        <item><para>Update gnuplot dependency from 4.2.4 to
4.4.4</para></item>
        <item><para>Update jpeg dependency from 6b to 8b</para></item>
        <item><para>Update lcms dependency from 1.17 to
1.19</para></item>
        <item><para>Update libiconv dependency from 1.12 to
1.13.1</para></item>
        <item><para>Update libpng dependency from 1.2.29 to
1.4.4</para></item>
        <item><para>Update libxml dependency from 2.6.32 to
2.7.8</para></item>
        <item><para>Update tiff dependency from 3.8.2 to
3.9.5</para></item>
        <item><para>Update zlib dependency from 1.2.3 to
1.2.5</para></item>
      </change>

      <change date="2010 October 29" revision="4"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Add support for RHEL 6</para></item>
      </change>

      <change date="2010 February 10" revision="3"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Rebuild configure without c99 library behavior on
Solaris 10</para></item>
      </change>

      <change date="2010 February 6" revision="2"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Add module for gcc-4.2.4</para></item>
      </change>
    </changelog>
  </program>
</programs>

<?xml version="1.0"?>
<programs>
<!DOCTYPE programs SYSTEM "sb-db.dtd">
  <program name="autogen" version="5.9.7" revision="3">
    <build-name>${SB_PROG_NAME}-${SB_PROG_VER}</build-name>

    <install-name>${SB_PROG_NAME}59</install-name>

    <sources>
      <source checksum="71ed6e1104803b99cb962c0dca357014"
        checksum-type="md5" size="1019339"
        path="src/autogen-5.9.7.tar.bz2"/>
      <patch checksum="af4dcb2b253de22c701d4f7c235f0635"
        checksum-type="md5" size="295376"
        path="src/autogen-5.9.7.tww.patch"/>
      <patch checksum="58b73efb2cdc4e3e6c557f96694c93df"
        checksum-type="md5" size="2099910"
        path="src/autogen-5.9.7.auto.patch"/>
    </sources>

    <dependencies>
      <depend program="autoconf" install-name="autoconf26"
        add-path="prepend" type="build">v&gt;=2.66</depend>
      <depend program="automake" install-name="automake111"
        add-path="prepend" type="build">v&gt;=1.11.1</depend>
      <depend program="bison" install-name="bison24"
        add-path="prepend" type="build">v&gt;=2.4.3</depend>
      <depend program="gawk" install-name="gawk31" add-path="prepend"
        type="build">v&gt;=3.1.8</depend>
      <depend program="gperf" install-name="gperf30"
        add-path="prepend" type="build">v&gt;=3.0.4</depend>
      <depend program="guile" var="GUILE" install-name="guile18"
        add-path="prepend">v&gt;=1.8.6</depend>
      <depend program="mktemp" install-name="mktemp17"
        add-path="prepend" type="build">v&gt;=1.7</depend>
      <depend program="libxml" var="LIBXML"
        install-name="libxml27">v&gt;=2.7.8</depend>
      <depend program="perl" var="PERL"
        type="build">v==5.12.2</depend>
    </dependencies>

    <script-header>
<![CDATA[
_datadir="${SB_INSTALL_PREFIX}/share"
_docdir="${SB_INSTALL_PREFIX}/doc"
]]>
    </script-header>

    <configure>
<![CDATA[
case "${SB_SYSTYPE}" in
*-aix*)
  CC=xlc CFLAGS="-O2 -qro -qroconst -qmaxmem=-1 -qarch=ppc"
  CC_LD_RT="-Wl,-blibpath:"
  LDFLAGS="-Wl,-brtl -Wl,-blibpath:/usr/lib" ;;
ia64*-hpux*)
  CC=cc CFLAGS="-z +O1 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch"
  CC_LD_RT="-Wl,+b," ;;
*-hpux11.[01]*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +DAportable \
+Oentrysched +Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+s,+b," ;;
*-hpux11*)
  CC=cc CFLAGS="-z +O2 +Ofltacc +Olit=all +Oentrysched \
+Odataprefetch +Onolimit"
  CC_LD_RT="-Wl,+b," ;;
*-irix*)
  CC=cc CFLAGS="-Wl,-woff,84 -Wl,-woff,85 -woff 1429 \
-use_readonly_const -G0 -rdata_shared -DEBUG:optimize_space=ON \
-O2 -OPT:Olimit=0"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-linux*)
  CFLAGS="-O2 -mtune=pentiumpro -march=pentiumpro"
  CC_LD_RT="-Wl,-rpath," ;;
*-linux*)
  CC_LD_RT="-Wl,-rpath," ;;
*-osf*)
  CC=cc CFLAGS="-O2 -arch ev5 -msym -readonly_strings"
  CC_LD_RT="-Wl,-rpath," ;;
i?86*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=pentium4"
  CC_LD_RT="-Wl,-R" ;;
*-solaris2.8)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-xarch=v8plusa"
  CC_LD_RT="-Wl,-R" ;;
*-solaris*)
  CC=cc CFLAGS="-mr -Qn -xstrconst -xO2 -xtarget=ultra2 \
-m32 -xarch=sparcvis"
  CC_LD_RT="-Wl,-R" ;;
esac

${SHELL} ./configure CC="${CC:-gcc}" CFLAGS="${CFLAGS:--O2}" \
CPPFLAGS="-I${SB_VAR_LIBXML_INC-/usr/include}/libxml2" \
LDFLAGS="${SB_VAR_GC_RT+-L${SB_VAR_GCC_RT_LIB} \
${CC_LD_RT}${SB_VAR_GCC_RT_LIB}} ${LDFLAGS+${LDFLAGS}}" \
--enable-shared --enable-static --datadir=${_datadir} \
--datarootdir=${_datadir} --disable-dependency-tracking \
${SB_VAR_GUILE+--with-libguile-cflags=-I${SB_VAR_GUILE_INC}} \
${SB_VAR_GUILE+--with-libguile-libs="-L${SB_VAR_GUILE_LIB} \
${CC_LD_RT}${SB_VAR_GUILE_LIB} -lguile"} \
${SB_VAR_LIBXML+--with-libxml2=${SB_VAR_LIBXML}} \
${ARGS+${ARGS}} ag_cv_test_ldflags=${CC_LD_RT} \
--infodir="${SB_INSTALL_PREFIX}/info" \
--libdir=${SB_INSTALL_PREFIX_LIB} \
--mandir="${SB_INSTALL_PREFIX}/man" \
--prefix=${SB_INSTALL_PREFIX}

# rebuild info files
(rm -f doc/autogen.info*) 2>/dev/null || :
]]>
    </configure>

    <build>
<![CDATA[
gmake MAKEINFOFLAGS="--no-split"
]]>
    </build>

    <test>
<![CDATA[
gmake -k check MAKE=gmake VERBOSE=true || :
]]>
    </test>

    <install>
<![CDATA[
gmake install

${SB_PATH_INSTALL} -m 755 -o root -g 0 -d ${_docdir}/texinfo
${SB_PATH_INSTALL} -m 644 -o root -g 0 doc/autogen.texi \
doc/snprintfv.texi ${_docdir}/texinfo
]]>
    </install>

    <notes>
      <change from="5.9.3" to="5.9.5">
        <item><para>integer number arguments may now have their values
suffixed with one of the letters k/K/m/M/g/G/t/T to signify scaling by
powers of 1000 (lower case) or 1024 (upper case).  Specify,
"scaled".</para></item>
        <item><para>AutoOpts "arg-type" may now be set to "file".
Existence of the directory portion of the name will be checked.  The
existence (or not) of the actual file may also be checked.  Finally,
the file may be pre-opened with either "fopen(3C)" or
"open(2)".</para></item>
        <item><para>The "columns" program now accepts a "--fill"
option to cause it to fill text instead of filling
columns.</para></item>
        <item><para>The tests should no longer indirectly reference
installed versions of the binaries.  They should all work out of the
build directories.</para></item>
      </change>

      <change from="5.9.2" to="5.9.3">
        <item><para>libopts requires strsignal, so the config test has
been moved.</para></item>
        <item><para>fixed ``--save'' option bug</para></item>
        <item><para>programs may now choose to have config files kept
in cannonical form ("C" locale), even if long option names are
translated.  The option definition file must contain ``no-xlate =
opt-cfg;'' or ``no-xlate = opt;''  See the documentation for
details.</para></item>
      </change>

      <change from="5.9.1" to="5.9.2">
        <item><para>GNU GPL v3 is now emitted with the "gpl" and
"lgpl" functions.</para></item>
        <items name="The most work was done for AutoOpts:">
          <item><para>usage.tpl template has been added.</para></item>
          <item><para>* getopt.tpl uses this template for constructing
its usage string.</para></item>
          <item><para>if "short-usage" or "full-usage" can be used to
specify the form of the usage text:</para>
          <unorderedlist>
            <item><para>not supplied -&gt; compute it at run
time</para></item>
            <item><para>supplied, but empty -&gt; use "usage.tpl" to
compute it</para></item>
            <item><para>is a variable name -&gt; insert into option
structure</para></item>
            <item><para>is text -&gt; emit the text and point to it
from option structure</para></item>
          </unorderedlist></item>
        </items>
      </change>

      <change from="5.9.0" to="5.9.1">
        <item><para>getopt.tpl template is fixed to not require the
internal header autoopts/autoopts.h.</para></item>
        <item><para>MAXPATHLEN will use _MAX_PATH on Windows
platforms</para></item>
        <item><para>new libopts configuration option:
--disable-optional-args This will #define NO_OPTIONAL_OPT_ARGS in
config.h and cause the built library to ignore the OPTST_ARG_OPTIONAL
bit in an option descriptor.  autoopts generated code compiled with
NO_OPTIONAL_OPT_ARGS #defined will never have that bit set in the
option descriptors either.  If libopts has been so configured, then
the installed options.h header will contain: #define
NO_OPTIONAL_OPT_ARGS 1 so that client code will generally be compiled
with that flag set. The OPTST_ARG_OPTIONAL bit is ignored
regardless.</para></item>
        <item><para>Fixed up --load-opts environment variable
processing.  You can now correctly suppress config file loading with
either:</para>
        <screen>
PROGRAM_LOAD_OPTS=no
    PROGRAM=--no-load-opts
        </screen></item>
        <item><para>added new auto-supported option, --usage.  It is
incorporated by specifying ``usage-opt;'' in the option definitions
file.</para></item>
        <item><para>libopts now uses several exit codes from
sysexits.h:</para>
        <screen>
EX_NOINPUT  (66) - a specified config file cannot be found
  EX_SOFTWARE (70) - libopts error - please file a bug report
  EX_CONFIG   (78) - a NULL option descriptor was passed in - user bug
        </screen></item>
      </change>

      <change from="5.8.9" to="5.9">
        <item><para>a script for producing Debian packages is
included</para></item>
        <item><para>including of templates and definitions now works
more like ``#include "foo"'' instead of ``#include
&lt;foo&gt;''.</para></item>
        <item><para>fixed sizeof(int) != sizeof(size_t)
bug.</para></item>
        <item><para>fixed incorrect argument number format
string</para></item>
      </change>

      <change from="5.8.8" to="5.8.9">
        <item><para>GREP is now a configurable.
(Sheesh!)</para></item>
        <item><para>options with hierarchical structure (nested
values) had some bugs in the config file parsing code.
Fixed.</para></item>
        <item><para>Since YACC is not used any more, it is no longer
required. :)</para></item>
      </change>

      <change from="5.8.7" to="5.8.8">
        <item><para>--short-help/-h is now a standard option.  See
stdoptions.def.</para></item>
        <item><para>fixed a value referencing bug in enumeration arg
handling (seen on platforms where sizeof(int) !=
sizeof(void*)).</para></item>
        <item><para>fixed some issues caused by extraordinary space
optimizations</para></item>
        <item><para>cope with the fact that you cannot directly
capture the return code in setjmp from a longjmp invocation. 8-O !!
viz., int res = setjmp(&amp;ctx); is illegal.</para></item>
      </change>

      <change from="5.8.5" to="5.8.6">
        <item><para>AutoOpts code presumed that there were no #defines
for the option names.  You can now force aside such
conflicts.</para></item>
        <item><para>AutoOpts generated code unconditionally #includes
limits.h and stdint.h.</para></item>
        <item><para>aliased pointer cleanups should allow higher
optimization of code.</para></item>
        <item><para>The installation of the tear-off libopt library is
now optional to the installers of client projects.</para></item>
      </change>

      <change from="5.8.4" to="5.8.5">
        <item><para>ag-fprintf will now allow you to emit text into a
suspended output stream.</para></item>
        <item><para>string tables have been implemented as a scheme
function.  This makes it very easy to produce an array of characters
containing NUL termintaed strings and have these string offsets
(indexes) available for indexing into the string arrays.</para></item>
        <item><para>The libopts code will omit Windows-unfriendly code
if the compile defines _WIN32 and does not define
__CYGWIN__.</para></item>
        <item><para>suffix specifications in the pseudo macro may now
construct an output file name format string using scheme code, a
la:</para>
        <screen>
[= autogen5 template
    h=(string-append (getenv "TMPDIR") "/%s-hdr.h")  =]
        </screen>
        <para>The "%s" will still be replaced by the base
name.</para></item>
        <item><para>the scheme function "version-compare" will allow
you to compare two dotted version numbers.  These can be your own
versions or that of autogen.  The scheme variable ``autogen-version''
has been around for a long time and may be used as one of the
arguments.</para></item>
        <item><para>#assert is now active in definition files.  If the
text begins with a back quote, it is handed off to the shell for
processing. If an open parenthesis, it is handed off to Guile.  If it
is anything else, it is ignored.</para></item>
      </change>

      <change from="5.8.3" to="5.8.4">
        <item><para>Day 1 bug in snprintfv: numberd format elements
can get mishandled.</para></item>
        <item><para>more platform specific variations in test output
are handled.</para></item>
        <item><para>column 1 apostrophes in generated man page text
are now escaped.</para></item>
        <item><para>Guile release 1.8.x is accommodated (in progress
3/25/2006)</para></item>
      </change>
    </notes>

    <changelog>
      <change date="2012 January 27" revision="3"
      author="Peter O'Gorman" email="pogma@thewrittenword.com">
        <item><para>Update autoconf dependency from 2.63 to
2.66</para></item>
        <item><para>Update automake dependency from 1.10.2 to
1.11.1</para></item>
        <item><para>Update bison dependency from 2.3 to
2.4.3</para></item>
        <item><para>Update gawk dependency from 3.1.6 to
3.1.8</para></item>
        <item><para>Update mktemp dependency from 1.5 to
1.7</para></item>
        <item><para>Update libxml dependency from 2.6.32 to
2.7.8</para></item>
        <item><para>Update perl dependency from 5.8.8 to
5.12.2</para></item>
        <item><para>Add support for AIX 7.1</para></item>
        <item><para>Remove support for HP-UX 10.20, AUX 4.3, SLES 10,
RHEL 3, and Solaris 6 and 7</para></item>
      </change>

      <change date="2010 November 2" revision="2"
      author="Albert Chin-A-Young" email="china@thewrittenword.com">
        <item><para>Add support for RHEL 6</para></item>
      </change>
    </changelog>
  </program>
</programs>
